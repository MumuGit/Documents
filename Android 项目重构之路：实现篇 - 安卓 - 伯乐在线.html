<!DOCTYPE html>
<!-- saved from url=(0033)http://android.jobbole.com/82083/ -->
<html lang="zh-CN" prefix="og: http://ogp.me/ns#" class="js rgba borderradius boxshadow textshadow opacity cssanimations cssgradients csstransitions fontface generatedcontent video audio js"><!--<![endif]--><!-- BEGIN head --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/shares.php" charset="utf-8"></script>

	<!-- Title -->
	<title>Android 项目重构之路：实现篇 - 安卓 - 伯乐在线</title>
	
	<!-- Meta Tags -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!-- Favicon & Mobileicon -->
	<link rel="shortcut icon" href="http://android.jobbole.com/wp-content/uploads/sites/14/2014/12/favicon.png">
	<link rel="apple-touch-icon" href="http://android.jobbole.com/wp-content/themes/jobboleblogv3/mobileicon.png">
	
	<!-- RSS, Atom & Pingbacks -->
		<link rel="alternate" title="安卓 – 伯乐在线 RSS Feed" href="http://android.jobbole.com/feed/">
		<link rel="alternate" title="RSS .92" href="http://android.jobbole.com/feed/rss/">
	<link rel="alternate" title="Atom 0.3" href="http://android.jobbole.com/feed/atom/">
	<link rel="pingback" href="http://android.jobbole.com/xmlrpc.php">
	
	<!-- Theme Hook -->
	
<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="前两篇文章已经讲了我的项目开始搭建时的架构设计和界面设计，这篇就讲讲具体怎么实现的，以实现最小化可用产品(MVP)的目标，用最简单的方式来搭建架构和实现代码。">
<link rel="canonical" href="http://android.jobbole.com/82083/">
<meta property="og:locale" content="zh_CN">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 项目重构之路：实现篇 - 安卓 - 伯乐在线">
<meta property="og:description" content="前两篇文章已经讲了我的项目开始搭建时的架构设计和界面设计，这篇就讲讲具体怎么实现的，以实现最小化可用产品(MVP)的目标，用最简单的方式来搭建架构和实现代码。">
<meta property="og:url" content="http://android.jobbole.com/82083/">
<meta property="og:site_name" content="安卓 - 伯乐在线">
<meta property="og:image" content="http://jbcdn2.b0.upaiyun.com/2015/03/dbaebd2fb7abfcfc4daeabc521d6ece71.png">
<meta property="og:image" content="http://jbcdn2.b0.upaiyun.com/2015/11/3c8c04f69330ce5db0f4f5ad19854c41.jpg">
<meta property="og:image" content="http://jbcdn2.b0.upaiyun.com/2015/11/8037205be2b2fba28b321887a17c744c.jpg">
<!-- / Yoast WordPress SEO plugin. -->

<link rel="stylesheet" id="dashicons-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/dashicons.min.css" type="text/css" media="all">
<link rel="stylesheet" id="thickbox-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/thickbox.css" type="text/css" media="all">
<link rel="stylesheet" id="fancybox-css-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery.fancybox.css" type="text/css" media="all">
<link rel="stylesheet" id="jobbole-wp-css-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jobbole-wp-plugin.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon_colorbox_css-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/colorbox.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon_style-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/crayon_style.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon_global_style-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/global_style.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-github-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/github.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/monaco.css" type="text/css" media="all">
<link rel="stylesheet" id="v48fv_images-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/images.css" type="text/css" media="all">
<link rel="stylesheet" id="v48fv_front-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/front.css" type="text/css" media="all">
<link rel="stylesheet" id="v48fv_common-css" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/common.css" type="text/css" media="all">
<div class="fit-vids-style">­<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style></div><script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery-migrate.min.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery.fancybox.pack.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/superfish.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/menu-effects.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var JobboleAjax = {"ajaxurl":"http:\/\/android.jobbole.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jobbole-wp-plugin.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery.colorbox-min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.7.1.1","is_admin":"0","ajaxurl":"http:\/\/android.jobbole.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/util.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonTagEditorSettings = {"home_url":"http:\/\/android.jobbole.com","css":"crayon-te","css_selected":"crayon-selected","code_css":"#crayon-code","url_css":"#crayon-url","url_info_css":"#crayon-te-url-info","lang_css":"#crayon-lang","title_css":"#crayon-title","mark_css":"#crayon-mark","range_css":"#crayon-range","inline_css":"crayon-inline","inline_hide_css":"crayon-hide-inline","inline_hide_only_css":"crayon-hide-inline-only","hl_css":"#crayon-highlight","switch_html":"#content-html","switch_tmce":"#content-tmce","tinymce_button_generic":".mce-btn","tinymce_button":"a.mce_crayon_tinymce,.mce-i-crayon_tinymce","tinymce_button_unique":"mce_crayon_tinymce","tinymce_highlight":"mce-active","submit_css":"#crayon-te-ok","cancel_css":"#crayon-te-cancel","content_css":"#crayon-te-content","dialog_title_css":"#crayon-te-title","submit_wrapper_css":"#crayon-te-submit-wrapper","data_value":"data-value","attr_sep":":","css_sep":"_","fallback_lang":"java","add_text":"Add Code","edit_text":"Edit Code","quicktag_text":"crayon","submit_add":"\u63d2\u5165","submit_edit":"\u4fdd\u5b58","bar":"#crayon-te-bar","bar_content":"#crayon-te-bar-content","extensions":{"scpt":"applescript","applescript":"applescript","swf":"as","fla":"as","cs":"c#","h":"c++","hh":"c++","hpp":"c++","hxx":"c++","h++":"c++","cc":"c++","cpp":"c++","cxx":"c++","c++":"c++","pas":"delphi","java":"java","class":"java","jar":"java","mv":"miva","mvc":"miva","mvt":"miva","m":"objc","mm":"objc","psc":"papyrus","pl":"perl","py":"python","pyw":"python","pyc":"python","pyo":"python","pyd":"python","rb":"ruby","rbx":"ruby","rhtml":"ruby","vbs":"vb"}};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/crayon_tag_editor.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jquery.popup.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/crayon.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/modernizr.js.下载"></script>
<link rel="https://api.w.org/" href="http://android.jobbole.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://android.jobbole.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://android.jobbole.com/wp-includes/wlwmanifest.xml"> 
<link rel="shortlink" href="http://android.jobbole.com/?p=82083">
<link rel="alternate" type="application/json+oembed" href="http://android.jobbole.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F">
<link rel="alternate" type="text/xml+oembed" href="http://android.jobbole.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F&amp;format=xml">
    <script type="text/javascript">
        jQuery(function($){
            $('.comment-reply-link').click(function(e){
                e.preventDefault();
                var args = $(this).data('onclick');
                args = args.replace(/.*\(|\)/gi, '').replace(/\"|\s+/g, '');
                args = args.split(',');
                tinymce.EditorManager.execCommand('mceRemoveEditor', true, 'comment_editor');
                addComment.moveForm.apply( addComment, args );
                tinymce.EditorManager.execCommand('mceAddEditor', true, 'comment_editor');
            });

            $('#cancel-comment-reply-link').click(function(e){
                e.preventDefault();
                tinymce.EditorManager.execCommand('mceRemoveEditor', true, 'comment_editor');
                tinymce.EditorManager.execCommand('mceAddEditor', true, 'comment_editor');
            });
        });
    </script>
	
	<!-- CSS -->
    <link rel="stylesheet" type="text/css" media="screen" href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/style.css">
	<style>
				*::selection { background: #0099cc; }
		*::-moz-selection { background: #0099cc; }
		body {
            background: #ffffff         }

        a,
        .tabs ul.nav li a:hover,
        .tabs ul.nav li.active a,
        .dropcap,
        .toggle.hover .toggle-title,
        li.comment cite a:hover,
        h3.widget-title,
        .post-meta .meta-title:hover,
        .the-latest a:hover h4,
        .aw_socialcounter_widget li a:hover,
        .aw_tabbed_widget #tab-latest-comments a:hover
        {
            color: #0099cc;
        }

		a:hover { color: #b30000; }
		input:focus, textarea:focus { border-color: #0099cc; }

		#searchsubmit,
        .highlight,
        .aw_tabbed_widget .tabs ul.nav li.active a, footer .aw_tabbed_widget .tabs ul.nav li.active a,
        #top .aw_tabbed_widget .tabs ul.nav li.active a,
        .aw_tabbed_widget .tabs ul.nav li a:hover,
        footer .aw_tabbed_widget .tabs ul.nav li a:hover,
        #top .aw_tabbed_widget .tabs ul.nav li a:hover,
        .aw_twitter_widget .twitter-icon, .testimonial-icon,
        #top-closed:hover,
        .flex-control-nav a:hover,
        .flex-control-nav a.flex-active {
            background-color: #0099cc;
        }

		.submit { background-color: #0099cc; border-color: #007399; }
		.submit:hover { background-color: #b30000; border-color: #860000; }
		#searchsubmit:hover { background-color: #b30000; }
		.toggle.hover .toggle-icon { border-top-color: #0099cc; }
		.toggle.hover.active .toggle-icon { border-bottom-color: #0099cc; }
		.flex-direction-nav li .flex-prev:hover { border-right-color: #0099cc; }
		.flex-direction-nav li .flex-next:hover { border-left-color: #0099cc; }
		@media only screen and (min-width: 768px) and (max-width: 959px) {
			.aw_tabbed_widget .tabs ul.nav li a:hover, .tabs ul.nav li.active a { color: #0099cc; }
		}
		@media screen and (max-width: 767px) {
			.tabs ul.nav li a:hover, .tabs ul.nav li.active a { color: #0099cc; }
		}
	</style>

	<!--[if IE 8]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
    <![endif]-->

	<!-- Links: RSS + Atom Syndication + Pingback etc. -->
	<link rel="alternate" type="application/rss+xml" title="安卓 – 伯乐在线 RSS Feed" href="http://android.jobbole.com/feed/">
	<link rel="alternate" type="text/xml" title="RSS .92" href="http://android.jobbole.com/feed/rss/">
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://android.jobbole.com/feed/atom/">
	<link rel="pingback" href="http://android.jobbole.com/xmlrpc.php">

<!-- END head -->
<style type="text/css">.fancybox-margin{margin-right:17px;}</style></head>

<!-- BEGIN body -->
<body class="single single-post postid-82083 single-format-standard ie"><link href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jiathis_counter.css" rel="stylesheet" type="text/css"><link href="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jiathis_share.css" rel="stylesheet" type="text/css"><iframe frameborder="0" style="position: absolute; display: none; opacity: 0;" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/saved_resource.html"></iframe><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;"></div><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; overflow: auto;"></div><iframe frameborder="0" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jiathis_utility.html" style="display: none;"></iframe>

		
	    <nav id="top-nav" class="menu-nav">

        <!-- BEGIN .container -->
        <div class="container">

            <div class="grid-7 hide-on-480 hide-on-767">
                <ul id="menu-main-menu" class="menu left sf-js-enabled">
                    <li class="menu-item">
                        <a href="http://www.jobbole.com/">首页</a>
                    </li>
                    <li class="menu-item">
                        <a href="http://top.jobbole.com/">资讯</a>
                    </li>
                    <li class="menu-item">
                        <span><a href="http://blog.jobbole.com/">文章 <i class="fa fa-angle-double-down"></i></a></span>
                        <ul class="sub-menu sf-js-enabled" style="display: none; visibility: hidden;">
                            <li class="menu-item"><a href="http://blog.jobbole.com/">全部文章</a></li>
                            <li class="menu-item"><a href="http://web.jobbole.com/">Web前端</a></li>
                            <li class="menu-item"><a href="http://python.jobbole.com/">Python开发</a></li>
                            <li class="menu-item"><a href="http://www.importnew.com/?utm_source=home-top-nav">Java技术</a></li>
                            <li class="menu-item"><a href="http://android.jobbole.com/">Android应用</a></li>
                            <li class="menu-item"><a href="http://ios.jobbole.com/">iOS应用</a></li>
                        </ul>
                    </li>
                    <li class="menu-item">
                        <a href="http://hao.jobbole.com/">资源</a>
                    </li>

                    <li class="menu-item">
                        <a href="http://group.jobbole.com/">小组</a>
                    </li>

                    <li class="menu-item">
                        <a href="http://date.jobbole.com/"><i class="fa fa-heart-o pinkiconcolor"></i> 相亲</a>
                    </li>
                </ul>
            </div>

            <div class="grid-5">
                <ul id="menu-main-menu" class="menu sf-js-enabled">
                    <li class="menu-item hide-on-768-wider left">
                        <span><a href="http://android.jobbole.com/82083/#">频道 <i class="fa fa-angle-double-down"></i></a></span>
                        <ul class="sub-menu sf-js-enabled" style="display: none; visibility: hidden;">
                            <li class="menu-item"><a href="http://www.jobbole.com/">首页</a></li>
                            <li class="menu-item"><a href="http://top.jobbole.com/">资讯</a></li>
                            <li class="menu-item"><a href="http://group.jobbole.com/">小组</a></li>
                            <li class="menu-item"><a href="http://date.jobbole.com/">相亲 <i class="fa fa-heart-o pinkiconcolor"></i></a></li>
                            <li class="menu-item"><a href="http://hao.jobbole.com/">资源</a></li>
                            <li class="menu-item"><a href="http://blog.jobbole.com/">全部文章</a></li>
                            <li class="menu-item"><a href="http://web.jobbole.com/">前端</a></li>
                            <li class="menu-item"><a href="http://python.jobbole.com/">Python</a></li>
                            <li class="menu-item"><a href="http://www.importnew.com/">Java</a></li>
                            <li class="menu-item"><a href="http://android.jobbole.com/">安卓</a></li>
                            <li class="menu-item"><a href="http://ios.jobbole.com/">iOS</a></li>
                        </ul>
                    </li>

                                            <li class="menu-item"><a href="http://www.jobbole.com/login?redirect=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F"><i class="fa fa-sign-in"></i> 登录</a></li>
                        <li class="menu-item"><a href="http://www.jobbole.com/register"><i class="fa fa-user-plus"></i> 注册</a></li>
                    
                    
                    <li class="menu-item"><a title="帮助" href="http://blog.jobbole.com/87622/"><i class="fa fa-question-circle fa-lg"></i></a></li>
                </ul>
            </div>
            <div class="clear"></div>

        </div>
        <!-- END .container -->

    </nav>
    <!-- END #top-nav -->
  	
	<!-- BEGIN #wrapper -->
	<div id="wrapper" class="container">

		<!-- BEGIN header -->
		<header>
		
						
			<div class="header-wrapper">
								
				<!-- BEGIN #logo -->
				<div id="logo" class="leaderboard-true">
                    <a href="http://android.jobbole.com/"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jobbole-logo.png" alt="安卓 – 伯乐在线"></a>
				</div>
				<!-- END #logo -->
				
				<!-- BEGIN #leaderboard -->
				<div id="leaderboard">
				
					<a href="http://date.jobbole.com/4164/" target="_blank"><img width="728" height="90" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/bfdcef89gy1ffimc8bgf3j20k802i3zn.jpg"></a>				
				</div>
				<!-- END #leaderboard -->
				
				<div class="clear"></div>
			
			</div>
			
						
			<div class="clear"></div>

            			<!-- BEGIN #main-nav -->
			<nav id="main-nav" class="grid-12 menu-nav">
                <div class="menu-sub-menu-container"><ul id="main-nav-menu" class="menu sf-js-enabled"><li id="menu-item-80379" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-80379"><a href="http://android.jobbole.com/">首页</a></li>
<li id="menu-item-80378" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-80378"><a href="http://android.jobbole.com/all-posts/">所有文章</a></li>
<li id="menu-item-80416" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-80416"><a href="http://android.jobbole.com/category/news/">行业动态</a></li>
<li id="menu-item-80415" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-80415"><a href="http://android.jobbole.com/category/tech-share/">技术分享</a></li>
<li id="menu-item-80562" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-80562"><a href="http://android.jobbole.com/category/product/">产品设计</a></li>
<li id="menu-item-80417" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80417"><a href="http://hao.jobbole.com/category/android/">工具资源</a></li>
<li id="menu-item-84039" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-84039"><a href="http://group.jobbole.com/category/tech/android/">安卓小组</a></li>
<li id="menu-item-80590" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-80590"><a href="http://android.jobbole.com/82083/#">更多频道▼</a>
<ul class="sub-menu sf-js-enabled" style="display: none; visibility: hidden;">
	<li id="menu-item-80591" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80591"><a href="http://ios.jobbole.com/">iOS</a></li>
	<li id="menu-item-80592" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80592"><a href="http://www.importnew.com/">Java</a></li>
	<li id="menu-item-80593" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80593"><a href="http://python.jobbole.com/">Python</a></li>
	<li id="menu-item-80594" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-80594"><a href="http://web.jobbole.com/">Web前端</a></li>
</ul>
</li>
</ul><select class="selectnav" id="selectnav1"><option value="">- 导航条 -</option><option value="http://android.jobbole.com/">首页</option><option value="http://android.jobbole.com/all-posts/">所有文章</option><option value="http://android.jobbole.com/category/news/">行业动态</option><option value="http://android.jobbole.com/category/tech-share/">技术分享</option><option value="http://android.jobbole.com/category/product/">产品设计</option><option value="http://hao.jobbole.com/category/android/">工具资源</option><option value="http://group.jobbole.com/category/tech/android/">安卓小组</option><option value="http://android.jobbole.com/82083/#">更多频道▼</option><option value="http://ios.jobbole.com/">- iOS</option><option value="http://www.importnew.com/">- Java</option><option value="http://python.jobbole.com/">- Python</option><option value="http://web.jobbole.com/">- Web前端</option></select></div>				<div class="clear"></div>
			</nav>
			<!-- END #main-nav -->
                        <div class="clear"></div>

		</header>
		<!-- END header -->
		
		<div id="breadcrumb" class="grid-12 margin-20"><div class="breadcrumb-wrapper"><!-- Breadcrumb NavXT 4.4.0 -->
<a title="Go to 伯乐在线." href="http://www.jobbole.com/" class="main-home">伯乐在线</a> &gt; <a title="Go to 安卓 - 伯乐在线." href="http://android.jobbole.com/" class="home">安卓 - 伯乐在线</a> &gt; <a title="Go to 所有文章." href="http://android.jobbole.com/all-posts/" class="post-root post-post">所有文章</a> &gt; <a title="Go to the 技术分享 category archives." href="http://android.jobbole.com/category/tech-share/" class="category">技术分享</a> &gt; Android 项目重构之路：实现篇</div></div><div class="clear"></div>

<!-- BEGIN .grid-8 -->
<div class="grid-8">

		
	<!-- BEGIN .post -->
<div class="post-82083 post type-post status-publish format-standard has-post-thumbnail hentry category-tech-share tag-3874 odd" id="post-82083">
	
	<!-- BEGIN .entry-header -->
	<div class="entry-header">
	
				
		<h1>Android 项目重构之路：实现篇</h1>
		
							
	</div>
	<!-- BEGIN .entry-header -->
	
	<!-- BEGIN .entry-meta -->
	<div class="entry-meta">
	
		<p class="entry-meta-hide-on-mobile">

            2015/11/19 ·  <a href="http://android.jobbole.com/category/tech-share/" rel="category tag">技术分享</a>
            
                            · <a href="http://android.jobbole.com/82083/#article-comment"> 3 评论 </a>
            

            
             ·  <a href="http://android.jobbole.com/tag/%e9%87%8d%e6%9e%84/">重构</a>
            
</p>

<!-- JiaThis Button BEGIN -->
<div class="jiathis_style" style="display: block; margin: 0 0px; clear: both;"><span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
<a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
<a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
<a class="jiathis_button_fb" title="分享到Facebook"><span class="jiathis_txt jtico jtico_fb"></span></a>
<a class="jiathis_button_douban" title="分享到豆瓣"><span class="jiathis_txt jtico jtico_douban"></span></a>
<a class="jiathis_button_readitlater"></a>
<a class="jiathis_button_evernote" title="分享到印象笔记"><span class="jiathis_txt jtico jtico_evernote"></span></a>
<a class="jiathis_button_ydnote" title="分享到有道云笔记"><span class="jiathis_txt jtico jtico_ydnote"></span></a>
<a href="http://www.jiathis.com/share?uid=1745061" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"><span class="jiathis_button_expanded jiathis_counter jiathis_bubble_style" id="jiathis_counter_58" title="累计分享2次">2</span></a>
</div>
<!-- JiaThis Button END -->


	</div>
	<!-- END .entry-meta -->

	<!-- BEGIN .entry -->
	<div class="entry">

        
		<div class="copyright-area">原文出处： <a target="_blank" href="http://keeganlee.me/post/android/20150629">Keegan小钢</a>&nbsp;&nbsp;&nbsp;</div><p><a href="http://android.jobbole.com/82076/" target="_blank">Android项目重构之路:架构篇</a><br>
<a href="http://android.jobbole.com/82080/" target="_blank">Android项目重构之路:界面篇</a><br>
<a href="http://android.jobbole.com/82083/" target="_blank">Android项目重构之路:实现篇</a></p>
<hr>
<p>前两篇文章《<a href="http://android.jobbole.com/82076/" target="_blank">Android项目重构之路:架构篇</a>》和《<a href="http://android.jobbole.com/82080/" target="_blank">Android项目重构之路:界面篇</a>》已经讲了我的项目开始搭建时的架构设计和界面设计，这篇就讲讲具体怎么实现的，以实现最小化可用产品(MVP)的目标，用最简单的方式来搭建架构和实现代码。</p>
<p>IDE采用Android Studio，Demo实现的功能为用户注册、登录和展示一个券列表，数据采用我们现有项目的测试数据，接口也是我们项目中的测试接口。</p>
<h2 id="toc_0">项目搭建</h2>
<p>根据<a href="http://keeganlee.me/post/android/20150605">架构篇</a>所讲的，将项目分为了四个层级：模型层、接口层、核心层、界面层。四个层级之间的关系如下图所示：</p>
<p><img class="aligncenter" id="pic" style="padding: 0px;font-size: 0px;color: transparent;text-align: center;font-family: &#39;Microsoft YaHei&#39;, 宋体, &#39;Myriad Pro&#39;, Lato, &#39;Helvetica Neue&#39;, Helvetica, Arial, sans-serif" alt="" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/3c8c04f69330ce5db0f4f5ad19854c41.jpg"></p>
<p>实现上，在Android Studio分为了相应的四个模块(Module)：<em>model、api、core、app</em>。<br>
model为模型层，api为接口层，core为核心层，app为界面层。<br>
model、api、core这三个模块的类型为library，app模块的类型为application。<br>
四个模块之间的依赖设置为：model没有任何依赖，接口层依赖了模型层，核心层依赖了模型层和接口层，界面层依赖了核心层和模型层。<br>
项目搭建的步骤如下：</p>
<ol>
<li>创建新项目，项目名称为KAndroid，包名为com.keegan.kandroid。默认已创建了app模块，查看下app模块下的build.gradle，会看到第一行为：<br>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84c88262065739" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">apply plugin: 'com.android.application'</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84c88262065739-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84c88262065739-1"><span class="crayon-e">apply </span><span class="crayon-v">plugin</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.application'</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<br>
这行表明了app模块是application类型的。</li>
<li>分别新建模块model、api、core，Module Type都选为Android Library，在Add an activity to module页面选择Add No Activity，这三个模块做为库使用，并不需要界面。创建完之后，查看相应模块的build.gradle，会看到第一行为：<br>
<!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84c93993448013" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">apply plugin: 'com.android.library'</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84c93993448013-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84c93993448013-1"><span class="crayon-e">apply </span><span class="crayon-v">plugin</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.library'</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->

</li>
<li>建立模块之间的依赖关系。有两种方法可以设置：<br>
第一种：通过右键模块，然后Open Module Settings，选择模块的Dependencies，点击左下方的加号，选择Module dependency，最后选择要依赖的模块，下图为api模块添加了model依赖；&nbsp;<p></p>
<p><img class="M_cur_zoom_out" id="pic" alt="" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8037205be2b2fba28b321887a17c744c.jpg"></p>
<p><span style="line-height: 1.5">第二种：直接在模块的build.gradle设置。打开build.gradle，在最后的dependencies一项里面添加新的一行：compile project(‘:ModuleName’)，比如app模块添加对model模块和core模块依赖之后的dependencies如下：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84c97191127776" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.0'
    compile project(':model')
    compile project(':core')
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84c97191127776-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c97191127776-2">2</div><div class="crayon-num" data-line="crayon-592b610e84c97191127776-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c97191127776-4">4</div><div class="crayon-num" data-line="crayon-592b610e84c97191127776-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c97191127776-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84c97191127776-1"><span class="crayon-e">dependencies</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c97191127776-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">fileTree</span><span class="crayon-sy">(</span><span class="crayon-v">dir</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'libs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'*.jar'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84c97191127776-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.support:appcompat-v7:22.0.0'</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c97191127776-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':model'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84c97191127776-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':core'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c97191127776-6"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>通过上面两种方式的任意一种，创建了模块之间的依赖关系之后，每个模块的build.gradle的dependencies项的结果将会如下：<br>
model:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84c9b081418570" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.0'
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84c9b081418570-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c9b081418570-2">2</div><div class="crayon-num" data-line="crayon-592b610e84c9b081418570-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c9b081418570-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84c9b081418570-1"><span class="crayon-e">dependencies</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c9b081418570-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">fileTree</span><span class="crayon-sy">(</span><span class="crayon-v">dir</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'libs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'*.jar'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84c9b081418570-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.support:appcompat-v7:22.0.0'</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c9b081418570-4"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p>api:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84c9f344706476" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.0'
    compile project(':model')
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84c9f344706476-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c9f344706476-2">2</div><div class="crayon-num" data-line="crayon-592b610e84c9f344706476-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84c9f344706476-4">4</div><div class="crayon-num" data-line="crayon-592b610e84c9f344706476-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84c9f344706476-1"><span class="crayon-e">dependencies</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c9f344706476-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">fileTree</span><span class="crayon-sy">(</span><span class="crayon-v">dir</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'libs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'*.jar'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84c9f344706476-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.support:appcompat-v7:22.0.0'</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84c9f344706476-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':model'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84c9f344706476-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>core:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ca2701467805" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.0'
    compile project(':model')
    compile project(':api')
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ca2701467805-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca2701467805-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ca2701467805-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca2701467805-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ca2701467805-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca2701467805-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ca2701467805-1"><span class="crayon-e">dependencies</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca2701467805-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">fileTree</span><span class="crayon-sy">(</span><span class="crayon-v">dir</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'libs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'*.jar'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84ca2701467805-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.support:appcompat-v7:22.0.0'</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca2701467805-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':model'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84ca2701467805-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':api'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca2701467805-6"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>app:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ca5361974182" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.0'
    compile project(':model')
    compile project(':core')
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ca5361974182-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca5361974182-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ca5361974182-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca5361974182-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ca5361974182-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca5361974182-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ca5361974182-1"><span class="crayon-e">dependencies</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca5361974182-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">fileTree</span><span class="crayon-sy">(</span><span class="crayon-v">dir</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'libs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'*.jar'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84ca5361974182-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.android.support:appcompat-v7:22.0.0'</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca5361974182-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':model'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-592b610e84ca5361974182-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">compile </span><span class="crayon-e">project</span><span class="crayon-sy">(</span><span class="crayon-s">':core'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca5361974182-6"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>
</p></li>
</ol>
<h2 id="toc_1">创建业务对象模型</h2>
<p>业务对象模型统一存放于model模块，是对业务数据的封装，大部分都是从接口传过来的对象，因此，其属性也与接口传回的对象属性相一致。在这个Demo里，只有一个业务对象模型，封装了券的基本信息，以下是该实体类的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ca9784034385" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">/**
 * 券的业务模型类，封装了券的基本信息。
 * 券分为了三种类型：现金券、抵扣券、折扣券。
 * 现金券是拥有固定面值的券，有固定的售价；
 * 抵扣券是满足一定金额后可以抵扣的券，比如满100减10元；
 * 折扣券是可以打折的券。
 *
 * @version 1.0 创建时间：15/6/21
 */
public class CouponBO implements Serializable {
    private static final long serialVersionUID = -8022957276104379230L;
    private int id;                // 券id
    private String name;           // 券名称
    private String introduce;      // 券简介
    private int modelType;         // 券类型，1为现金券，2为抵扣券，3为折扣券
    private double faceValue;      // 现金券的面值
    private double estimateAmount; // 现金券的售价
    private double debitAmount;    // 抵扣券的抵扣金额
    private double discount;       // 折扣券的折扣率（0-100）
    private double miniAmount;     // 抵扣券和折扣券的最小使用金额

    // TODO 所有属性的getter和setter
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-6">6</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-8">8</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-10">10</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-12">12</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-14">14</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-16">16</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-18">18</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-20">20</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ca9784034385-22">22</div><div class="crayon-num" data-line="crayon-592b610e84ca9784034385-23">23</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ca9784034385-1"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-2"><span class="crayon-c"> * 券的业务模型类，封装了券的基本信息。</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-3"><span class="crayon-c"> * 券分为了三种类型：现金券、抵扣券、折扣券。</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-4"><span class="crayon-c"> * 现金券是拥有固定面值的券，有固定的售价；</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-5"><span class="crayon-c"> * 抵扣券是满足一定金额后可以抵扣的券，比如满100减10元；</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-6"><span class="crayon-c"> * 折扣券是可以打折的券。</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-7"><span class="crayon-c"> *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-8"><span class="crayon-c"> * @version 1.0 创建时间：15/6/21</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-9"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-10"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">CouponBO</span><span class="crayon-h"> </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-e">Serializable</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">serialVersionUID</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">8022957276104379230L</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">id</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 券id</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 券名称</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">introduce</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 券简介</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">modelType</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 券类型，1为现金券，2为抵扣券，3为折扣券</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">faceValue</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 现金券的面值</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">estimateAmount</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 现金券的售价</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">debitAmount</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 抵扣券的抵扣金额</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">discount</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 折扣券的折扣率（0-100）</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">miniAmount</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 抵扣券和折扣券的最小使用金额</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ca9784034385-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 所有属性的getter和setter</span></div><div class="crayon-line" id="crayon-592b610e84ca9784034385-23"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0029 seconds] -->
<p></p>
<h2 id="toc_2">接口层的封装</h2>
<p>在这个Demo里，提供了4个接口：一个发送验证码的接口、一个注册接口、一个登录接口、一个获取券列表的接口。这4个接口具体如下：</p>
<ul>
<li><strong>发送验证码接口</strong><br>
URL：http://uat.b.quancome.com/platform/api<br>
参数：&nbsp;<p></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>appKey</td>
<td>ANDROID_KCOUPON</td>
<td>String</td>
</tr>
<tr>
<td>method</td>
<td>service.sendSmsCode4Register</td>
<td>String</td>
</tr>
<tr>
<td>phoneNum</td>
<td>手机号码</td>
<td>String</td>
</tr>
</tbody>
</table>
<p>输出样例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cad959163499" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">{ "event": "0", "msg": "success" }</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cad959163499-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cad959163499-1"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>
</p></li>
<li><strong>注册接口</strong><br>
URL：http://uat.b.quancome.com/platform/api<br>
参数：&nbsp;<p></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>appKey</td>
<td>ANDROID_KCOUPON</td>
<td>String</td>
</tr>
<tr>
<td>method</td>
<td>customer.registerByPhone</td>
<td>String</td>
</tr>
<tr>
<td>phoneNum</td>
<td>手机号码</td>
<td>String</td>
</tr>
<tr>
<td>code</td>
<td>验证码</td>
<td>String</td>
</tr>
<tr>
<td>password</td>
<td>MD5加密密码</td>
<td>String</td>
</tr>
</tbody>
</table>
<p>输出样例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cb0937750008" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">{ "event": "0", "msg": "success" }</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cb0937750008-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cb0937750008-1"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>
</p></li>
<li><strong>登录接口</strong><br>
URL：http://uat.b.quancome.com/platform/api<br>
其他参数：&nbsp;<p></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>appKey</td>
<td>ANDROID_KCOUPON</td>
<td>String</td>
</tr>
<tr>
<td>method</td>
<td>customer.loginByApp</td>
<td>String</td>
</tr>
<tr>
<td>loginName</td>
<td>登录名（手机号）</td>
<td>String</td>
</tr>
<tr>
<td>password</td>
<td>MD5加密密码</td>
<td>String</td>
</tr>
<tr>
<td>imei</td>
<td>手机imei串号</td>
<td>String</td>
</tr>
<tr>
<td>loginOS</td>
<td>系统，android为1</td>
<td>int</td>
</tr>
</tbody>
</table>
<p>输出样例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cb4100188162" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">{ "event": "0", "msg": "success" }</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cb4100188162-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cb4100188162-1"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>
</p></li>
<li><strong>券列表</strong><br>
URL：http://uat.b.quancome.com/platform/api<br>
其他参数：&nbsp;<p></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>appKey</td>
<td>ANDROID_KCOUPON</td>
<td>String</td>
</tr>
<tr>
<td>method</td>
<td>issue.listNewCoupon</td>
<td>String</td>
</tr>
<tr>
<td>currentPage</td>
<td>当前页数</td>
<td>int</td>
</tr>
<tr>
<td>pageSize</td>
<td>每页显示数量</td>
<td>int</td>
</tr>
</tbody>
</table>
<p>输出样例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cb8564505496" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">{ "event": "0", "msg": "success", "maxCount": 125, "maxPage": 7, "currentPage": 1, "pageSize": 20, "objList":[
    {"id": 1, "name": "测试现金券", "modelType": 1, ...}, 
    {...}, 
    ...
]}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cb8564505496-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cb8564505496-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cb8564505496-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cb8564505496-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cb8564505496-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cb8564505496-1"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"maxCount"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">125</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"maxPage"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"currentPage"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"pageSize"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"objList"</span><span class="crayon-o">:</span><span class="crayon-sy">[</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cb8564505496-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-s">"id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"测试现金券"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"modelType"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-592b610e84cb8564505496-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cb8564505496-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-592b610e84cb8564505496-5"><span class="crayon-sy">]</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>
</p></li>
</ul>
<p>在<a href="http://keeganlee.me/post/android/20150605">架构篇</a>已经讲过，接口返回的json数据有三种固定结构：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cbb448761506" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">{"event": "0", "msg": "success"}
{"event": "0", "msg": "success", "obj":{...}}
{"event": "0", "msg": "success", "objList":[{...}, {...}], "currentPage": 1, "pageSize": 20, "maxCount": 2, "maxPage": 1}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cbb448761506-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbb448761506-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cbb448761506-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cbb448761506-1"><span class="crayon-sy">{</span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbb448761506-2"><span class="crayon-sy">{</span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"obj"</span><span class="crayon-o">:</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cbb448761506-3"><span class="crayon-sy">{</span><span class="crayon-s">"event"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"msg"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"objList"</span><span class="crayon-o">:</span><span class="crayon-sy">[</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">}</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"currentPage"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"pageSize"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"maxCount"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"maxPage"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0141 seconds] -->
<p>因此可以封装成实体类，代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cbf885214555" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class ApiResponseT&gt; {
    private String event;    // 返回码，0为成功
    private String msg;      // 返回信息
    private T obj;           // 单个对象
    private T objList;       // 数组对象
    private int currentPage; // 当前页数
    private int pageSize;    // 每页显示数量
    private int maxCount;    // 总条数
    private int maxPage;     // 总页数

    // 构造函数，初始化code和msg
    public ApiResponse(String event, String msg) {
        this.event = event;
        this.msg = msg;
    }

    // 判断结果是否成功
    public boolean isSuccess() {
        return event.equals("0");
    }

    // TODO 所有属性的getter和setter
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cbf885214555-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cbf885214555-23">23</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cbf885214555-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponseT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 返回码，0为成功</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 返回信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-v">obj</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 单个对象</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-v">objList</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 数组对象</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 当前页数</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">pageSize</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 每页显示数量</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">maxCount</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 总条数</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">maxPage</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// 总页数</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-10">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cbf885214555-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 构造函数，初始化code和msg</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponse</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">event</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-16">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cbf885214555-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 判断结果是否成功</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">isSuccess</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">equals</span><span class="crayon-sy">(</span><span class="crayon-s">"0"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cbf885214555-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 所有属性的getter和setter</span></div><div class="crayon-line" id="crayon-592b610e84cbf885214555-23"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>上面4个接口，URL和appKey都是一样的，用来区别不同接口的则是method字段，因此，URL和appKey可以统一定义，method则根据不同接口定义不同常量。而除去appKey和method，剩下的参数才是每个接口需要定义的参数。因此，对上面4个接口的定义如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cc2938596657" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public interface Api {
    // 发送验证码
    public final static String SEND_SMS_CODE = "service.sendSmsCode4Register";
    // 注册
    public final static String REGISTER = "customer.registerByPhone";
    // 登录
    public final static String LOGIN = "customer.loginByApp";
    // 券列表
    public final static String LIST_COUPON = "issue.listNewCoupon";

    /**
     * 发送验证码
     *
     * @param phoneNum 手机号码
     * @return 成功时返回：{ "event": "0", "msg":"success" }
     */
    public ApiResponseVoid&gt; sendSmsCode4Register(String phoneNum);

    /**
     * 注册
     *
     * @param phoneNum 手机号码
     * @param code     验证码
     * @param password MD5加密的密码
     * @return 成功时返回：{ "event": "0", "msg":"success" }
     */
    public ApiResponseVoid&gt; registerByPhone(String phoneNum, String code, String password);

    /**
     * 登录
     *
     * @param loginName 登录名（手机号）
     * @param password  MD5加密的密码
     * @param imei      手机IMEI串号
     * @param loginOS   Android为1
     * @return 成功时返回：{ "event": "0", "msg":"success" }
     */
    public ApiResponseVoid&gt; loginByApp(String loginName, String password, String imei, int loginOS);

    /**
     * 券列表
     *
     * @param currentPage 当前页数
     * @param pageSize    每页显示数量
     * @return 成功时返回：{ "event": "0", "msg":"success", "objList":[...] }
     */
    public ApiResponseListCouponBO&gt;&gt; listNewCoupon(int currentPage, int pageSize);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cc2938596657-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc2938596657-48">48</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cc2938596657-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">Api</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 发送验证码</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">SEND_SMS_CODE</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"service.sendSmsCode4Register"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 注册</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">REGISTER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"customer.registerByPhone"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 登录</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">LOGIN</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"customer.loginByApp"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 券列表</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">LIST_COUPON</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"issue.listNewCoupon"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-10">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cc2938596657-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-12"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 发送验证码</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param phoneNum 手机号码</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return 成功时返回：{ "event": "0", "msg":"success" }</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">sendSmsCode4Register</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-18">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cc2938596657-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 注册</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-21"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-22"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param phoneNum 手机号码</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-23"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param code&nbsp;&nbsp;&nbsp;&nbsp; 验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-24"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param password MD5加密的密码</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-25"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return 成功时返回：{ "event": "0", "msg":"success" }</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-26"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">registerByPhone</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-28">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cc2938596657-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-30"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 登录</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-31"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-32"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param loginName 登录名（手机号）</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param password&nbsp;&nbsp;MD5加密的密码</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param imei&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;手机IMEI串号</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param loginOS&nbsp;&nbsp; Android为1</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-36"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return 成功时返回：{ "event": "0", "msg":"success" }</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-37"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">loginByApp</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">imei</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">loginOS</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-41"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 券列表</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-42"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-43"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param currentPage 当前页数</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-44"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param pageSize&nbsp;&nbsp;&nbsp;&nbsp;每页显示数量</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-45"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return 成功时返回：{ "event": "0", "msg":"success", "objList":[...] }</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-46"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cc2938596657-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">listNewCoupon</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">pageSize</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc2938596657-48"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0081 seconds] -->
<p>Api的实现类则是ApiImpl了，实现类需要封装好请求数据并向服务器发起请求，并将响应结果的数据转为ApiResonse返回。而向服务器发送请求并将响应结果返回的处理则封装到http引擎类去处理。另外，这里引用了gson将json转为对象。ApiImpl的实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cc7802389826" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class ApiImpl implements Api {
    private final static String APP_KEY = "ANDROID_KCOUPON";
    private final static String TIME_OUT_EVENT = "CONNECT_TIME_OUT";
    private final static String TIME_OUT_EVENT_MSG = "连接服务器失败";
    // http引擎
    private HttpEngine httpEngine;

    public ApiImpl() {
        httpEngine = HttpEngine.getInstance();
    }

    @Override
    public ApiResponseVoid&gt; sendSmsCode4Register(String phoneNum) {
        MapString, String&gt; paramMap = new HashMapString, String&gt;();
        paramMap.put("appKey", APP_KEY);
        paramMap.put("method", SEND_SMS_CODE);
        paramMap.put("phoneNum", phoneNum);

        Type type = new TypeTokenApiResponseVoid&gt;&gt;(){}.getType();
        try {
            return httpEngine.postHandle(paramMap, type);
        } catch (IOException e) {
            return new ApiResponse(TIME_OUT_EVENT, TIME_OUT_EVENT_MSG);
        }
    }

    @Override
    public ApiResponseVoid&gt; registerByPhone(String phoneNum, String code, String password) {
        MapString, String&gt; paramMap = new HashMapString, String&gt;();
        paramMap.put("appKey", APP_KEY);
        paramMap.put("method", REGISTER);
        paramMap.put("phoneNum", phoneNum);
        paramMap.put("code", code);
        paramMap.put("password", EncryptUtil.makeMD5(password));

        Type type = new TypeTokenApiResponseListCouponBO&gt;&gt;&gt;(){}.getType();
        try {
            return httpEngine.postHandle(paramMap, type);
        } catch (IOException e) {
            return new ApiResponse(TIME_OUT_EVENT, TIME_OUT_EVENT_MSG);
        }
    }

    @Override
    public ApiResponseVoid&gt; loginByApp(String loginName, String password, String imei, int loginOS) {
        MapString, String&gt; paramMap = new HashMapString, String&gt;();
        paramMap.put("appKey", APP_KEY);
        paramMap.put("method", LOGIN);
        paramMap.put("loginName", loginName);
        paramMap.put("password", EncryptUtil.makeMD5(password));
        paramMap.put("imei", imei);
        paramMap.put("loginOS", String.valueOf(loginOS));

        Type type = new TypeTokenApiResponseListCouponBO&gt;&gt;&gt;(){}.getType();
        try {
            return httpEngine.postHandle(paramMap, type);
        } catch (IOException e) {
            return new ApiResponse(TIME_OUT_EVENT, TIME_OUT_EVENT_MSG);
        }
    }

    @Override
    public ApiResponseListCouponBO&gt;&gt; listNewCoupon(int currentPage, int pageSize) {
        MapString, String&gt; paramMap = new HashMapString, String&gt;();
        paramMap.put("appKey", APP_KEY);
        paramMap.put("method", LIST_COUPON);
        paramMap.put("currentPage", String.valueOf(currentPage));
        paramMap.put("pageSize", String.valueOf(pageSize));

        Type type = new TypeTokenApiResponseListCouponBO&gt;&gt;&gt;(){}.getType();
        try {
            return httpEngine.postHandle(paramMap, type);
        } catch (IOException e) {
            return new ApiResponse(TIME_OUT_EVENT, TIME_OUT_EVENT_MSG);
        }
    }

}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-48">48</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-50">50</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-52">52</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-54">54</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-56">56</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-58">58</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-60">60</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-62">62</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-64">64</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-66">66</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-68">68</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-70">70</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-72">72</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-74">74</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-76">76</div><div class="crayon-num" data-line="crayon-592b610e84cc7802389826-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cc7802389826-78">78</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cc7802389826-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ApiImpl</span><span class="crayon-h"> </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-e">Api</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">APP_KEY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"ANDROID_KCOUPON"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"CONNECT_TIME_OUT"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT_MSG</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"连接服务器失败"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// http引擎</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine </span><span class="crayon-v">httpEngine</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">ApiImpl</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">httpEngine</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">HttpEngine</span><span class="crayon-sy">.</span><span class="crayon-e">getInstance</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-13"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">sendSmsCode4Register</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramMap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">HashMapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"appKey"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">APP_KEY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"method"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">SEND_SMS_CODE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"phoneNum"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-18">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cc7802389826-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Type </span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">TypeTokenApiResponseVoid</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">getType</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">httpEngine</span><span class="crayon-sy">.</span><span class="crayon-e">postHandle</span><span class="crayon-sy">(</span><span class="crayon-v">paramMap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponse</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT_EVENT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT_MSG</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-26">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cc7802389826-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-28"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">registerByPhone</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramMap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">HashMapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"appKey"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">APP_KEY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"method"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">REGISTER</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"phoneNum"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"code"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"password"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">EncryptUtil</span><span class="crayon-sy">.</span><span class="crayon-e">makeMD5</span><span class="crayon-sy">(</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Type </span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">TypeTokenApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">getType</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">httpEngine</span><span class="crayon-sy">.</span><span class="crayon-e">postHandle</span><span class="crayon-sy">(</span><span class="crayon-v">paramMap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponse</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT_EVENT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT_MSG</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-43">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-45"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">loginByApp</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">imei</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">loginOS</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramMap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">HashMapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"appKey"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">APP_KEY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"method"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">LOGIN</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"loginName"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"password"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">EncryptUtil</span><span class="crayon-sy">.</span><span class="crayon-e">makeMD5</span><span class="crayon-sy">(</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"imei"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">imei</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"loginOS"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">loginOS</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-53">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Type </span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">TypeTokenApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">getType</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">httpEngine</span><span class="crayon-sy">.</span><span class="crayon-e">postHandle</span><span class="crayon-sy">(</span><span class="crayon-v">paramMap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponse</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT_EVENT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT_MSG</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-61">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-63"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">listNewCoupon</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">pageSize</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramMap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">HashMapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"appKey"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">APP_KEY</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"method"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">LIST_COUPON</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"currentPage"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">currentPage</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramMap</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">"pageSize"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">pageSize</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Type </span><span class="crayon-v">type</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">TypeTokenApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">getType</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">httpEngine</span><span class="crayon-sy">.</span><span class="crayon-e">postHandle</span><span class="crayon-sy">(</span><span class="crayon-v">paramMap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ApiResponse</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT_EVENT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT_EVENT_MSG</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cc7802389826-77">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cc7802389826-78"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0393 seconds] -->
<p>而http引擎类的实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ccc492130607" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class HttpEngine {
    private final static String SERVER_URL = "http://uat.b.quancome.com/platform/api";
    private final static String REQUEST_MOTHOD = "POST";
    private final static String ENCODE_TYPE = "UTF-8";
    private final static int TIME_OUT = 15000;

    private static HttpEngine instance = null;

    private HttpEngine() {
    }

    public static HttpEngine getInstance() {
        if (instance == null) {
            instance = new HttpEngine();
        }
        return instance;
    }

    public T&gt; T postHandle(MapString, String&gt; paramsMap, Type typeOfT) throws IOException {
        String data = joinParams(paramsMap);
        HttpUrlConnection connection = getConnection();
        connection.setRequestProperty("Content-Length", String.valueOf(data.getBytes().length));
        connection.connect();
        OutputStream os = connection.getOutputStream();
        os.write(data.getBytes());
        os.flush();
        if (connection.getResponseCode() == 200) {
            // 获取响应的输入流对象
            InputStream is = connection.getInputStream();
            // 创建字节输出流对象
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            // 定义读取的长度
            int len = 0;
            // 定义缓冲区
            byte buffer[] = new byte[1024];
            // 按照缓冲区的大小，循环读取
            while ((len = is.read(buffer)) != -1) {
                // 根据读取的长度写入到os对象中
                baos.write(buffer, 0, len);
            }
            // 释放资源
            is.close();
            baos.close();
            connection.disconnect();
            // 返回字符串
            final String result = new String(baos.toByteArray());
            Gson gson = new Gson();
            return gson.fromJson(result, typeOfT);
        } else {
            connection.disconnect();
            return null;
        }
    }

    private HttpURLConnection getConnection() {
        HttpURLConnection connection = null;
        // 初始化connection
        try {
            // 根据地址创建URL对象
            URL url = new URL(SERVER_URL);
            // 根据URL对象打开链接
            connection = (HttpURLConnection) url.openConnection();
            // 设置请求的方式
            connection.setRequestMethod(REQUEST_MOTHOD);
            // 发送POST请求必须设置允许输入，默认为true
            connection.setDoInput(true);
            // 发送POST请求必须设置允许输出
            connection.setDoOutput(true);
            // 设置不使用缓存
            connection.setUseCaches(false);
            // 设置请求的超时时间
            connection.setReadTimeout(TIME_OUT);
            connection.setConnectTimeout(TIME_OUT);
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            connection.setRequestProperty("Connection", "keep-alive");
            connection.setRequestProperty("Response-Type", "json");
            connection.setChunkedStreamingMode(0);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return connection;
    }

    private String joinParams(MapString, String&gt; paramsMap) {
        StringBuilder stringBuilder = new StringBuilder();
        for (String key : paramsMap.keySet()) {
            stringBuilder.append(key);
            stringBuilder.append("=");
            try {
                stringBuilder.append(URLEncoder.encode(paramsMap.get(key), ENCODE_TYPE));
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
            stringBuilder.append("&amp;");
        }
        return stringBuilder.substring(0, stringBuilder.length() - 1);
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-6">6</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-8">8</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-10">10</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-12">12</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-14">14</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-16">16</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-18">18</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-20">20</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-22">22</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-24">24</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-26">26</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-28">28</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-30">30</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-32">32</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-34">34</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-36">36</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-38">38</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-40">40</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-42">42</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-44">44</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-46">46</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-48">48</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-50">50</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-52">52</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-54">54</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-56">56</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-58">58</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-60">60</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-62">62</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-64">64</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-66">66</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-68">68</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-70">70</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-72">72</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-74">74</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-76">76</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-78">78</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-80">80</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-82">82</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-84">84</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-86">86</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-88">88</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-90">90</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-92">92</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-94">94</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-96">96</div><div class="crayon-num" data-line="crayon-592b610e84ccc492130607-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ccc492130607-98">98</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ccc492130607-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">SERVER_URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"http://uat.b.quancome.com/platform/api"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">REQUEST_MOTHOD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"POST"</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">ENCODE_TYPE</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"UTF-8"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">TIME_OUT</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">15000</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-6">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ccc492130607-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine </span><span class="crayon-v">instance</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-8">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ccc492130607-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine </span><span class="crayon-e">getInstance</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">instance</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">instance</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">HttpEngine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-18">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ccc492130607-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-e">postHandle</span><span class="crayon-sy">(</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramsMap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Type </span><span class="crayon-v">typeOfT</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">throws</span><span class="crayon-h"> </span><span class="crayon-e">IOException</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">joinParams</span><span class="crayon-sy">(</span><span class="crayon-v">paramsMap</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">HttpUrlConnection </span><span class="crayon-v">connection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getConnection</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setRequestProperty</span><span class="crayon-sy">(</span><span class="crayon-s">"Content-Length"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e">getBytes</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">OutputStream </span><span class="crayon-v">os</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">getOutputStream</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e">getBytes</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-e">flush</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">getResponseCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 获取响应的输入流对象</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">InputStream </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">getInputStream</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 创建字节输出流对象</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">ByteArrayOutputStream </span><span class="crayon-v">baos</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ByteArrayOutputStream</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 定义读取的长度</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">len</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 定义缓冲区</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">byte</span><span class="crayon-h"> </span><span class="crayon-v">buffer</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">byte</span><span class="crayon-sy">[</span><span class="crayon-cn">1024</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 按照缓冲区的大小，循环读取</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">len</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">buffer</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 根据读取的长度写入到os对象中</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">baos</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">buffer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">len</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 释放资源</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">is</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">baos</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">disconnect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 返回字符串</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">(</span><span class="crayon-v">baos</span><span class="crayon-sy">.</span><span class="crayon-e">toByteArray</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Gson </span><span class="crayon-v">gson</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Gson</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">gson</span><span class="crayon-sy">.</span><span class="crayon-e">fromJson</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">typeOfT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">disconnect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-54">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ccc492130607-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">HttpURLConnection </span><span class="crayon-e">getConnection</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">HttpURLConnection </span><span class="crayon-v">connection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 初始化connection</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 根据地址创建URL对象</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">URL </span><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">URL</span><span class="crayon-sy">(</span><span class="crayon-v">SERVER_URL</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 根据URL对象打开链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">HttpURLConnection</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">url</span><span class="crayon-sy">.</span><span class="crayon-e">openConnection</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 设置请求的方式</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setRequestMethod</span><span class="crayon-sy">(</span><span class="crayon-v">REQUEST_MOTHOD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 发送POST请求必须设置允许输入，默认为true</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setDoInput</span><span class="crayon-sy">(</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 发送POST请求必须设置允许输出</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setDoOutput</span><span class="crayon-sy">(</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 设置不使用缓存</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setUseCaches</span><span class="crayon-sy">(</span><span class="crayon-t">false</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 设置请求的超时时间</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setReadTimeout</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setConnectTimeout</span><span class="crayon-sy">(</span><span class="crayon-v">TIME_OUT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setRequestProperty</span><span class="crayon-sy">(</span><span class="crayon-s">"Content-Type"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"application/x-www-form-urlencoded"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setRequestProperty</span><span class="crayon-sy">(</span><span class="crayon-s">"Connection"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"keep-alive"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setRequestProperty</span><span class="crayon-sy">(</span><span class="crayon-s">"Response-Type"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"json"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">connection</span><span class="crayon-sy">.</span><span class="crayon-e">setChunkedStreamingMode</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">printStackTrace</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">connection</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-83">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-e">joinParams</span><span class="crayon-sy">(</span><span class="crayon-v">MapString</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">paramsMap</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">StringBuilder </span><span class="crayon-v">stringBuilder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">StringBuilder</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">paramsMap</span><span class="crayon-sy">.</span><span class="crayon-e">keySet</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">key</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-s">"="</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">URLEncoder</span><span class="crayon-sy">.</span><span class="crayon-e">encode</span><span class="crayon-sy">(</span><span class="crayon-v">paramsMap</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">key</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENCODE_TYPE</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">UnsupportedEncodingException</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">printStackTrace</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-s">"&amp;"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">substring</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">stringBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ccc492130607-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ccc492130607-98"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0436 seconds] -->
<p>至此，接口层的封装就完成了。接下来再往上看看核心层吧。</p>
<h2 id="toc_3">核心层的逻辑</h2>
<p>核心层处于接口层和界面层之间，向下调用Api，向上提供Action，它的核心任务就是处理复杂的业务逻辑。先看看我对Action的定义：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cd2138248249" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public interface AppAction {
    // 发送手机验证码
    public void sendSmsCode(String phoneNum, ActionCallbackListenerVoid&gt; listener);
    // 注册
    public void register(String phoneNum, String code, String password, ActionCallbackListenerVoid&gt; listener);
    // 登录
    public void login(String loginName, String password, ActionCallbackListenerVoid&gt; listener);
    // 按分页获取券列表
    public void listCoupon(int currentPage, ActionCallbackListenerListCouponBO&gt;&gt; listener);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cd2138248249-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd2138248249-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cd2138248249-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd2138248249-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cd2138248249-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd2138248249-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cd2138248249-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd2138248249-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cd2138248249-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd2138248249-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cd2138248249-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">AppAction</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd2138248249-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 发送手机验证码</span></div><div class="crayon-line" id="crayon-592b610e84cd2138248249-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">sendSmsCode</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd2138248249-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 注册</span></div><div class="crayon-line" id="crayon-592b610e84cd2138248249-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">register</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd2138248249-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 登录</span></div><div class="crayon-line" id="crayon-592b610e84cd2138248249-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">login</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd2138248249-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 按分页获取券列表</span></div><div class="crayon-line" id="crayon-592b610e84cd2138248249-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">listCoupon</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd2138248249-10"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0025 seconds] -->
<p>首先，和Api接口对比就会发现，参数并不一致。登录并没有iemi和loginOS的参数，获取券列表的参数里也少了pageSize。这是因为，这几个参数，跟界面其实并没有直接关系。Action只要定义好跟界面相关的就可以了，其他需要的参数，在具体实现时再去获取。<br>
另外，大部分action的处理都是异步的，因此，添加了回调监听器ActionCallbackListener，回调监听器的泛型则是返回的对象数据类型，例如获取券列表，返回的数据类型就是List，没有对象数据时则为Void。回调监听器只定义了成功和失败的方法，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cd6614977428" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public interface ActionCallbackListenerT&gt; {
    /**
     * 成功时调用
     *
     * @param data 返回的数据
     */
    public void onSuccess(T data);

    /**
     * 失败时调用
     *
     * @param errorEvemt 错误码
     * @param message    错误信息
     */
    public void onFailure(String errorEvent, String message);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cd6614977428-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd6614977428-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cd6614977428-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">ActionCallbackListenerT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 成功时调用</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-5"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param data 返回的数据</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-6"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-8">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd6614977428-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-10"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 失败时调用</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-11"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-12"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param errorEvemt 错误码</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param message&nbsp;&nbsp;&nbsp;&nbsp;错误信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cd6614977428-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">errorEvent</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd6614977428-16"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>接下来再看看Action的实现。首先，要获取imei，那就需要传入一个Context；另外，还需要loginOS和pageSize，这定义为常量就可以了；还有，要调用接口层，所以还需要Api实例。而接口的实现分为两步，第一步做参数检查，第二步用异步任务调用Api。具体实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cd9804815516" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class AppActionImpl implements AppAction {
    private final static int LOGIN_OS = 1; // 表示Android
    private final static int PAGE_SIZE = 20; // 默认每页20条

    private Context context;
    private Api api;

    public AppActionImpl(Context context) {
        this.context = context;
        this.api = new ApiImpl();
    }

    @Override
    public void sendSmsCode(final String phoneNum, final ActionCallbackListenerVoid&gt; listener) {
        // 参数为空检查
        if (TextUtils.isEmpty(phoneNum)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "手机号为空");
            }
            return;
        }
        // 参数合法性检查
        Pattern pattern = Pattern.compile("1\d{10}");
        Matcher matcher = pattern.matcher(phoneNum);
        if (!matcher.matches()) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_ILLEGAL, "手机号不正确");
            }
            return;
        }

        // 请求Api
        new AsyncTaskVoid, Void, ApiResponseVoid&gt;&gt;() {
            @Override
            protected ApiResponseVoid&gt; doInBackground(Void... voids) {
                return api.sendSmsCode4Register(phoneNum);
            }

            @Override
            protected void onPostExecute(ApiResponseVoid&gt; response) {
                if (listener != null &amp; response != null) {
                    if (response.isSuccess()) {
                        listener.onSuccess(null);
                    } else {
                        listener.onFailure(response.getEvent(), response.getMsg());
                    }
                }
            }
        }.execute();
    }

    @Override
    public void register(final String phoneNum, final String code, final String password, final ActionCallbackListenerVoid&gt; listener) {
        // 参数为空检查
        if (TextUtils.isEmpty(phoneNum)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "手机号为空");
            }
            return;
        }
        if (TextUtils.isEmpty(code)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "验证码为空");
            }
            return;
        }
        if (TextUtils.isEmpty(password)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "密码为空");
            }
            return;
        }

        // 参数合法性检查
        Pattern pattern = Pattern.compile("1\d{10}");
        Matcher matcher = pattern.matcher(phoneNum);
        if (!matcher.matches()) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_ILLEGAL, "手机号不正确");
            }
            return;
        }

        // TODO 长度检查，密码有效性检查等

        // 请求Api
        new AsyncTaskVoid, Void, ApiResponseVoid&gt;&gt;() {
            @Override
            protected ApiResponseVoid&gt; doInBackground(Void... voids) {
                return api.registerByPhone(phoneNum, code, password);
            }

            @Override
            protected void onPostExecute(ApiResponseVoid&gt; response) {
                if (listener != null &amp; response != null) {
                    if (response.isSuccess()) {
                        listener.onSuccess(null);
                    } else {
                        listener.onFailure(response.getEvent(), response.getMsg());
                    }
                }
            }
        }.execute();
    }

    @Override
    public void login(final String loginName, final String password, final ActionCallbackListenerVoid&gt; listener) {
        // 参数为空检查
        if (TextUtils.isEmpty(loginName)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "登录名为空");
            }
            return;
        }
        if (TextUtils.isEmpty(password)) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_NULL, "密码为空");
            }
            return;
        }

        // TODO 长度检查，密码有效性检查等        

        // 请求Api
        new AsyncTaskVoid, Void, ApiResponseVoid&gt;&gt;() {
            @Override
            protected ApiResponseVoid&gt; doInBackground(Void... voids) {
                TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
                String imei = telephonyManager.getDeviceId();
                return api.loginByApp(loginName, password, imei, LOGIN_OS);
            }

            @Override
            protected void onPostExecute(ApiResponseVoid&gt; response) {
                if (listener != null &amp; response != null) {
                    if (response.isSuccess()) {
                        listener.onSuccess(null);
                    } else {
                        listener.onFailure(response.getEvent(), response.getMsg());
                    }
                }
            }
        }.execute();
    }

    @Override
    public void listCoupon(final int currentPage, final ActionCallbackListenerListCouponBO&gt;&gt; listener) {
        // 参数检查
        if (currentPage  0) {
            if (listener != null) {
                listener.onFailure(ErrorEvent.PARAM_ILLEGAL, "当前页数小于零");
            }
        }

        // TODO 添加缓存

        // 请求Api
        new AsyncTaskVoid, Void, ApiResponseListCouponBO&gt;&gt;&gt;() {
            @Override
            protected ApiResponseListCouponBO&gt;&gt; doInBackground(Void... voids) {
                return api.listNewCoupon(currentPage, PAGE_SIZE);
            }

            @Override
            protected void onPostExecute(ApiResponseListCouponBO&gt;&gt; response) {
                if (listener != null &amp; response != null) {
                    if (response.isSuccess()) {
                        listener.onSuccess(response.getObjList());
                    } else {
                        listener.onFailure(response.getEvent(), response.getMsg());
                    }
                }
            }
        }.execute();
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-48">48</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-50">50</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-52">52</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-54">54</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-56">56</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-58">58</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-60">60</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-62">62</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-64">64</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-66">66</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-68">68</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-70">70</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-72">72</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-74">74</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-76">76</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-78">78</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-80">80</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-82">82</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-84">84</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-86">86</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-88">88</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-90">90</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-92">92</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-94">94</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-96">96</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-98">98</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-100">100</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-102">102</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-104">104</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-106">106</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-108">108</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-110">110</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-112">112</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-114">114</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-116">116</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-118">118</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-120">120</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-122">122</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-124">124</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-126">126</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-128">128</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-130">130</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-132">132</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-134">134</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-136">136</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-138">138</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-140">140</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-142">142</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-144">144</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-146">146</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-148">148</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-150">150</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-152">152</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-154">154</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-156">156</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-158">158</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-160">160</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-162">162</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-164">164</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-166">166</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-168">168</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-170">170</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-172">172</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-174">174</div><div class="crayon-num" data-line="crayon-592b610e84cd9804815516-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cd9804815516-176">176</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cd9804815516-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">AppActionImpl</span><span class="crayon-h"> </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-e">AppAction</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">LOGIN_OS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 表示Android</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">PAGE_SIZE</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// 默认每页20条</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-4">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">Api </span><span class="crayon-v">api</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">AppActionImpl</span><span class="crayon-sy">(</span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">context</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">api</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ApiImpl</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-12">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-14"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">sendSmsCode</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数为空检查</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"手机号为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数合法性检查</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Pattern </span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Pattern</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">"1\d{10}"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Matcher </span><span class="crayon-v">matcher</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">matcher</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">matcher</span><span class="crayon-sy">.</span><span class="crayon-e">matches</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_ILLEGAL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"手机号不正确"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 请求Api</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">AsyncTaskVoid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Void</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-35"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">doInBackground</span><span class="crayon-sy">(</span><span class="crayon-t">Void</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">voids</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">api</span><span class="crayon-sy">.</span><span class="crayon-e">sendSmsCode4Register</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-38">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-40"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onPostExecute</span><span class="crayon-sy">(</span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">isSuccess</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getEvent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getMsg</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-51">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-53"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">register</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数为空检查</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"手机号为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">code</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"验证码为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"密码为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-73">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数合法性检查</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Pattern </span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Pattern</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">"1\d{10}"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Matcher </span><span class="crayon-v">matcher</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">matcher</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">matcher</span><span class="crayon-sy">.</span><span class="crayon-e">matches</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_ILLEGAL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"手机号不正确"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-83">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 长度检查，密码有效性检查等</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-85">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 请求Api</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">AsyncTaskVoid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Void</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-89"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">doInBackground</span><span class="crayon-sy">(</span><span class="crayon-t">Void</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">voids</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">api</span><span class="crayon-sy">.</span><span class="crayon-e">registerByPhone</span><span class="crayon-sy">(</span><span class="crayon-v">phoneNum</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">code</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-92">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-94"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onPostExecute</span><span class="crayon-sy">(</span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">isSuccess</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getEvent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getMsg</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-105">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-107"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">login</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数为空检查</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">loginName</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"登录名为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextUtils</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_NULL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"密码为空"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-121">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 长度检查，密码有效性检查等&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-123">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 请求Api</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">AsyncTaskVoid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Void</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-127"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">doInBackground</span><span class="crayon-sy">(</span><span class="crayon-t">Void</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">voids</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TelephonyManager </span><span class="crayon-v">telephonyManager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TelephonyManager</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-e">getSystemService</span><span class="crayon-sy">(</span><span class="crayon-v">Context</span><span class="crayon-sy">.</span><span class="crayon-v">TELEPHONY_SERVICE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">imei</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">telephonyManager</span><span class="crayon-sy">.</span><span class="crayon-e">getDeviceId</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">api</span><span class="crayon-sy">.</span><span class="crayon-e">loginByApp</span><span class="crayon-sy">(</span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">imei</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">LOGIN_OS</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-132">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-134"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onPostExecute</span><span class="crayon-sy">(</span><span class="crayon-v">ApiResponseVoid</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">isSuccess</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getEvent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getMsg</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-145">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-147"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">listCoupon</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 参数检查</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">currentPage</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">ErrorEvent</span><span class="crayon-sy">.</span><span class="crayon-v">PARAM_ILLEGAL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"当前页数小于零"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-154">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 添加缓存</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-156">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cd9804815516-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 请求Api</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">AsyncTaskVoid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">Void</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-160"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-v">ApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">doInBackground</span><span class="crayon-sy">(</span><span class="crayon-t">Void</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">voids</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">api</span><span class="crayon-sy">.</span><span class="crayon-e">listNewCoupon</span><span class="crayon-sy">(</span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PAGE_SIZE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-163">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-165"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onPostExecute</span><span class="crayon-sy">(</span><span class="crayon-v">ApiResponseListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">isSuccess</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getObjList</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getEvent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getMsg</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-174"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cd9804815516-175"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cd9804815516-176"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0354 seconds] -->
<p>简单的实现代码就是这样，其实，这还有很多地方可以优化，比如，将参数为空的检查、手机号有效性的检查、数字型范围的检查等等，都可以抽成独立的方法，从而减少重复代码的编写。异步任务里的代码也一样，都是可以通过重构优化的。另外，需要扩展时，比如添加缓存，那就在调用Api之前处理。<br>
核心层的逻辑就是这样了。最后就到界面层了。</p>
<h2 id="toc_4">界面层</h2>
<p>在这个Demo里，只有三个页面：登录页、注册页、券列表页。在这里，也会遵循<a href="http://keeganlee.me/post/android/20150619">界面篇</a>提到的三个基本原则：规范性、单一性、简洁性。<br>
首先，界面层需要调用核心层的Action，而这会在整个应用级别都用到，因此，Action的实例最好放在Application里。代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ce1533389117" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class KApplication extends Application {

    private AppAction appAction;

    @Override
    public void onCreate() {
        super.onCreate();
        appAction = new AppActionImpl(this);
    }

    public AppAction getAppAction() {
        return appAction;
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-6">6</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-8">8</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-10">10</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-12">12</div><div class="crayon-num" data-line="crayon-592b610e84ce1533389117-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce1533389117-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ce1533389117-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">KApplication</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">Application</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-2">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce1533389117-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">AppAction </span><span class="crayon-v">appAction</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-4">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce1533389117-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-6"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce1533389117-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">appAction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">AppActionImpl</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce1533389117-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-10">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce1533389117-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">AppAction </span><span class="crayon-e">getAppAction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">appAction</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce1533389117-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce1533389117-14"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0017 seconds] -->
<p>另外，一个Activity的基类也是很有必要的，可以减少很多重复的工作。基类的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ce4116664025" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public abstract class KBaseActivity extends FragmentActivity {
    // 上下文实例
    public Context context;
    // 应用全局的实例
    public KApplication application;
    // 核心层的Action实例
    public AppAction appAction;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = getApplicationContext();
        application = (KApplication) this.getApplication();
        appAction = application.getAppAction();
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-6">6</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-8">8</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-10">10</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-12">12</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-14">14</div><div class="crayon-num" data-line="crayon-592b610e84ce4116664025-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce4116664025-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ce4116664025-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">abstract</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">KBaseActivity</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">FragmentActivity</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 上下文实例</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 应用全局的实例</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">KApplication </span><span class="crayon-v">application</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 核心层的Action实例</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">AppAction </span><span class="crayon-v">appAction</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-8">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce4116664025-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-10"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">context</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getApplicationContext</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">application</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">KApplication</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">getApplication</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">appAction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">application</span><span class="crayon-sy">.</span><span class="crayon-e">getAppAction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce4116664025-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce4116664025-16"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>再看看登录的Activity：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84ce8037083863" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class LoginActivity extends KBaseActivity {

    private EditText phoneEdit;
    private EditText passwordEdit;
    private Button loginBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        // 初始化View
        initViews();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_login, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();

        // 如果是注册按钮
        if (id == R.id.action_register) {
            Intent intent = new Intent(this, RegisterActivity.class);
            startActivity(intent);
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    // 初始化View
    private void initViews() {
        phoneEdit = (EditText) findViewById(R.id.edit_phone);
        passwordEdit = (EditText) findViewById(R.id.edit_password);
        loginBtn = (Button) findViewById(R.id.btn_login);
    }

    // 准备登录
    public void toLogin(View view) {
        String loginName = phoneEdit.getText().toString();
        String password = passwordEdit.getText().toString();
        loginBtn.setEnabled(false);
        this.appAction.login(loginName, password, new ActionCallbackListenerVoid&gt;() {
            @Override
            public void onSuccess(Void data) {
                Toast.makeText(context, R.string.toast_login_success, Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(context, CouponListActivity.class);
                startActivity(intent);
                finish();
            }

            @Override
            public void onFailure(String errorEvent, String message) {
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
                loginBtn.setEnabled(true);
            }
        });
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-2">2</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-4">4</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-6">6</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-8">8</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-10">10</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-12">12</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-14">14</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-16">16</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-18">18</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-20">20</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-22">22</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-24">24</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-26">26</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-28">28</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-30">30</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-32">32</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-34">34</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-36">36</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-38">38</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-40">40</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-42">42</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-44">44</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-46">46</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-48">48</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-50">50</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-52">52</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-54">54</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-56">56</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-58">58</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-60">60</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84ce8037083863-62">62</div><div class="crayon-num" data-line="crayon-592b610e84ce8037083863-63">63</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84ce8037083863-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">LoginActivity</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">KBaseActivity</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-2">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">EditText </span><span class="crayon-v">phoneEdit</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">EditText </span><span class="crayon-v">passwordEdit</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">Button </span><span class="crayon-v">loginBtn</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-6">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-8"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">setContentView</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">activity_login</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 初始化View</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">initViews</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-14">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-16"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">onCreateOptionsMenu</span><span class="crayon-sy">(</span><span class="crayon-e">Menu </span><span class="crayon-v">menu</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getMenuInflater</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">menu</span><span class="crayon-sy">.</span><span class="crayon-v">menu_login</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">menu</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-20">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-22"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">onOptionsItemSelected</span><span class="crayon-sy">(</span><span class="crayon-e">MenuItem </span><span class="crayon-v">item</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">item</span><span class="crayon-sy">.</span><span class="crayon-e">getItemId</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-24">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 如果是注册按钮</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">id</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">action_register</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Intent</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">RegisterActivity</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startActivity</span><span class="crayon-sy">(</span><span class="crayon-v">intent</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onOptionsItemSelected</span><span class="crayon-sy">(</span><span class="crayon-v">item</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-34">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84ce8037083863-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 初始化View</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">initViews</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">phoneEdit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">EditText</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">edit_phone</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">passwordEdit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">EditText</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">edit_password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">loginBtn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Button</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">btn_login</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-41">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 准备登录</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">toLogin</span><span class="crayon-sy">(</span><span class="crayon-e">View </span><span class="crayon-v">view</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">loginName</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">phoneEdit</span><span class="crayon-sy">.</span><span class="crayon-e">getText</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">toString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">passwordEdit</span><span class="crayon-sy">.</span><span class="crayon-e">getText</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">toString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">loginBtn</span><span class="crayon-sy">.</span><span class="crayon-e">setEnabled</span><span class="crayon-sy">(</span><span class="crayon-t">false</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">appAction</span><span class="crayon-sy">.</span><span class="crayon-e">login</span><span class="crayon-sy">(</span><span class="crayon-v">loginName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerVoid</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-49"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-t">Void</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-e">makeText</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-t">string</span><span class="crayon-sy">.</span><span class="crayon-v">toast_login_success</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-v">LENGTH_SHORT</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Intent</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">CouponListActivity</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startActivity</span><span class="crayon-sy">(</span><span class="crayon-v">intent</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">finish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-57"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">errorEvent</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-e">makeText</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-v">LENGTH_SHORT</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">loginBtn</span><span class="crayon-sy">.</span><span class="crayon-e">setEnabled</span><span class="crayon-sy">(</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84ce8037083863-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84ce8037083863-63"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0094 seconds] -->
<p>登录页的布局文件则如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cec761688940" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context="com.keegan.kandroid.activity.LoginActivity"&gt;

    EditText
        android:id="@+id/edit_phone"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="@dimen/edit_vertical_margin"
        android:layout_marginBottom="@dimen/edit_vertical_margin"
        android:hint="@string/hint_phone"
        android:inputType="phone"
        android:singleLine="true" /&gt;

    EditText
        android:id="@+id/edit_password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="@dimen/edit_vertical_margin"
        android:layout_marginBottom="@dimen/edit_vertical_margin"
        android:hint="@string/hint_password"
        android:inputType="textPassword"
        android:singleLine="true" /&gt;

    Button
        android:id="@+id/btn_login"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="@dimen/btn_vertical_margin"
        android:layout_marginBottom="@dimen/btn_vertical_margin"
        android:onClick="toLogin"
        android:text="@string/btn_login" /&gt;

LinearLayout&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cec761688940-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cec761688940-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cec761688940-41">41</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cec761688940-1"><span class="crayon-e">LinearLayout </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">tools</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/tools"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">orientation</span><span class="crayon-o">=</span><span class="crayon-s">"vertical"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">paddingBottom</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/activity_vertical_margin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">paddingLeft</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/activity_horizontal_margin"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">paddingRight</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/activity_horizontal_margin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">paddingTop</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/activity_vertical_margin"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tools</span><span class="crayon-o">:</span><span class="crayon-v">context</span><span class="crayon-o">=</span><span class="crayon-s">"com.keegan.kandroid.activity.LoginActivity"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">EditText</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-13"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"@+id/edit_phone"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginTop</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/edit_vertical_margin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginBottom</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/edit_vertical_margin"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">hint</span><span class="crayon-o">=</span><span class="crayon-s">"@string/hint_phone"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">inputType</span><span class="crayon-o">=</span><span class="crayon-s">"phone"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">singleLine</span><span class="crayon-o">=</span><span class="crayon-s">"true"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">EditText</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-23"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"@+id/edit_password"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginTop</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/edit_vertical_margin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginBottom</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/edit_vertical_margin"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">hint</span><span class="crayon-o">=</span><span class="crayon-s">"@string/hint_password"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">inputType</span><span class="crayon-o">=</span><span class="crayon-s">"textPassword"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">singleLine</span><span class="crayon-o">=</span><span class="crayon-s">"true"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Button</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-33"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"@+id/btn_login"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginTop</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/btn_vertical_margin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginBottom</span><span class="crayon-o">=</span><span class="crayon-s">"@dimen/btn_vertical_margin"</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">onClick</span><span class="crayon-o">=</span><span class="crayon-s">"toLogin"</span></div><div class="crayon-line" id="crayon-592b610e84cec761688940-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"@string/btn_login"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cec761688940-40">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cec761688940-41"><span class="crayon-v">LinearLayout</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0151 seconds] -->
<p>可以看到，EditText的id命名统一以edit开头，而在Activity里的控件变量名则以Edit结尾。按钮的onClick也统一用toXXX的方式命名，明确表明这是一个将要做的动作。还有，string，dimen也都统一在相应的资源文件里按照相应的规范去定义。<br>
注册页和登陆页差不多，这里就不展示代码了。主要再看看券列表页，因为用到了ListView，ListView需要添加适配器。实际上，适配器很多代码都是可以复用的，因此，我抽象了一个适配器的基类，代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cf1727153173" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public abstract class KBaseAdapterT&gt; extends BaseAdapter {

    protected Context context;
    protected LayoutInflater inflater;
    protected ListT&gt; itemList = new ArrayListT&gt;();

    public KBaseAdapter(Context context) {
        this.context = context;
        inflater = LayoutInflater.from(context);
    }

    /**
     * 判断数据是否为空
     *
     * @return 为空返回true，不为空返回false
     */
    public boolean isEmpty() {
        return itemList.isEmpty();
    }

    /**
     * 在原有的数据上添加新数据
     *
     * @param itemList
     */
    public void addItems(ListT&gt; itemList) {
        this.itemList.addAll(itemList);
        notifyDataSetChanged();
    }

    /**
     * 设置为新的数据，旧数据会被清空
     *
     * @param itemList
     */
    public void setItems(ListT&gt; itemList) {
        this.itemList.clear();
        this.itemList = itemList;
        notifyDataSetChanged();
    }

    /**
     * 清空数据
     */
    public void clearItems() {
        itemList.clear();
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return itemList.size();
    }

    @Override
    public Object getItem(int i) {
        return itemList.get(i);
    }

    @Override
    public long getItemId(int i) {
        return i;
    }

    @Override
    abstract public View getView(int i, View view, ViewGroup viewGroup);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-48">48</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-50">50</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-52">52</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-54">54</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-56">56</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-58">58</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-60">60</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-62">62</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-64">64</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf1727153173-66">66</div><div class="crayon-num" data-line="crayon-592b610e84cf1727153173-67">67</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cf1727153173-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">abstract</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">KBaseAdapterT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">BaseAdapter</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-2">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-v">ListT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">ArrayListT</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-6">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">KBaseAdapter</span><span class="crayon-sy">(</span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">context</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inflater</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">LayoutInflater</span><span class="crayon-sy">.</span><span class="crayon-e">from</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 判断数据是否为空</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return 为空返回true，不为空返回false</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-20">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-22"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 在原有的数据上添加新数据</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-23"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-24"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param itemList</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-25"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">addItems</span><span class="crayon-sy">(</span><span class="crayon-v">ListT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">addAll</span><span class="crayon-sy">(</span><span class="crayon-v">itemList</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">notifyDataSetChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-30">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-32"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 设置为新的数据，旧数据会被清空</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param itemList</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">setItems</span><span class="crayon-sy">(</span><span class="crayon-v">ListT</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">clear</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">itemList</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">notifyDataSetChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-41">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-43"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * 清空数据</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-44"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">clearItems</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">clear</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">notifyDataSetChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-49">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-51"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">getCount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-54">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-56"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">Object</span><span class="crayon-h"> </span><span class="crayon-e">getItem</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-61"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-e">getItemId</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-64">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf1727153173-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf1727153173-66"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">abstract</span><span class="crayon-h"> </span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-e">getView</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">view</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ViewGroup </span><span class="crayon-v">viewGroup</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf1727153173-67"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0161 seconds] -->
<p>这个抽象基类集成了设置数据的方法，每个具体的适配器类只要再实现各自的getView方法就可以了。本Demo的券列表的适配器如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cf5118293039" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class CouponListAdapter extends KBaseAdapterCouponBO&gt; {

    public CouponListAdapter(Context context) {
        super(context);
    }

    @Override
    public View getView(int i, View view, ViewGroup viewGroup) {
        ViewHolder holder;
        if (view == null) {
            view = inflater.inflate(R.layout.item_list_coupon, viewGroup, false);
            holder = new ViewHolder();
            holder.titleText = (TextView) view.findViewById(R.id.text_item_title);
            holder.infoText = (TextView) view.findViewById(R.id.text_item_info);
            holder.priceText = (TextView) view.findViewById(R.id.text_item_price);
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        CouponBO coupon = itemList.get(i);
        holder.titleText.setText(coupon.getName());
        holder.infoText.setText(coupon.getIntroduce());
        SpannableString priceString;
        // 根据不同的券类型展示不同的价格显示方式
        switch (coupon.getModelType()) {
            default:
            case CouponBO.TYPE_CASH:
                priceString = CouponPriceUtil.getCashPrice(context, coupon.getFaceValue(), coupon.getEstimateAmount());
                break;
            case CouponBO.TYPE_DEBIT:
                priceString = CouponPriceUtil.getVoucherPrice(context, coupon.getDebitAmount(), coupon.getMiniAmount());
                break;
            case CouponBO.TYPE_DISCOUNT:
                priceString = CouponPriceUtil.getDiscountPrice(context, coupon.getDiscount(), coupon.getMiniAmount());
                break;
        }
        holder.priceText.setText(priceString);

        return view;
    }

    static class ViewHolder {
        TextView titleText;
        TextView infoText;
        TextView priceText;
    }

}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf5118293039-48">48</div><div class="crayon-num" data-line="crayon-592b610e84cf5118293039-49">49</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cf5118293039-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">CouponListAdapter</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">KBaseAdapterCouponBO</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-2">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf5118293039-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">CouponListAdapter</span><span class="crayon-sy">(</span><span class="crayon-e">Context </span><span class="crayon-v">context</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-6">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf5118293039-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-8"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-e">getView</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">view</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ViewGroup </span><span class="crayon-v">viewGroup</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">ViewHolder </span><span class="crayon-v">holder</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">view</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">view</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inflater</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">item_list_coupon</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">viewGroup</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">ViewHolder</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">titleText</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">text_item_title</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">infoText</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">text_item_info</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">priceText</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">text_item_price</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-e">setTag</span><span class="crayon-sy">(</span><span class="crayon-v">holder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ViewHolder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-e">getTag</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-20">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf5118293039-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">CouponBO </span><span class="crayon-v">coupon</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">itemList</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">titleText</span><span class="crayon-sy">.</span><span class="crayon-e">setText</span><span class="crayon-sy">(</span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getName</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">infoText</span><span class="crayon-sy">.</span><span class="crayon-e">setText</span><span class="crayon-sy">(</span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getIntroduce</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">SpannableString </span><span class="crayon-v">priceString</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 根据不同的券类型展示不同的价格显示方式</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getModelType</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">default</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">CouponBO</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_CASH</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">priceString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CouponPriceUtil</span><span class="crayon-sy">.</span><span class="crayon-e">getCashPrice</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getFaceValue</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getEstimateAmount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">CouponBO</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_DEBIT</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">priceString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CouponPriceUtil</span><span class="crayon-sy">.</span><span class="crayon-e">getVoucherPrice</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getDebitAmount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getMiniAmount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">CouponBO</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_DISCOUNT</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">priceString</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CouponPriceUtil</span><span class="crayon-sy">.</span><span class="crayon-e">getDiscountPrice</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getDiscount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">coupon</span><span class="crayon-sy">.</span><span class="crayon-e">getMiniAmount</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">holder</span><span class="crayon-sy">.</span><span class="crayon-v">priceText</span><span class="crayon-sy">.</span><span class="crayon-e">setText</span><span class="crayon-sy">(</span><span class="crayon-v">priceString</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">view</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-42">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf5118293039-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ViewHolder</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TextView </span><span class="crayon-v">titleText</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TextView </span><span class="crayon-v">infoText</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TextView </span><span class="crayon-v">priceText</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf5118293039-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf5118293039-48">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf5118293039-49"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0092 seconds] -->
<p>而券列表的Activity简单实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->

		<div id="crayon-592b610e84cf9416980937" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">public class CouponListActivity extends KBaseActivity implements SwipeRefreshLayout.OnRefreshListener {
    private SwipeRefreshLayout swipeRefreshLayout;
    private ListView listView;
    private CouponListAdapter listAdapter;
    private int currentPage = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_coupon_list);

        initViews();
        getData();

        // TODO 添加上拉加载更多的功能
    }

    private void initViews() {
        swipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swipe_refresh_layout);
        swipeRefreshLayout.setOnRefreshListener(this);
        listView = (ListView) findViewById(R.id.list_view);
        listAdapter = new CouponListAdapter(this);
        listView.setAdapter(listAdapter);
    }

    private void getData() {
        this.appAction.listCoupon(currentPage, new ActionCallbackListenerListCouponBO&gt;&gt;() {
            @Override
            public void onSuccess(ListCouponBO&gt; data) {
                if (!data.isEmpty()) {
                    if (currentPage == 1) { // 第一页
                        listAdapter.setItems(data);
                    } else { // 分页数据
                        listAdapter.addItems(data);
                    }
                }
                swipeRefreshLayout.setRefreshing(false);
            }

            @Override
            public void onFailure(String errorEvent, String message) {
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
                swipeRefreshLayout.setRefreshing(false);
            }
        });
    }

    @Override
    public void onRefresh() {
        // 需要重置当前页为第一页，并且清掉数据
        currentPage = 1;
        listAdapter.clearItems();
        getData();
    }
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-2">2</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-4">4</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-6">6</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-8">8</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-10">10</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-12">12</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-14">14</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-16">16</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-18">18</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-20">20</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-22">22</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-24">24</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-26">26</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-28">28</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-30">30</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-32">32</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-34">34</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-36">36</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-38">38</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-40">40</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-42">42</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-44">44</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-46">46</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-48">48</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-50">50</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-52">52</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-592b610e84cf9416980937-54">54</div><div class="crayon-num" data-line="crayon-592b610e84cf9416980937-55">55</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-592b610e84cf9416980937-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">CouponListActivity </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">KBaseActivity </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-v">SwipeRefreshLayout</span><span class="crayon-sy">.</span><span class="crayon-i">OnRefreshListener</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">SwipeRefreshLayout </span><span class="crayon-v">swipeRefreshLayout</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">ListView </span><span class="crayon-v">listView</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">CouponListAdapter </span><span class="crayon-v">listAdapter</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">currentPage</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-6">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf9416980937-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-8"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">setContentView</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">activity_coupon_list</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">initViews</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-14">&nbsp;</div><div class="crayon-line" id="crayon-592b610e84cf9416980937-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// TODO 添加上拉加载更多的功能</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">initViews</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">swipeRefreshLayout</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">SwipeRefreshLayout</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">swipe_refresh_layout</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">swipeRefreshLayout</span><span class="crayon-sy">.</span><span class="crayon-e">setOnRefreshListener</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ListView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">list_view</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listAdapter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CouponListAdapter</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listView</span><span class="crayon-sy">.</span><span class="crayon-e">setAdapter</span><span class="crayon-sy">(</span><span class="crayon-v">listAdapter</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">getData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">appAction</span><span class="crayon-sy">.</span><span class="crayon-e">listCoupon</span><span class="crayon-sy">(</span><span class="crayon-v">currentPage</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">ActionCallbackListenerListCouponBO</span><span class="crayon-o">&gt;&gt;</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-29"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onSuccess</span><span class="crayon-sy">(</span><span class="crayon-v">ListCouponBO</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e">isEmpty</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">currentPage</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// 第一页</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listAdapter</span><span class="crayon-sy">.</span><span class="crayon-e">setItems</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// 分页数据</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listAdapter</span><span class="crayon-sy">.</span><span class="crayon-e">addItems</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">swipeRefreshLayout</span><span class="crayon-sy">.</span><span class="crayon-e">setRefreshing</span><span class="crayon-sy">(</span><span class="crayon-t">false</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-41"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFailure</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">errorEvent</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-e">makeText</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-v">LENGTH_SHORT</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">swipeRefreshLayout</span><span class="crayon-sy">.</span><span class="crayon-e">setRefreshing</span><span class="crayon-sy">(</span><span class="crayon-t">false</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-49"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onRefresh</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// 需要重置当前页为第一页，并且清掉数据</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">currentPage</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">listAdapter</span><span class="crayon-sy">.</span><span class="crayon-e">clearItems</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getData</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-592b610e84cf9416980937-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-592b610e84cf9416980937-55"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0076 seconds] -->
<p></p>
<h2 id="toc_5">完结</h2>
<p>终于写完了，代码也终于放上了github，为了让人更容易理解，因此很多都比较简单，没有再进行扩展。<br>
github地址：<a href="https://github.com/keeganlee/kandroid">https://github.com/keeganlee/kandroid</a></p>

        
        
        
    <div class="post-adds">
        <span data-post-id="82083" class=" btn-bluet-bigger href-style vote-post-up   register-user-only "><i class="fa  fa-thumbs-o-up"></i> <h10 id="82083votetotal">1</h10> 赞</span>
        <span data-book-type="1" data-site-id="14" data-item-id="82083" data-item-type="1" class=" btn-bluet-bigger href-style bookmark-btn  register-user-only "><i class="fa fa-bookmark-o  "></i> 8 收藏</span>

                    <a href="http://android.jobbole.com/82083/#article-comment"><span class="btn-bluet-bigger href-style hide-on-480"><i class="fa fa-comments-o"></i> 3 评论</span></a>
        
        
        
        <!-- JiaThis Button BEGIN -->
        <div class="jiathis_style_24x24" style="display: inline-flex; position: relative; margin: 0; clear: both;float: right;">
            <a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
            <a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
            <a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
            <a class="jiathis_button_fb hide-on-480" title="分享到Facebook"><span class="jiathis_txt jtico jtico_fb"></span></a>
            <a href="http://www.jiathis.com/share?uid=1745061" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
        </div>

    </div>




        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	</div>
	<!-- END .entry -->


<script type="text/javascript">
var jiathis_config={
	data_track_clickback:false,
	title:"分享从伯乐在线看到的一篇好文章 ",
	summary:"《Android 项目重构之路：实现篇》",
	pic:"http://jbcdn2.b0.upaiyun.com/2015/03/dbaebd2fb7abfcfc4daeabc521d6ece71.png",
	appkey:{
         "tsina": 1473879058    },
	ralateuid:{
		"tsina": 5038680568	},
	hideMore:false
}
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jia.js.下载" charset="utf-8"></script><script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/plugin.client.js.下载" charset="utf-8"></script>
<!-- JiaThis Button END -->
			<div class="textwidget"><p><a href="http://group.jobbole.com/22945/" target="_blank"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/bfdcef89gy1ffhg3psj2yj20h803cgm9.jpg"></a></p>
</div>
		
</div>
<!-- END .post -->
            <div style="text-align: left;">
            <h3>相关文章</h3>
            <ul style="font-size: 13px; list-style: disc inside;">
                                    <li>
                    <span class="digg-item-updated-title">
                        <a title="Android :“万能” Activity 重构篇" target="_blank" href="http://android.jobbole.com/83294/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts">Android :“万能” Activity 重构篇</a>
                                            </span>
                    </li>
                                    <li>
                    <span class="digg-item-updated-title">
                        <a title="Android 项目重构之路：界面篇" target="_blank" href="http://android.jobbole.com/82080/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts">Android 项目重构之路：界面篇</a>
                                            </span>
                    </li>
                                    <li>
                    <span class="digg-item-updated-title">
                        <a title="Android 项目重构之路：架构篇" target="_blank" href="http://android.jobbole.com/82076/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts">Android 项目重构之路：架构篇</a>
                         · <a href="http://android.jobbole.com/82076/#comments" target="_blank"><i class="fa fa-comments-o"></i> 4</a>                    </span>
                    </li>
                            </ul>
        </div>
    
    
<div style="text-align: left;">
    <h3>可能感兴趣的话题</h3>
    <ul style="font-size: 13px; list-style: disc inside;">
                        <li>
                    <a href="http://group.jobbole.com/30923/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="有时间了解一下从硬件到软件" target="_blank">有时间了解一下从硬件到软件</a>
                     · <a href="http://group.jobbole.com/30923/#comments" target="_blank"><i class="fa fa-comments-o"></i> 1</a>                </li>
                            <li>
                    <a href="http://group.jobbole.com/30874/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="腾讯2016招聘笔试：生成格雷码" target="_blank">腾讯2016招聘笔试：生成格雷码</a>
                                    </li>
                            <li>
                    <a href="http://group.jobbole.com/30915/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="做前端，要不要换工作，现在换的话，工作好不好找" target="_blank">做前端，要不要换工作，现在换的话，工作好不好找</a>
                     · <a href="http://group.jobbole.com/30915/#comments" target="_blank"><i class="fa fa-comments-o"></i> 1</a>                </li>
                            <li>
                    <a href="http://group.jobbole.com/30914/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="请教 Android 牛，ContentProvider 中的 getType 到底有什么用？" target="_blank">请教 Android 牛，ContentProvider 中的 getType 到底有什么用？</a>
                                    </li>
                            <li>
                    <a href="http://group.jobbole.com/30912/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="离职证明是必须的吗？" target="_blank">离职证明是必须的吗？</a>
                     · <a href="http://group.jobbole.com/30912/#comments" target="_blank"><i class="fa fa-comments-o"></i> 3</a>                </li>
                            <li>
                    <a href="http://group.jobbole.com/30871/?utm_source=android.jobbole.com&amp;utm_medium=article-related-group-topic" title="搜狗2016招聘笔试：（火眼金睛）" target="_blank">搜狗2016招聘笔试：（火眼金睛）</a>
                                    </li>
                </ul>
</div>
	
            <div id="article-comment" class="dot-box center-align">

                        <a href="http://www.jobbole.com/login?redirect=http://android.jobbole.com/82083/"><button type="button" class="btn btn-non-transparent">登录后评论</button></a>
            
            <a target="_blank" href="http://www.jobbole.com/register"><button type="button" class="btn btn-primary">新用户注册</button></a>

            <br><br>
            <span>直接登录</span>
            <style type="text/css">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class="connectBox1 t_login_button"><a href="http://android.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F" title="微信" rel="nofollow"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/btn_weixin.png"></a><a href="http://android.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F" title="QQ" rel="nofollow"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/btn_qzone.png"></a><a href="http://android.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F" title="新浪微博" rel="nofollow"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/btn_sina.png"></a><a href="http://android.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F" title="豆瓣" rel="nofollow"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/btn_douban.png"></a><a href="http://android.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fandroid.jobbole.com%2F82083%2F" title="GitHub" rel="nofollow"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/btn_github.png"></a></span>        </div>
    

    <div id="comment_list" class="comments">

                    <h5 id="comments" class="sub-title"><i class="glyphicon"></i>最新评论</h5>
            <ul class="cmnt-list">

                        <li id="comment-91486" class="comment cmnt odd">
    
    <div class="cmnt-box">
        <div class="cmnt-header">
                            <a href="http://www.jobbole.com/members/yuwengmy" class="cmnt-img"><img width="37" height="37" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png" alt=""></a>
                <div class="cmnt-meta">
                    <span><a href="http://www.jobbole.com/members/yuwengmy">peng</a><label class="comment_author_data">&nbsp;（ <a title="声望值" target="_blank" href="http://www.jobbole.com/members/yuwengmy/reputation/"><i class="fa fa-graduation-cap"></i> 1</a> ）</label></span>
                    <span class="c-title">
                        &nbsp;                    </span>

                    <span class="c-date">
                        <a href="http://android.jobbole.com/82083/#comment-91486">2015/11/30</a>
                    </span>

                    
                    
                </div>
                    </div>
        <div class="cmnt-body">
            <p>
                </p><p>感谢博主分享，读完你的文章学到了很多东西</p>
            <p></p>
                    </div>
                    <div class="cmnt-footer">

                
                <p class="c-like">
                    <a title="赞同" alt="赞同" class="91486voteflag  t-up  href-style vote-comment-up  register-user-only   " data-comment-id="91486"><i class="fa fa-thumbs-o-up"></i> <span id="91486voteuptotal"> 赞</span></a>

                    
                    <a rel="nofollow" class="comment-reply-link register-user-only" href="http://android.jobbole.com/82083/?replytocom=91486#respond" data-onclick="return addComment.moveForm( &quot;comment-91486&quot;, &quot;91486&quot;, &quot;respond&quot;, &quot;82083&quot; )" aria-label="回复给peng">回复 <i class="fa fa-reply"></i></a>
                </p>
            </div>
            </div>
    </li>
<!-- #comment-## -->
        <li id="comment-91490" class="comment cmnt even">
    
    <div class="cmnt-box">
        <div class="cmnt-header">
                            <a href="http://www.jobbole.com/members/fengzijia" class="cmnt-img"><img width="37" height="37" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png" alt=""></a>
                <div class="cmnt-meta">
                    <span><a href="http://www.jobbole.com/members/fengzijia">独孤贾</a><label class="comment_author_data">&nbsp;（ <a title="声望值" target="_blank" href="http://www.jobbole.com/members/fengzijia/reputation/"><i class="fa fa-graduation-cap"></i> 1</a> ）</label></span>
                    <span class="c-title">
                        &nbsp;                    </span>

                    <span class="c-date">
                        <a href="http://android.jobbole.com/82083/#comment-91490">2015/12/02</a>
                    </span>

                    
                    
                </div>
                    </div>
        <div class="cmnt-body">
            <p>
                </p><p>看的不是很懂</p>
            <p></p>
                    </div>
                    <div class="cmnt-footer">

                
                <p class="c-like">
                    <a title="赞同" alt="赞同" class="91490voteflag  t-up  href-style vote-comment-up  register-user-only   " data-comment-id="91490"><i class="fa fa-thumbs-o-up"></i> <span id="91490voteuptotal"> 赞</span></a>

                    
                    <a rel="nofollow" class="comment-reply-link register-user-only" href="http://android.jobbole.com/82083/?replytocom=91490#respond" data-onclick="return addComment.moveForm( &quot;comment-91490&quot;, &quot;91490&quot;, &quot;respond&quot;, &quot;82083&quot; )" aria-label="回复给独孤贾">回复 <i class="fa fa-reply"></i></a>
                </p>
            </div>
            </div>
    </li>
<!-- #comment-## -->
        <li id="comment-91568" class="comment cmnt odd">
    
    <div class="cmnt-box">
        <div class="cmnt-header">
                            <a href="http://www.jobbole.com/members/zone-615" class="cmnt-img"><img width="37" height="37" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/100" alt=""></a>
                <div class="cmnt-meta">
                    <span><a href="http://www.jobbole.com/members/zone-615">615＇空间</a><label class="comment_author_data">&nbsp;</label></span>
                    <span class="c-title">
                        &nbsp;                    </span>

                    <span class="c-date">
                        <a href="http://android.jobbole.com/82083/#comment-91568">2016/03/10</a>
                    </span>

                    
                    
                </div>
                    </div>
        <div class="cmnt-body">
            <p>
                </p><p>能学到很多东西，很不错，有一点就是AppActionImpl这个实现类这样写会很臃肿吧，这才几个接口就一百多行代码了，要是四五十个以上……</p>
            <p></p>
                    </div>
                    <div class="cmnt-footer">

                
                <p class="c-like">
                    <a title="赞同" alt="赞同" class="91568voteflag  t-up  href-style vote-comment-up  register-user-only   " data-comment-id="91568"><i class="fa fa-thumbs-o-up"></i> <span id="91568voteuptotal"> 赞</span></a>

                    
                    <a rel="nofollow" class="comment-reply-link register-user-only" href="http://android.jobbole.com/82083/?replytocom=91568#respond" data-onclick="return addComment.moveForm( &quot;comment-91568&quot;, &quot;91568&quot;, &quot;respond&quot;, &quot;82083&quot; )" aria-label="回复给615＇空间">回复 <i class="fa fa-reply"></i></a>
                </p>
            </div>
            </div>
    </li>
<!-- #comment-## -->
            </ul>
        
    </div>
		

	
</div>
<!-- END .grid-8 -->

<!-- BEGIN #sidebar -->
<div id="sidebar" class="grid-4">

	    <div id="text-10" class="widget widget_text">			<div class="textwidget"><p><a href="http://group.jobbole.com/22945/" target="_blank"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/bfdcef89gy1fdd9j7jnsjj208c046q3c.jpg"></a></p>
</div>
		</div>
        <h3 class="widget-title">
            <a target="_blank" href="http://group.jobbole.com/category/tech/android/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topics-more">安卓小组话题</a>
            <span style="float:right;"><a target="_blank" href="http://group.jobbole.com/newtopic/?group=24">我有新话题 <i class="fa fa-commenting-o"></i></a></span>
        </h3>

        <!-- BEGIN .container -->
        <div class="container">

            
                <!-- BEGIN .grid-4 -->
                <div class="grid-4 floated-thumb">

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/lixyz" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/96e79218965eb72c92a549dd5a330112.jpg" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="请教 Android 牛，ContentProvider 中的 getType 到底有什么用？" href="http://group.jobbole.com/30914/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">请教 Android 牛，ContentProvider ...</a><br>
                                <a href="http://group.jobbole.com/author/lixyz/">lixyz</a> 发起
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/ab6326795" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/3acd1c6c53252af8fc2d03accdb07662.jpg" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="教你破解apk签名验证" href="http://group.jobbole.com/21913/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">教你破解apk签名验证</a><br>
                                <a href="http://group.jobbole.com/author/ab6326795/">起始页</a> 发起
                                                                    • 3 回复
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/dingmouren" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="ColorPicker一款android取色器，高仿ps取色板" href="http://group.jobbole.com/30613/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">ColorPicker一款android取色器，高仿...</a><br>
                                <a href="http://group.jobbole.com/author/dingmouren/">钉某人</a> 发起
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/fightingjwj" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="基于Tigase的android即时通讯开发" href="http://group.jobbole.com/28902/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">基于Tigase的android即时通讯开发</a><br>
                                <a href="http://group.jobbole.com/author/fightingjwj/">娇fightingforever</a> 发起
                                                                    • 2 回复
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/wx2735304179" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="求解rem在安卓设备上的兼容问题" href="http://group.jobbole.com/12643/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">求解rem在安卓设备上的兼容问题</a><br>
                                <a href="http://group.jobbole.com/author/wx2735304179/">style</a> 发起
                                                                    • 7 回复
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                            <!-- BEGIN .post-thumb -->
                            <div class="author-thumb">

                                <a target="_blank" href="http://www.jobbole.com/members/2383163997" "="">
                                    <img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/1" alt="" width="34" height="34">
                                </a>

                            </div>
                            <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" target="_blank" title="okhttp和xutils哪个好" href="http://group.jobbole.com/28720/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-group-topic">okhttp和xutils哪个好</a><br>
                                <a href="http://group.jobbole.com/author/2383163997/">蜗牛和玫瑰树会在一起吗</a> 发起
                                                                    • 6 回复
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                </div>
                <!-- END .grid-4 -->

            
            <div class="clear"></div>

        </div>
        <!-- END .container -->

        <div class="tabs tabbed_widget"><ul class="nav clearfix"><li class="active"><a id="link-tab1" href="http://android.jobbole.com/82083/#tab1" title="本周热门安卓文章">本周热门安卓文章</a></li><li><a id="link-tab2" href="http://android.jobbole.com/82083/#tab2" title="本月热门">本月热门</a></li><li><a id="link-tab3" href="http://android.jobbole.com/82083/#tab3" title="热门标签">热门标签</a></li></ul><div id="tab1" class="tab" style="display: block;"><div class="floated-thumb">
                    
                    <!-- BEGIN .post-meta -->
                    <div class="post-meta  no-thumb">

                        <p>
                            <span class="numb">0</span>
                            <a class="meta-title" target="_blank" href="http://android.jobbole.com/85422/" title="谷歌官方详细介绍 AS 3.0 Canary 1">谷歌官方详细介绍 AS 3.0 Canar...</a><br>
                        </p>

                    </div>
                    <!-- END .post-meta -->

                    <div class="clear"></div>

                </div></div><div id="tab2" class="tab" style="display: none;"><div class="floated-thumb">
                    
                    <!-- BEGIN .post-meta -->
                    <div class="post-meta  no-thumb">

                        <p>
                            <span class="numb">0</span>
                            <a class="meta-title" target="_blank" href="http://android.jobbole.com/85407/" title="用 Kotlin 优雅地开发 Android 应用">用 Kotlin 优雅地开发 Android...</a><br>
                        </p>

                    </div>
                    <!-- END .post-meta -->

                    <div class="clear"></div>

                
                    
                    <!-- BEGIN .post-meta -->
                    <div class="post-meta  no-thumb">

                        <p>
                            <span class="numb">1</span>
                            <a class="meta-title" target="_blank" href="http://android.jobbole.com/85422/" title="谷歌官方详细介绍 AS 3.0 Canary 1">谷歌官方详细介绍 AS 3.0 Canar...</a><br>
                        </p>

                    </div>
                    <!-- END .post-meta -->

                    <div class="clear"></div>

                
                    
                    <!-- BEGIN .post-meta -->
                    <div class="post-meta  no-thumb">

                        <p>
                            <span class="numb">2</span>
                            <a class="meta-title" target="_blank" href="http://android.jobbole.com/85405/" title="Kotlin 初探">Kotlin 初探</a><br>
                        </p>

                    </div>
                    <!-- END .post-meta -->

                    <div class="clear"></div>

                </div></div><div id="tab3" class="tab" style="display: none;"><p><a href="http://android.jobbole.com/tag/activity/" class="tag-link-3993 tag-link-position-1" title="5个话题" style="font-size: 10.32044198895px;">Activity</a>
<a href="http://android.jobbole.com/tag/aidl/" class="tag-link-3761 tag-link-position-2" title="4个话题" style="font-size: 9.7016574585635px;">AIDL</a>
<a href="http://android.jobbole.com/tag/android/" class="tag-link-3682 tag-link-position-3" title="196个话题" style="font-size: 22px;">android</a>
<a href="http://android.jobbole.com/tag/android-studio/" class="tag-link-3675 tag-link-position-4" title="24个话题" style="font-size: 15.116022099448px;">Android Studio</a>
<a href="http://android.jobbole.com/tag/android-ui/" class="tag-link-3760 tag-link-position-5" title="7个话题" style="font-size: 11.24861878453px;">Android UI</a>
<a href="http://android.jobbole.com/tag/android-wear/" class="tag-link-3368 tag-link-position-6" title="7个话题" style="font-size: 11.24861878453px;">Android Wear</a>
<a href="http://android.jobbole.com/tag/apk/" class="tag-link-3731 tag-link-position-7" title="3个话题" style="font-size: 8.9281767955801px;">APK</a>
<a href="http://android.jobbole.com/tag/art/" class="tag-link-3696 tag-link-position-8" title="8个话题" style="font-size: 11.635359116022px;">art</a>
<a href="http://android.jobbole.com/tag/binder/" class="tag-link-4148 tag-link-position-9" title="4个话题" style="font-size: 9.7016574585635px;">Binder</a>
<a href="http://android.jobbole.com/tag/butterknife/" class="tag-link-4075 tag-link-position-10" title="2个话题" style="font-size: 8px;">ButterKnife</a>
<a href="http://android.jobbole.com/tag/canvas/" class="tag-link-4076 tag-link-position-11" title="5个话题" style="font-size: 10.32044198895px;">Canvas</a>
<a href="http://android.jobbole.com/tag/context/" class="tag-link-3809 tag-link-position-12" title="3个话题" style="font-size: 8.9281767955801px;">Context</a>
<a href="http://android.jobbole.com/tag/coordinatorlayout/" class="tag-link-4123 tag-link-position-13" title="3个话题" style="font-size: 8.9281767955801px;">CoordinatorLayout</a>
<a href="http://android.jobbole.com/tag/crash/" class="tag-link-4197 tag-link-position-14" title="3个话题" style="font-size: 8.9281767955801px;">Crash</a>
<a href="http://android.jobbole.com/tag/customview/" class="tag-link-4065 tag-link-position-15" title="8个话题" style="font-size: 11.635359116022px;">CustomView</a>
<a href="http://android.jobbole.com/tag/dagger2/" class="tag-link-3992 tag-link-position-16" title="4个话题" style="font-size: 9.7016574585635px;">dagger2</a>
<a href="http://android.jobbole.com/tag/dalvik/" class="tag-link-3831 tag-link-position-17" title="5个话题" style="font-size: 10.32044198895px;">Dalvik</a>
<a href="http://android.jobbole.com/tag/dex/" class="tag-link-3864 tag-link-position-18" title="3个话题" style="font-size: 8.9281767955801px;">dex</a>
<a href="http://android.jobbole.com/tag/drawable/" class="tag-link-3736 tag-link-position-19" title="6个话题" style="font-size: 10.861878453039px;">Drawable</a>
<a href="http://android.jobbole.com/tag/eclipse/" class="tag-link-3674 tag-link-position-20" title="3个话题" style="font-size: 8.9281767955801px;">Eclipse</a>
<a href="http://android.jobbole.com/tag/eventbus/" class="tag-link-3818 tag-link-position-21" title="6个话题" style="font-size: 10.861878453039px;">EventBus</a>
<a href="http://android.jobbole.com/tag/facebook/" class="tag-link-3693 tag-link-position-22" title="4个话题" style="font-size: 9.7016574585635px;">Facebook</a>
<a href="http://android.jobbole.com/tag/featuredpost/" class="tag-link-3679 tag-link-position-23" title="5个话题" style="font-size: 10.32044198895px;">featuredpost</a>
<a href="http://android.jobbole.com/tag/flatbuffers/" class="tag-link-3850 tag-link-position-24" title="3个话题" style="font-size: 8.9281767955801px;">FlatBuffers</a>
<a href="http://android.jobbole.com/tag/fragment/" class="tag-link-3724 tag-link-position-25" title="8个话题" style="font-size: 11.635359116022px;">Fragment</a>
<a href="http://android.jobbole.com/tag/gcssloop/" class="tag-link-4067 tag-link-position-26" title="5个话题" style="font-size: 10.32044198895px;">GcsSloop</a>
<a href="http://android.jobbole.com/tag/glide/" class="tag-link-4185 tag-link-position-27" title="4个话题" style="font-size: 9.7016574585635px;">Glide</a>
<a href="http://android.jobbole.com/tag/google/" class="tag-link-3688 tag-link-position-28" title="3个话题" style="font-size: 8.9281767955801px;">google</a>
<a href="http://android.jobbole.com/tag/gradle/" class="tag-link-3668 tag-link-position-29" title="24个话题" style="font-size: 15.116022099448px;">Gradle</a>
<a href="http://android.jobbole.com/tag/http/" class="tag-link-3734 tag-link-position-30" title="4个话题" style="font-size: 9.7016574585635px;">http</a>
<a href="http://android.jobbole.com/tag/instamaterial/" class="tag-link-3828 tag-link-position-31" title="9个话题" style="font-size: 12.022099447514px;">InstaMaterial</a>
<a href="http://android.jobbole.com/tag/java/" class="tag-link-3749 tag-link-position-32" title="7个话题" style="font-size: 11.24861878453px;">Java</a>
<a href="http://android.jobbole.com/tag/jni/" class="tag-link-3747 tag-link-position-33" title="7个话题" style="font-size: 11.24861878453px;">JNI</a>
<a href="http://android.jobbole.com/tag/listview/" class="tag-link-3758 tag-link-position-34" title="8个话题" style="font-size: 11.635359116022px;">ListView</a>
<a href="http://android.jobbole.com/tag/material-design/" class="tag-link-3730 tag-link-position-35" title="10个话题" style="font-size: 12.331491712707px;">Material Design</a>
<a href="http://android.jobbole.com/tag/motionevent/" class="tag-link-3929 tag-link-position-36" title="3个话题" style="font-size: 8.9281767955801px;">MotionEvent</a>
<a href="http://android.jobbole.com/tag/mvc/" class="tag-link-3952 tag-link-position-37" title="3个话题" style="font-size: 8.9281767955801px;">MVC</a>
<a href="http://android.jobbole.com/tag/mvp/" class="tag-link-3906 tag-link-position-38" title="8个话题" style="font-size: 11.635359116022px;">MVP</a>
<a href="http://android.jobbole.com/tag/mvvm/" class="tag-link-3953 tag-link-position-39" title="5个话题" style="font-size: 10.32044198895px;">MVVM</a>
<a href="http://android.jobbole.com/tag/ndk/" class="tag-link-3712 tag-link-position-40" title="10个话题" style="font-size: 12.331491712707px;">NDK</a>
<a href="http://android.jobbole.com/tag/okhttp/" class="tag-link-3872 tag-link-position-41" title="8个话题" style="font-size: 11.635359116022px;">okHttp</a>
<a href="http://android.jobbole.com/tag/ormlite/" class="tag-link-3820 tag-link-position-42" title="2个话题" style="font-size: 8px;">ORMLite</a>
<a href="http://android.jobbole.com/tag/path/" class="tag-link-4085 tag-link-position-43" title="4个话题" style="font-size: 9.7016574585635px;">Path</a>
<a href="http://android.jobbole.com/tag/react-native/" class="tag-link-3994 tag-link-position-44" title="6个话题" style="font-size: 10.861878453039px;">React Native</a>
<a href="http://android.jobbole.com/tag/recyclerview/" class="tag-link-3718 tag-link-position-45" title="18个话题" style="font-size: 14.187845303867px;">RecyclerView</a>
<a href="http://android.jobbole.com/tag/retrofit/" class="tag-link-4007 tag-link-position-46" title="7个话题" style="font-size: 11.24861878453px;">Retrofit</a>
<a href="http://android.jobbole.com/tag/rxjava/" class="tag-link-3853 tag-link-position-47" title="31个话题" style="font-size: 15.966850828729px;">RxJava</a>
<a href="http://android.jobbole.com/tag/service/" class="tag-link-3698 tag-link-position-48" title="5个话题" style="font-size: 10.32044198895px;">service</a>
<a href="http://android.jobbole.com/tag/surfaceview/" class="tag-link-3808 tag-link-position-49" title="3个话题" style="font-size: 8.9281767955801px;">SurfaceView</a>
<a href="http://android.jobbole.com/tag/timeinterpolator/" class="tag-link-4078 tag-link-position-50" title="4个话题" style="font-size: 9.7016574585635px;">TimeInterpolator</a>
<a href="http://android.jobbole.com/tag/toolbar/" class="tag-link-3797 tag-link-position-51" title="3个话题" style="font-size: 8.9281767955801px;">ToolBar</a>
<a href="http://android.jobbole.com/tag/typeevaluator/" class="tag-link-4079 tag-link-position-52" title="4个话题" style="font-size: 9.7016574585635px;">TypeEvaluator</a>
<a href="http://android.jobbole.com/tag/ui/" class="tag-link-3695 tag-link-position-53" title="21个话题" style="font-size: 14.651933701657px;">UI</a>
<a href="http://android.jobbole.com/tag/valueanimator/" class="tag-link-3841 tag-link-position-54" title="4个话题" style="font-size: 9.7016574585635px;">ValueAnimator</a>
<a href="http://android.jobbole.com/tag/view/" class="tag-link-3821 tag-link-position-55" title="7个话题" style="font-size: 11.24861878453px;">View</a>
<a href="http://android.jobbole.com/tag/viewpager/" class="tag-link-3802 tag-link-position-56" title="4个话题" style="font-size: 9.7016574585635px;">ViewPager</a>
<a href="http://android.jobbole.com/tag/volley/" class="tag-link-3849 tag-link-position-57" title="3个话题" style="font-size: 8.9281767955801px;">Volley</a>
<a href="http://android.jobbole.com/tag/webview/" class="tag-link-3768 tag-link-position-58" title="3个话题" style="font-size: 8.9281767955801px;">WebView</a>
<a href="http://android.jobbole.com/tag/%e4%ba%8b%e4%bb%b6%e5%88%86%e5%8f%91/" class="tag-link-3866 tag-link-position-59" title="6个话题" style="font-size: 10.861878453039px;">事件分发</a>
<a href="http://android.jobbole.com/tag/%e4%ba%8b%e4%bb%b6%e9%a9%b1%e5%8a%a8/" class="tag-link-3741 tag-link-position-60" title="3个话题" style="font-size: 8.9281767955801px;">事件驱动</a>
<a href="http://android.jobbole.com/tag/%e4%bc%98%e5%8c%96/" class="tag-link-3917 tag-link-position-61" title="4个话题" style="font-size: 9.7016574585635px;">优化</a>
<a href="http://android.jobbole.com/tag/%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5/" class="tag-link-3914 tag-link-position-62" title="4个话题" style="font-size: 9.7016574585635px;">依赖注入</a>
<a href="http://android.jobbole.com/tag/%e5%86%85%e5%ad%98/" class="tag-link-3788 tag-link-position-63" title="3个话题" style="font-size: 8.9281767955801px;">内存</a>
<a href="http://android.jobbole.com/tag/%e5%86%85%e5%ad%98%e4%bc%98%e5%8c%96/" class="tag-link-3896 tag-link-position-64" title="4个话题" style="font-size: 9.7016574585635px;">内存优化</a>
<a href="http://android.jobbole.com/tag/%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f/" class="tag-link-3891 tag-link-position-65" title="7个话题" style="font-size: 11.24861878453px;">内存泄漏</a>
<a href="http://android.jobbole.com/tag/%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2/" class="tag-link-3974 tag-link-position-66" title="3个话题" style="font-size: 8.9281767955801px;">内存泄露</a>
<a href="http://android.jobbole.com/tag/%e5%8a%a8%e7%94%bb/" class="tag-link-3704 tag-link-position-67" title="14个话题" style="font-size: 13.414364640884px;">动画</a>
<a href="http://android.jobbole.com/tag/%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95/" class="tag-link-3910 tag-link-position-68" title="9个话题" style="font-size: 12.022099447514px;">单元测试</a>
<a href="http://android.jobbole.com/tag/%e5%8f%8d%e7%bc%96%e8%af%91/" class="tag-link-3972 tag-link-position-69" title="3个话题" style="font-size: 8.9281767955801px;">反编译</a>
<a href="http://android.jobbole.com/tag/%e5%90%af%e5%8a%a8%e4%bc%98%e5%8c%96/" class="tag-link-3911 tag-link-position-70" title="3个话题" style="font-size: 8.9281767955801px;">启动优化</a>
<a href="http://android.jobbole.com/tag/%e5%9b%be%e7%89%87/" class="tag-link-3786 tag-link-position-71" title="3个话题" style="font-size: 8.9281767955801px;">图片</a>
<a href="http://android.jobbole.com/tag/%e5%9b%be%e7%89%87%e5%8a%a0%e8%bd%bd/" class="tag-link-3965 tag-link-position-72" title="4个话题" style="font-size: 9.7016574585635px;">图片加载</a>
<a href="http://android.jobbole.com/tag/%e5%ae%89%e5%85%a8/" class="tag-link-3852 tag-link-position-73" title="3个话题" style="font-size: 8.9281767955801px;">安全</a>
<a href="http://android.jobbole.com/tag/%e5%ae%89%e5%8d%93/" class="tag-link-3673 tag-link-position-74" title="3个话题" style="font-size: 8.9281767955801px;">安卓</a>
<a href="http://android.jobbole.com/tag/%e5%b1%9e%e6%80%a7%e5%8a%a8%e7%94%bb/" class="tag-link-3811 tag-link-position-75" title="6个话题" style="font-size: 10.861878453039px;">属性动画</a>
<a href="http://android.jobbole.com/tag/%e5%b7%a5%e5%85%b7/" class="tag-link-3710 tag-link-position-76" title="4个话题" style="font-size: 9.7016574585635px;">工具</a>
<a href="http://android.jobbole.com/tag/%e5%b8%83%e5%b1%80/" class="tag-link-3709 tag-link-position-77" title="4个话题" style="font-size: 9.7016574585635px;">布局</a>
<a href="http://android.jobbole.com/tag/%e5%bc%80%e5%8f%91/" class="tag-link-3879 tag-link-position-78" title="3个话题" style="font-size: 8.9281767955801px;">开发</a>
<a href="http://android.jobbole.com/tag/%e5%bc%80%e5%8f%91%e5%ba%93/" class="tag-link-3787 tag-link-position-79" title="3个话题" style="font-size: 8.9281767955801px;">开发库</a>
<a href="http://android.jobbole.com/tag/%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c/" class="tag-link-3968 tag-link-position-80" title="3个话题" style="font-size: 8.9281767955801px;">开发经验</a>
<a href="http://android.jobbole.com/tag/%e6%80%a7%e8%83%bd/" class="tag-link-3687 tag-link-position-81" title="10个话题" style="font-size: 12.331491712707px;">性能</a>
<a href="http://android.jobbole.com/tag/%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96/" class="tag-link-3791 tag-link-position-82" title="19个话题" style="font-size: 14.342541436464px;">性能优化</a>
<a href="http://android.jobbole.com/tag/%e6%8a%80%e5%b7%a7/" class="tag-link-3740 tag-link-position-83" title="6个话题" style="font-size: 10.861878453039px;">技巧</a>
<a href="http://android.jobbole.com/tag/%e6%8f%92%e4%bb%b6/" class="tag-link-4056 tag-link-position-84" title="8个话题" style="font-size: 11.635359116022px;">插件</a>
<a href="http://android.jobbole.com/tag/%e6%95%99%e7%a8%8b/" class="tag-link-3681 tag-link-position-85" title="6个话题" style="font-size: 10.861878453039px;">教程</a>
<a href="http://android.jobbole.com/tag/%e6%95%b0%e6%8d%ae%e5%ba%93/" class="tag-link-3701 tag-link-position-86" title="11个话题" style="font-size: 12.640883977901px;">数据库</a>
<a href="http://android.jobbole.com/tag/%e6%9e%b6%e6%9e%84/" class="tag-link-3851 tag-link-position-87" title="15个话题" style="font-size: 13.569060773481px;">架构</a>
<a href="http://android.jobbole.com/tag/%e6%a0%b7%e5%bc%8f/" class="tag-link-3880 tag-link-position-88" title="8个话题" style="font-size: 11.635359116022px;">样式</a>
<a href="http://android.jobbole.com/tag/%e6%a1%86%e6%9e%b6/" class="tag-link-4041 tag-link-position-89" title="3个话题" style="font-size: 8.9281767955801px;">框架</a>
<a href="http://android.jobbole.com/tag/%e6%b5%8b%e8%af%95/" class="tag-link-4030 tag-link-position-90" title="4个话题" style="font-size: 9.7016574585635px;">测试</a>
<a href="http://android.jobbole.com/tag/%e6%ba%90%e7%a0%81/" class="tag-link-4215 tag-link-position-91" title="3个话题" style="font-size: 8.9281767955801px;">源码</a>
<a href="http://android.jobbole.com/tag/%e7%ba%bf%e7%a8%8b/" class="tag-link-3719 tag-link-position-92" title="5个话题" style="font-size: 10.32044198895px;">线程</a>
<a href="http://android.jobbole.com/tag/%e8%87%aa%e5%ae%9a%e4%b9%89view/" class="tag-link-4064 tag-link-position-93" title="6个话题" style="font-size: 10.861878453039px;">自定义View</a>
<a href="http://android.jobbole.com/tag/%e8%87%aa%e5%ae%9a%e4%b9%89%e6%8e%a7%e4%bb%b6/" class="tag-link-3804 tag-link-position-94" title="3个话题" style="font-size: 8.9281767955801px;">自定义控件</a>
<a href="http://android.jobbole.com/tag/%e8%93%9d%e7%89%99/" class="tag-link-3705 tag-link-position-95" title="3个话题" style="font-size: 8.9281767955801px;">蓝牙</a>
<a href="http://android.jobbole.com/tag/%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f/" class="tag-link-3998 tag-link-position-96" title="8个话题" style="font-size: 11.635359116022px;">设计模式</a>
<a href="http://android.jobbole.com/tag/%e8%b0%83%e8%af%95/" class="tag-link-3706 tag-link-position-97" title="3个话题" style="font-size: 8.9281767955801px;">调试</a>
<a href="http://android.jobbole.com/tag/%e8%bf%9b%e5%ba%a6%e6%9d%a1/" class="tag-link-3806 tag-link-position-98" title="4个话题" style="font-size: 9.7016574585635px;">进度条</a>
<a href="http://android.jobbole.com/tag/%e8%bf%9b%e7%a8%8b/" class="tag-link-3738 tag-link-position-99" title="3个话题" style="font-size: 8.9281767955801px;">进程</a>
<a href="http://android.jobbole.com/tag/%e9%87%8d%e6%9e%84/" class="tag-link-3874 tag-link-position-100" title="4个话题" style="font-size: 9.7016574585635px;">重构</a></p></div></div><div id="text-11" class="widget widget_text">			<div class="textwidget"><p><a href="http://blog.jobbole.com/106093/" target="_blank"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/bfdcef89gw1f9cf776pjmj208c03c3yt.jpg"></a></p>
</div>
		</div>
        <h3 class="widget-title">
            <a target="_blank" href="http://top.jobbole.com/category/news/">业界热点资讯</a>
            <span style="float:right;"><a target="_blank" href="http://top.jobbole.com/category/news/">更多 »</a></span>
        </h3>
        <!-- BEGIN .container -->
        <div class="container">
            
                <!-- BEGIN .grid-4 -->
                <div class="grid-4 floated-thumb">

                    
                        <!-- BEGIN .post-thumb -->
                        <div class="post-thumb">
                            <a target="_blank" href="http://top.jobbole.com/36877/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/63918611gy1ffxs9hvsp6j20bb087n07.jpg" alt="" width="50" height="50"></a>
                        </div>
                        <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" title="程序员掉入传销用代码“求救” ，同事“秒懂”" target="_blank" href="http://top.jobbole.com/36877/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news">程序员掉入传销用代码“求救” ，同事“秒懂”</a><br>
                                3 天前                                · <i class="fa fa-thumbs-o-up"></i> 53                                                                    ·  <a href="http://top.jobbole.com/36877/#comments" target="_blank"><i class="fa fa-comments-o"></i> 7</a>
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                        <!-- BEGIN .post-thumb -->
                        <div class="post-thumb">
                            <a target="_blank" href="http://top.jobbole.com/36854/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/63918611gy1ffxf2xcb36j20qz0ecju2.jpg" alt="" width="50" height="50"></a>
                        </div>
                        <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" title="Stack Overflow 已帮助开发者退出 Vim 超百万次" target="_blank" href="http://top.jobbole.com/36854/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news">Stack Overflow 已帮助开发者退出 Vim 超百万次</a><br>
                                3 天前                                · <i class="fa fa-thumbs-o-up"></i> 30                                                                    ·  <a href="http://top.jobbole.com/36854/#comments" target="_blank"><i class="fa fa-comments-o"></i> 2</a>
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                        <!-- BEGIN .post-thumb -->
                        <div class="post-thumb">
                            <a target="_blank" href="http://top.jobbole.com/36830/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/460248979a5d962d31a562f9b8d4001a.jpg" alt="" width="50" height="50"></a>
                        </div>
                        <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" title="62 岁的 Java 之父加入亚马逊 AWS" target="_blank" href="http://top.jobbole.com/36830/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news">62 岁的 Java 之父加入亚马逊 AWS</a><br>
                                4 天前                                · <i class="fa fa-thumbs-o-up"></i> 60                                                                    ·  <a href="http://top.jobbole.com/36830/#comments" target="_blank"><i class="fa fa-comments-o"></i> 6</a>
                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                        <!-- BEGIN .post-thumb -->
                        <div class="post-thumb">
                            <a target="_blank" href="http://top.jobbole.com/36869/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/2e107b3e272f34af0a61d4e271684a0f.jpg" alt="" width="50" height="50"></a>
                        </div>
                        <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" title="苹果发布了免费的 Swift 应用程序开发课程" target="_blank" href="http://top.jobbole.com/36869/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news">苹果发布了免费的 Swift 应用程序开发课程</a><br>
                                3 天前                                · <i class="fa fa-thumbs-o-up"></i> 12                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                        <!-- BEGIN .post-thumb -->
                        <div class="post-thumb">
                            <a target="_blank" href="http://top.jobbole.com/36885/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/5f9074c4d95bd1dc62ce0963ed0f362e.png" alt="" width="50" height="50"></a>
                        </div>
                        <!-- END .post-thumb -->

                        <!-- BEGIN .post-meta -->
                        <div class="post-meta">

                            <p>
                                <a class="meta-title" title="MariaDB MaxScale 2.1 GA 发布，数据库智能代理" target="_blank" href="http://top.jobbole.com/36885/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-top-news">MariaDB MaxScale 2.1 GA 发布，数据库智能代理</a><br>
                                3 天前                                · <i class="fa fa-thumbs-o-up"></i> 2                                
                            </p>

                        </div>
                        <!-- END .post-meta -->

                        <div class="clear"></div>

                    
                </div>
                <!-- END .grid-4 -->

            
            <div class="clear"></div>

        </div>
        <!-- END .container -->
        <div id="text-12" class="widget widget_text">			<div class="textwidget"><p><a href="http://blog.jobbole.com/84342/" target="_blank"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/74d126ea14f964e13bb07d24843bdab4.jpg"></a></p>
</div>
		</div>            <h3 class="widget-title">
                <a href="http://hao.jobbole.com/?catid=252&amp;utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources-more" target="_blank">安卓工具资源</a>
                <span style="float:right;"><a target="_blank" href="http://hao.jobbole.com/?catid=252&amp;utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources-more">更多资源 »</a></span>
            </h3>
            <div class="container">
                <div class="grid-4">
                
                    <div class="floated-thumb">
                        <div class="post-thumb">
                            <a target="_blank" href="http://hao.jobbole.com/bugsnag/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="Bugsnag：跨平台的错误监测"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/63ca1aacc93e00d66a770cc1bf3bbc41.png" alt="" width="50" height="50"></a>
                        </div>
                        <div class="post-meta">
                            <p>
                                <a class="meta-title" target="_blank" href="http://hao.jobbole.com/bugsnag/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="Bugsnag：跨平台的错误监测">Bugsnag：跨平台的错误监测</a><br>
                                <a href="http://hao.jobbole.com/category/android/android-dev-tools/" rel="category tag">开发库</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                
                    <div class="floated-thumb">
                        <div class="post-thumb">
                            <a target="_blank" href="http://hao.jobbole.com/materialprogressbar/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="MaterialProgressBar：和Material Design效果外观一致的进度条"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/f46c77d2580ab32de09e5c6ee08e85bc.png" alt="" width="50" height="50"></a>
                        </div>
                        <div class="post-meta">
                            <p>
                                <a class="meta-title" target="_blank" href="http://hao.jobbole.com/materialprogressbar/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="MaterialProgressBar：和Material Design效果外观一致的进度条">MaterialProgressBar：和Material Design效果外观一...</a><br>
                                <a href="http://hao.jobbole.com/category/android/" rel="category tag">Android</a>, <a href="http://hao.jobbole.com/category/android/android-gui/" rel="category tag">GUI</a> · <a target="_blank" href="http://hao.jobbole.com/materialprogressbar/#comments"><i class="fa fa-comments-o"></i> 1</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                
                    <div class="floated-thumb">
                        <div class="post-thumb">
                            <a target="_blank" href="http://hao.jobbole.com/cordova/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="Cordova：跨平台前端编译库"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/11301b87af04079f6048a3f789cafb15.png" alt="" width="50" height="50"></a>
                        </div>
                        <div class="post-meta">
                            <p>
                                <a class="meta-title" target="_blank" href="http://hao.jobbole.com/cordova/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="Cordova：跨平台前端编译库">Cordova：跨平台前端编译库</a><br>
                                <a href="http://hao.jobbole.com/category/android/" rel="category tag">Android</a>, <a href="http://hao.jobbole.com/category/android/android-html-css-js/" rel="category tag">HTML、CSS与Javascript</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                
                    <div class="floated-thumb">
                        <div class="post-thumb">
                            <a target="_blank" href="http://hao.jobbole.com/android-remote-notifications/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="android-remote-notifications：从远程JSON文件拉取通知显示在你的应用中"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/b6b068bd348bb83e80b75ef1af67699c.jpg" alt="" width="50" height="50"></a>
                        </div>
                        <div class="post-meta">
                            <p>
                                <a class="meta-title" target="_blank" href="http://hao.jobbole.com/android-remote-notifications/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="android-remote-notifications：从远程JSON文件拉取通知显示在你的应用中">android-remote-notifications：从远程JSON文件拉取...</a><br>
                                <a href="http://hao.jobbole.com/category/android/" rel="category tag">Android</a>, <a href="http://hao.jobbole.com/category/android/android-notification/" rel="category tag">通知</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                
                    <div class="floated-thumb">
                        <div class="post-thumb">
                            <a target="_blank" href="http://hao.jobbole.com/williamchart/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="WilliamChart：优美和直观的图表库"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/0ba696211a1e8b7759d1a5e523cae11a.png" alt="" width="50" height="50"></a>
                        </div>
                        <div class="post-meta">
                            <p>
                                <a class="meta-title" target="_blank" href="http://hao.jobbole.com/williamchart/?utm_source=android.jobbole.com&amp;utm_medium=sidebar-resources" title="WilliamChart：优美和直观的图表库">WilliamChart：优美和直观的图表库</a><br>
                                <a href="http://hao.jobbole.com/category/android/" rel="category tag">Android</a>, <a href="http://hao.jobbole.com/category/android/%e5%9b%be%e8%a1%a8/" rel="category tag">图表</a>
                            </p>
                        </div>
                        <div class="clear"></div>
                    </div>
                                </div>
            </div>
        	
	<!-- BEGIN .container -->
	<div class="container">
	
		<!-- BEGIN .grid-2 -->
		<div class="grid-2">
			
						
		</div>
		<!-- END .grid-2 -->
		
		<!-- BEGIN .grid-2 -->
		<div class="grid-2">
			
						
		</div>
		<!-- END .grid-2 -->
		
		<div class="clear"></div>
			
	</div>
	<!-- END .container -->

</div>
<!-- END #sidebar -->
<div class="clear"></div>	


</div>
<!-- END #wrapper -->

<!-- BEGIN footer -->

    <footer>

        <!-- BEGIN .container -->
        <div class="container">

            <!-- BEGIN .grid-4 -->
            <div class="grid-4">

                <div id="text-5" class="widget widget_text"><h3 class="widget-title">关于安卓频道</h3>			<div class="textwidget"><p>安卓频道分享Android开发文章，精选工具和安卓相关的行业动态。</p>
<p><b>快速链接</b><br>
<a target="_blank" href="http://blog.jobbole.com/87622/">网站使用指南 » </a><br>
<a target="_blank" href="http://group.jobbole.com/22422/">加入我们 » </a><br>
<a target="_blank" href="http://group.jobbole.com/category/feedback/thanks">问题反馈与求助 » </a><br>
<a target="_blank" href="http://group.jobbole.com/158/">网站积分规则 » </a><br>
<a target="_blank" href="http://group.jobbole.com/175/">网站声望规则 » </a></p>
</div>
		</div>
            </div>
            <!-- END .grid-4 -->

            <!-- BEGIN .grid-4 -->
            <div class="grid-4">

                <div id="text-3" class="widget widget_text"><h3 class="widget-title">关注我们</h3>			<div class="textwidget"><p>新浪微博：<a href="http://weibo.com/androidpd" target="_blank">@安卓开发频道</a><br>
RSS：<a href="http://android.jobbole.com/feed/" target="_blank">订阅地址</a><br>
推荐微信号 <br>
<img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/android_weixin.png" width="100" height="110"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/ImportNew_weixin.png" width="100" height="110"><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/ui_weixin.png" width="100" height="110"></p>
<p><strong>合作联系</strong><br>
Email：<a href="mailto:bd@jobbole.com">bd@Jobbole.com</a><br>
QQ： 2302462408  （加好友请注明来意）</p>
</div>
		</div>
            </div>
            <!-- END .grid-4 -->

            <!-- BEGIN .grid-4 -->
            <div class="grid-4">

                <div id="text-4" class="widget widget_text"><h3 class="widget-title">更多频道</h3>			<div class="textwidget"><p><a href="http://group.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">小组</a> – 好的话题、有启发的回复、值得信赖的圈子<br>
<a href="http://top.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">头条</a> – 分享和发现有价值的内容与观点<br>
<a href="http://date.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">相亲</a> – 为IT单身男女服务的征婚传播平台<br>
<a href="http://hao.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">资源</a> – 优秀的工具资源导航<br>
<a href="http://fanyi.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">翻译</a> – 翻译传播优秀的外文文章<br>
<a href="http://blog.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">文章</a> – 国内外的精选文章<br>
<a href="http://design.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">设计</a> – UI,网页，交互和用户体验<br>
<a href="http://ios.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">iOS</a> – 专注iOS技术分享<br>
<a href="http://android.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">安卓</a> – 专注Android技术分享<br>
<a href="http://web.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">前端</a> – JavaScript, HTML5, CSS<br>
<a href="http://www.importnew.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">Java</a> – 专注Java技术分享<br>
<a href="http://python.jobbole.com/?utm_source=android.jobbole.com&amp;utm_medium=bottomText" target="_blank">Python</a> – 专注Python技术分享</p>
</div>
		</div>
            </div>
            <!-- END .grid-4 -->

            <div class="clear"></div>

        </div>
        <!-- END .container -->

        <!-- BEGIN #bottom -->
        <div id="bottom">

            <!-- BEGIN .container -->
            <div class="container">

                <!-- BEGIN .grid-12 -->
                <div class="grid-12">

                    <p>© 2017 伯乐在线
                    <span style="margin: 0 40px;">
                        <a href="http://blog.jobbole.com/">文章</a>&nbsp;&nbsp;
                        <a href="http://group.jobbole.com/">小组</a>&nbsp;&nbsp;
                        <a href="http://date.jobbole.com/">相亲</a>&nbsp;&nbsp;
                        <a href="http://group.jobbole.com/22422/">加入我们</a>&nbsp;&nbsp;
                        <a href="http://group.jobbole.com/category/feedback/thanks/"><i class="fa fa-bullhorn"></i> 反馈</a>
                    </span>
                    <a target="_blank" href="http://www.miitbeian.gov.cn/publish/query/indexFirst.action">沪ICP备14046347号-1</a>
                    </p>
                </div>
                <!-- END .grid-12 -->

                <div class="clear"></div>

            </div>
            <!-- END .container -->

        </div>
        <!-- END #bottom -->
    </footer>

    
<!-- END footer -->



<script type="text/javascript">
/* <![CDATA[ */
var thickboxL10n = {"next":"\u4e0b\u4e00\u9875 >","prev":"< \u4e0a\u4e00\u9875","image":"\u56fe\u50cf","of":"\/","close":"\u5173\u95ed","noiframes":"\u8fd9\u4e2a\u529f\u80fd\u9700\u8981iframe\u7684\u652f\u6301\u3002\u60a8\u53ef\u80fd\u7981\u6b62\u4e86iframe\u7684\u663e\u793a\uff0c\u6216\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd\u3002","loadingAnimation":"http:\/\/android.jobbole.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif"};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/thickbox.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/underscore.min.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/shortcode.min.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/media-upload.min.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/comment-reply.min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"\u5173\u95ed\u6240\u6709\u6253\u5f00\u7684\u6807\u7b7e","closeTags":"\u5173\u95ed\u6807\u7b7e","enterURL":"\u8f93\u5165URL","enterImageURL":"\u8f93\u5165\u56fe\u50cfURL","enterImageDescription":"\u4e3a\u56fe\u50cf\u8f93\u5165\u63cf\u8ff0","textdirection":"\u6587\u672c\u65b9\u5411","toggleTextdirection":"\u5207\u6362\u7f16\u8f91\u5668\u6587\u672c\u4e66\u5199\u65b9\u5411","dfw":"\u514d\u6253\u6270\u5199\u4f5c\u6a21\u5f0f","strong":"\u7c97\u4f53","strongClose":"\u5173\u95ed\u7c97\u4f53\u6807\u7b7e","em":"\u659c\u4f53","emClose":"\u5173\u95ed\u659c\u4f53\u6807\u7b7e","link":"\u63d2\u5165\u94fe\u63a5","blockquote":"\u5757\u5f15\u7528","blockquoteClose":"\u5173\u95ed\u5757\u5f15\u7528\u6807\u7b7e","del":"\u5220\u9664\u7684\u6587\u5b57\uff08\u5220\u9664\u7ebf\uff09","delClose":"\u5173\u95ed\u5220\u9664\u7ebf\u6807\u7b7e","ins":"\u63d2\u5165\u7684\u6587\u5b57","insClose":"\u5173\u95ed\u63d2\u5165\u7684\u6587\u5b57\u6807\u7b7e","image":"\u63d2\u5165\u56fe\u50cf","ul":"\u9879\u76ee\u7b26\u53f7\u5217\u8868","ulClose":"\u5173\u95ed\u9879\u76ee\u7b26\u53f7\u5217\u8868\u6807\u7b7e","ol":"\u7f16\u53f7\u5217\u8868","olClose":"\u5173\u95ed\u7f16\u53f7\u5217\u8868\u6807\u7b7e","li":"\u5217\u8868\u9879\u76ee","liClose":"\u5173\u95ed\u5217\u8868\u9879\u76ee\u6807\u7b7e","code":"\u4ee3\u7801","codeClose":"\u5173\u95ed\u4ee3\u7801\u6807\u7b7e","more":"\u63d2\u5165\u201cMore\u201d\u6807\u7b7e"};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/quicktags.min.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/crayon_qt.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/android.jobbole.com\/wp-admin\/admin-ajax.php","post_id":"82083"};
/* ]]> */
</script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/postviews-cache.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/ready.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/easing.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/validate.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/touchwipe.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/caroufredsel.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/flexslider.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/jplayer.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/fitvids.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/selectnav.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/effects.js.下载"></script>
<script type="text/javascript" src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/wp-embed.min.js.下载"></script>


<div id="full-btm">
<a><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/back-btm.png" width="20" border="0" alt="跳到底部" title="跳到底部"></a>
</div>

<script type="text/javascript">
jQuery('#full-btm').click(function(){
    jQuery('html, body').animate({scrollTop:jQuery(document).height()}, 'slow');
    return false;
});
</script>

<div id="full-top">
<a><img src="./Android 项目重构之路：实现篇 - 安卓 - 伯乐在线_files/back-top.png" width="20" border="0" alt="返回顶部" title="返回顶部"></a>
</div>

<script type="text/javascript">
jQuery('#full-top').click(function(){
    jQuery('html, body').animate({scrollTop:0}, 'slow');
    return false;
});

</script>


<!-- END body -->


<!-- END html --><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none; max-width: none;"></div></div></body></html>