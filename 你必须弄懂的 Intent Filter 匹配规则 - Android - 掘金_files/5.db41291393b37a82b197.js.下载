webpackJsonp([5],{1262:function(t,e){},1263:function(t,e){},1264:function(t,e,n){"use strict";function i(t){var e=t.state.route,n=e.params.id;if(n){var i=D(t),s=i.actionType.FETCH;return t.dispatch(s,n)}}function s(t){var e=t.state.route,n=e.params.id;if(n){var i=D(t).commentList;return t.dispatch(i.actionType.FETCH,{entryId:n,page:1})}}function o(t){var e=D(t),n=e.actionType.RESET;t.dispatch(n)}function r(t){try{var e=new Date,n=t.map(function(t){return t.filter(function(t){return e>=t.startTime&&e<=t.endTime})}).filter(function(t){return t.length}),i=a(n);if(i){var s=a(i);if(s)return l()({},s,{text:a(s.textList)})}}catch(t){console.error(t)}}function a(t){return t[Math.floor(Math.random()*t.length)]}Object.defineProperty(e,"__esModule",{value:!0});var c=n(3),l=n.n(c),u=n(149),d=n.n(u),p=n(917),f=n.n(p),m=n(220),h=n.n(m),v=n(901),y=n(21),g=n(56),b=n(813),C=n(88),_=n(807),w=(n(109),n(1265)),k=n(86),x=n(8),L=n(986),E=n.n(L),T=n(990),O=n.n(T),$=n(808),B=n.n($),S=n(824),A=n.n(S),I=n(904),F=n.n(I),M=n(862),R=n.n(M),j=n(994),P=n.n(j),U=n(866),N=n.n(U),z=n(874),K=n.n(z),D=function(t){return t.state.view.entryPublic};e.default={components:{RelatedEntry:E.a,RelatedEntryAside:O.a,Thumb:B.a,MobileBottomBar:R.a,AppDownload:A.a,BannerWx:F.a,ArticleSuspendingPanel:P.a,CommentForm:N.a,CommentList:K.a},data:function(){return{banner:null,sticky:!1,isViewNavOnTop:!1,fixedIsShow:!1,likeLock:Object(_.a)()}},computed:d()({},Object(k.mapGetters)({user:x.USER}),{state:function(){return D(this.$store)},entry:function(){return this.state.entry},categoryTitle:function(){return((this.entry||{}).category||{}).title},entryCreateDate:function(){return this.entry&&Object(y.a)(new Date(this.entry.createdAt),"YYYY-MM-DD")},parsedContent:function(){var t=this.$getBean("articleBusiness"),e=this.entry.parsedContent||"";return t.processArticleHtml(e,{lazyload:!0})},parsed:function(){return!!this.entry.parsedContent},like:function(){return this.entry.liked},entryLikeCount:function(){return this.entry&&this.entry.collectionCount},domain:function(){return(this.entry.originalUrl||"").replace(/^(.*?\/\/)?([^\/]+).*$/,"$2")},entryQrFixed:function(){var t=this.entry.id;return!t||this.$isServer?"":Object(b.a)(Object(C.a)("article-parse",{id:t,type:"entry",source:"article_sharefloater",campaign:"share_article"}))}}),watch:{$route:function(){h.a.initHighlightingOnLoad(),this.fetch()}},metaInfo:function(){var t=Object(v.a)(this.entry),e=t.title,n=t.keywords,i=t.description;return{title:e&&e+" - "+this.categoryTitle,meta:[{vmid:"keywords",name:"keywords",content:n},{vmid:"description",name:"description",content:i}]}},shareInfo:function(){return{title:this.entry.title,description:this.entry.abstract||this.entry.content,thumb:this.entry.screenshot,url:this.$route.fullPath}},methods:{fetch:function(){return i(this.$store)},fetchCommentList:function(){return s(this.$store)},reset:function(){return this.lazyload&&this.lazyload.destroy(),o(this.$store)},onHeaderVisibilityChanged:function(t){this.isViewNavOnTop=!t},recordView:function(){this.$getBean("behaviorBusiness").recordViewEntryAction(this.entry.id)},shareToWeibo:function(){this.$getBean("entryBusiness").shareToWeibo(this.entry)},toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(x.TOGGLE_LIKE_ENTRY,t.entry)}).catch(function(){})})},onBannerShow:function(){this.$getBean("gaBusiness").exec("send","event","entry-banner","show",this.banner.url)},onBannerClick:function(){this.$getBean("gaBusiness").exec("send","event","entry-banner","click",this.banner.url)},initLazyload:function(){var t=this;setTimeout(function(){var e=t.$refs.content.getElementsByTagName("img");t.lazyload=new f.a(e,{threshold:200,debounce:!0,infoGetter:function(t){var e=t.getAttribute("data-src");if(e)return{url:e,width:t.getAttribute("data-width"),height:t.getAttribute("data-height")}}})})},autoFocusComment:function(){"#comment"===this.$route.hash&&(this.focusComment(),Object(g.h)(this.$refs.commentForm))},focusComment:function(){this.$refs.commentForm.focus()},onShouldFetchMoreComment:function(){this.$store.dispatch(this.state.commentList.actionType.FETCH_MORE)},onSubmitedComment:function(){this.refreshCommentList()},refreshCommentList:function(){var t=this.state.commentList.actionType.FORCE_FETCH,e=this.entry.id;this.$store.dispatch(t,{entryId:e})},initBanner:function(){this.banner=r(w.a),this.banner&&this.onBannerShow()},initLayout:function(){var t=this;this.removeScrollListener=Object(g.e)(window,function(){document.documentElement.clientHeight;window.pageYOffset<200?t.fixedIsShow=!1:t.fixedIsShow=!0;var e=t.$refs.aside.getBoundingClientRect(),n=e.height;t.sticky=window.pageYOffset>n+100})}},preFetch:function(t){return i(t)},mounted:function(){var t=this;this.entry.createdAt=this.entry.createdAt,h.a.initHighlightingOnLoad(),this.fetch().then(function(){t.parsed&&(t.recordView(),t.initLazyload()),t.fetchCommentList(),t.$nextTick(function(){t.autoFocusComment()})}),this.initBanner(),this.initLayout()},beforeDestroy:function(){this.reset(),this.removeScrollListener()}}},1265:function(t,e,n){"use strict";e.a=[[{url:"https://cloud.tencent.com/solution/la?fromSource=gwzcw.628339.628339.628339",displayedLink:"https://cloud.tencent.com/solution/la",startTime:new Date("2017-11-20T16:00:00.000Z"),endTime:new Date("2017-11-24T16:00:00.000Z"),textList:["还在烦恼小程序如何搭建？腾讯云微信小程序解决方案，一站式部署小程序资源套件，简化开发、提升效率！更有丰富的小程序模版，满足你的多场景定制化需求！","还没有搭建属于你的微信小程序？来腾讯云一步步教你搭建微信小程序，专业支持安全可靠！还有丰富的 DEMO 及 SDK 案例！","腾讯云微信小程序原生支持 HTTPS/WSS，配备 BGP 高防、域名智能解析及防劫持等多重安全防护体系，为小程序保驾护航！不要犹豫！快点来搭建属于你的微信小程序吧！","腾讯云微信小程序解决方案，支持一键购买配置模式。购买后自动分配并初始化云端资源，一键完成域名注册、解析及 SSL 证书部署！"]}],[{url:"https://cloud.tencent.com/act/campus?fromSource=gwzcw.628340.628340.628340",displayedLink:"https://cloud.tencent.com/act/campus",startTime:new Date("2017-11-20T16:00:00.000Z"),endTime:new Date("2017-11-24T16:00:00.000Z"),textList:["在校生自主创业不知道该如何选择云产品？腾讯云云+校园扶持计划助你变身云计算达人，扶持在校学生自主创业！多规格选择，10元起购！","腾讯云云+校园扶持计划，学生可享受体验套餐等优惠！免费赠送 50GB 对象存储空间、1G1核，1M带宽系统盘等！每日限购100台，迅速来抢购吧！","腾讯云学生优惠套餐，985高校学习云计算的主力机型，2G2核，1M带宽系统盘（Linux 50G/Windows 50G）免费赠送50GB对象存储空间还有.cn域名一年使用权！不要犹豫了，立即来腾讯云抢购！","腾讯云学生优惠套餐，免费赠送50GB对象存储空间等。每日限购100台，立即来抢购吧！"]}],[{url:"https://juejin.im/post/5a0ba4635188255ea95b7b39",displayedLink:"https://juejin.im/post/5a0ba4635188255ea95b7b39",startTime:new Date("2017-11-21T16:00:00.000Z"),endTime:new Date("2017-11-22T16:00:00.000Z"),textList:["掘金新品发布"]},{url:"https://juejin.im/books",displayedLink:"https://juejin.im/books",startTime:new Date("2017-11-22T16:00:00.000Z"),endTime:new Date("2017-11-24T16:00:00.000Z"),textList:["掘金小册现已发布"]}]]},1266:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view-container",{on:{headerVisibilityChanged:t.onHeaderVisibilityChanged}},[n("div",{staticClass:"view entry-public-view"},[n("div",{staticClass:"entry-public-main shadow"},[t.entry.screenshot?n("thumb",{staticClass:"thumb thumb--header",attrs:{url:t.entry.screenshot,width:800,height:600,format:"jpg"}}):t._e(),t.entry.screenshot?n("div",{staticClass:"thumb-placeholder"}):t._e(),t.entry.originalUrl?n("div",{staticClass:"entry-content-box"},[n("h1",[t._v(t._s(t.entry.title))]),n("div",{staticClass:"entry-public-info"},[n("div",{staticClass:"text-muted info-item"},[t._v("阅读 "+t._s(t.entry.viewsCount))]),n("div",{staticClass:"text-muted info-item"},[t._v("收藏 "+t._s(t.entry.collectionCount))]),n("div",{staticClass:"text-muted info-item"},[t._v(t._s(t.entryCreateDate))])]),n("div",{staticClass:"originalUrl"},[t._v("原文链接："),n("a",{directives:[{name:"link",rawName:"v-link.external.redirect.blank",value:t.entry.originalUrl,expression:"entry.originalUrl",modifiers:{external:!0,redirect:!0,blank:!0}}],attrs:{"st:name":"originLink"}},[t._v(t._s(t.domain))])]),t.banner?n("a",{directives:[{name:"link",rawName:"v-link.blank.external",value:t.banner.url,expression:"banner.url",modifiers:{blank:!0,external:!0}}],staticClass:"banner",on:{click:t.onBannerClick}},[n("span",{staticClass:"text"},[t._v(t._s(t.banner.text))]),n("span",{staticClass:"link"},[t._v(t._s(t.banner.displayedLink))])]):t._e(),t.parsedContent?n("div",{ref:"content",staticClass:"entry-content",domProps:{innerHTML:t._s(t.parsedContent)}}):n("a",{directives:[{name:"link",rawName:"v-link.external.blank",value:t.entry.originalUrl,expression:"entry.originalUrl",modifiers:{external:!0,blank:!0}}],staticClass:"origin-link",attrs:{"st:name":"readBtn"},on:{click:t.recordView}},[t._v("查看文章")]),n("div",{staticClass:"footer"},[n("ul",{staticClass:"tag-list"},t._l(t.entry.tags,function(e){return n("li",{staticClass:"item"},[n("router-link",{attrs:{to:t.$tagRoute(e)}},[t._v(t._s(e.title))])],1)})),n("section",[n("banner-wx",{attrs:{entry:t.entry,place:"footer"}})],1),t.state.relatedEntryList.length?n("div",{staticClass:"related-entry-list-box"},[n("div",{staticClass:"title"},[t._v("相关热门文章")]),n("ul",{staticClass:"related-entry-list"},t._l(t.state.relatedEntryList,function(t){return n("li",{staticClass:"item"},[n("related-entry",{staticClass:"related-entry",attrs:{entry:t}})],1)}))]):t._e()])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.entry.id,expression:"entry.id"}],staticClass:"comment-box"},[n("div",{staticClass:"comment-title"},[t._v("评论")]),n("comment-form",{ref:"commentForm",staticClass:"comment-form",attrs:{id:"comment",user:t.user,entry:t.entry},on:{submited:t.onSubmitedComment}}),n("comment-list",{staticClass:"comment-list",attrs:{list:t.state.commentList.list,entry:t.entry},on:{"should-fetch-more":t.onShouldFetchMoreComment}})],1)],1),n("div",{ref:"aside",staticClass:"entry-public-aside",class:{sticky:t.sticky,top:t.isViewNavOnTop}},[n("section",{staticClass:"section shadow"},[n("app-download")],1),n("section",{staticClass:"section banner-wx"},[n("banner-wx",{attrs:{entry:t.entry}})],1),t.state.relatedEntryList.length?n("section",{staticClass:"section aside-top-section shadow"},[n("header",{staticClass:"aside-header"},[t._v("相关文章")]),n("ul",{staticClass:"aside-list"},t._l(t.state.relatedEntryList,function(t){return n("li",{staticClass:"item"},[n("related-entry-aside",{staticClass:"related-entry-aside",attrs:{entry:t}})],1)}))]):t._e(),n("section",{staticClass:"sticky-section"},[n("app-download",{staticClass:"section shadow"}),n("div",{staticClass:"section shadow"},[n("banner-wx",{attrs:{entry:t.entry}})],1)],1)])]),n("mobile-bottom-bar",{attrs:{category:t.categoryTitle,resourceType:"entry",resourceId:t.entry.id}}),n("div",{staticClass:"entry-view-fixed"},[n("article-suspending-panel",{attrs:{show:t.fixedIsShow,"is-like":t.like,likeCount:t.entryLikeCount,"weixin-share-qr":t.entryQrFixed},on:{shareToWeibo:t.shareToWeibo,toggleLike:t.toggleLike}})],1)],1)},staticRenderFns:[]}},777:function(t,e,n){function i(t){n(1262),n(1263)}var s=n(24)(n(1264),n(1266),i,"data-v-41d33d72",null);t.exports=s.exports},807:function(t,e,n){"use strict";function i(){return new u}e.a=i;var s=n(5),o=n.n(s),r=n(0),a=n.n(r),c=n(1),l=n.n(c),u=function(){function t(){a()(this,t),this.busy=!1}return l()(t,[{key:"do",value:function(t){var e=this;return this.busy?o.a.resolve():(this.busy=!0,o.a.resolve("function"==typeof t?t():t).then(function(t){return e.busy=!1,t}).catch(function(t){return e.busy=!1,o.a.reject(t)}))}}]),t}()},808:function(t,e,n){function i(t){n(810)}var s=n(24)(n(811),n(812),i,"data-v-009ea7bb",null);t.exports=s.exports},809:function(t,e,n){function i(t){n(814)}var s=n(24)(n(815),n(816),i,"data-v-311d2efa",null);t.exports=s.exports},810:function(t,e){},811:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(72),s=n(209),o=n(210),r=n.n(o);e.default={components:{Lazy:r.a},props:["url","default","quality","width","height","shrink","format","size","alt","blank"],computed:{defaultThumbUrl:function(){return this.default||i.d},thumbUrl:function(){var t=this.url||(this.blank?"":this.defaultThumbUrl);return this.width&&this.height?this.shrink?Object(s.b)(t,this.width,this.height,{format:this.format,quality:this.quality}):Object(s.a)(t,this.width,this.height,{format:this.format,quality:this.quality}):t},thumbStyle:function(){return{backgroundSize:this.size||"cover"}}}}},812:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("lazy",{staticClass:"thumb",style:t.thumbStyle,attrs:{div:!0,url:t.thumbUrl}})},staticRenderFns:[]}},813:function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000";return"data:image/svg+xml;utf8,"+new o.a({content:t,color:e,padding:0,width:410,height:410,background:"#ffffff",ecl:"L"}).svg()}e.a=i;var s=n(211),o=n.n(s)},814:function(t,e){},815:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),s=n(807),o=n(208),r=n.n(o);e.default={components:{Avatar:r.a},props:["userId"],data:function(){return{user:null,followLock:Object(s.a)(),visible:!1,top:0,left:0}},computed:{popoverStyle:function(){return{top:this.top+"px",left:this.left+"px"}},position:function(){return this.user&&(this.$userPosition(this.user)||this.user.self_description||"暂无简介")},self:function(){return this.user&&this.user.self},followed:function(){return this.user&&this.user.followed}},methods:{fetch:function(){var t=this;return this.$getBean("userBusiness").getUserById(this.userId).then(function(e){t.user=e})},toggleFollow:function(){var t=this;this.followLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(i.TOGGLE_FOLLOW_USER,t.user).catch(function(e){t.$error(e)})}).catch(function(){})})},showPopover:function(t){var e=this;clearTimeout(this.hideToken),this.showToken=setTimeout(function(){e.fetch().then(function(){e.showToken&&(e.visible=!0,e.$nextTick(function(){var n=t.target.getBoundingClientRect(),i=e.$refs.popover,s=i.offsetWidth,o=i.offsetHeight,r=n.left-s/2+20,a=n.top-o-10;a<60&&(r=n.left-10-s,a=n.top-o/2+10),r=Math.max(0,r),e.left=r,e.top=a}))})},300)},hidePopover:function(){var t=this;clearTimeout(this.showToken),this.showToken=null,this.hideToken=setTimeout(function(){t.popoverTimeout=null,t.visible=!1},300)}}}},816:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-popover-box",attrs:{"st:block":"userPopover","st:state":t.userId},on:{mouseenter:function(e){t.showPopover(e)},mouseleave:t.hidePopover}},[t.visible?n("div",{ref:"popover",staticClass:"user-popover",style:t.popoverStyle},[n("div",{staticClass:"info-row"},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}})],1),n("div",{staticClass:"user-info"},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.user),blank:!0}},[t._v(t._s(t.user.username))]),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),n("div",{staticClass:"meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.postedEntriesCount||0))]),n("div",{staticClass:"title"},[t._v("分享")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followersCount||0))]),n("div",{staticClass:"title"},[t._v("关注者")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.totalCollectionsCount||0))]),n("div",{staticClass:"title"},[t._v("获得喜欢")])])]),t.self?t._e():n("button",{staticClass:"follow-btn",class:{followed:t.followed},attrs:{"st:name":"followBtn"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}},[t._v(t._s(t.followed?"已关注":"关注"))])])]):t._e(),t._t("default")],2)},staticRenderFns:[]}},824:function(t,e,n){function i(t){n(825)}var s=n(24)(n(826),n(835),i,"data-v-151dc5e1",null);t.exports=s.exports},825:function(t,e){},826:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={welcome:n(827),timelineIndex:n(828),columnIndex:n(829),collectionIndex:n(830),exploreIndex:n(831),entryPublic:n(832),entryDetail:n(833),column:n(834)};e.default={components:{},props:["page"],data:function(){return{appUrl:"https://juejin.im/app",downloadUrl:""}},mounted:function(){var t=this.$route.name;this.downloadUrl=i[t]}}},827:function(t,e,n){t.exports=n.p+"static/img/welcome.6f27533.png"},828:function(t,e,n){t.exports=n.p+"static/img/timeline.e011f09.png"},829:function(t,e,n){t.exports=n.p+"static/img/zhuanlan.9e7bee2.png"},830:function(t,e,n){t.exports=n.p+"static/img/collections.eec2cd9.png"},831:function(t,e,n){t.exports=n.p+"static/img/explore.2a0f594.png"},832:function(t,e,n){t.exports=n.p+"static/img/entry.7c9ce29.png"},833:function(t,e,n){t.exports=n.p+"static/img/detail.6e4b8cc.png"},834:function(t,e,n){t.exports=n.p+"static/img/post.7cb7332.png"},835:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-download"},[n("div",{staticClass:"qr-box"},[n("img",{staticClass:"qr-img",attrs:{src:t.downloadUrl}})]),t._m(0),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:t.appUrl,expression:"appUrl",modifiers:{blank:!0}}],staticClass:"link"})])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-info"},[n("span",{staticClass:"headline"},[t._v("下载掘金客户端")]),n("span",{staticClass:"desc"},[t._v("一个帮助开发者成长的社区")])])}]}},860:function(t,e,n){var i,s,o;/*!
	Autosize 3.0.20
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,r){s=[e,t],i=r,void 0!==(o="function"==typeof i?i.apply(e,s):i)&&(t.exports=o)}(0,function(t,e){"use strict";function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function i(){var e=t.style.height,i=n(t),s=document.documentElement&&document.documentElement.scrollTop;t.style.height="auto";var o=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=o+"px",c=t.clientWidth,i.forEach(function(t){t.node.scrollTop=t.scrollTop}),s&&(document.documentElement.scrollTop=s)}function s(){i();var n=Math.round(parseFloat(t.style.height)),s=window.getComputedStyle(t,null),o=Math.round(parseFloat(s.height));if(o!==n?"visible"!==s.overflowY&&(e("visible"),i(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))):"hidden"!==s.overflowY&&(e("hidden"),i(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))),l!==o){l=o;var a=r("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var a=null,c=t.clientWidth,l=null,u=function(){t.clientWidth!==c&&s()},d=function(e){window.removeEventListener("resize",u,!1),t.removeEventListener("input",s,!1),t.removeEventListener("keyup",s,!1),t.removeEventListener("autosize:destroy",d,!1),t.removeEventListener("autosize:update",s,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",d,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",s,!1),window.addEventListener("resize",u,!1),t.addEventListener("input",s,!1),t.addEventListener("autosize:update",s,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:d,update:s}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),s()}()}}function i(t){var e=o.get(t);e&&e.destroy()}function s(t){var e=o.get(t);e&&e.update()}var o="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,i){-1===t.indexOf(n)&&(t.push(n),e.push(i))},delete:function(n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),e.splice(i,1))}}}(),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=a})},861:function(t,e,n){function i(t){n(880)}var s=n(24)(n(881),n(890),i,"data-v-746db1b2",null);t.exports=s.exports},862:function(t,e,n){function i(t){n(863)}var s=n(24)(n(864),n(865),i,"data-v-00a4671b",null);t.exports=s.exports},863:function(t,e){},864:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(56);e.default={props:["category","resourceType","resourceId","noPromotion"],data:function(){return{popupText:"",canOpenInApp:!1,shouldOpenInBrowserFirst:!1}},computed:{promotion:function(){return(this.category||"")+"高手都在看"}},methods:{onClick:function(){this.canOpenInApp?this.shouldOpenInBrowserFirst?this.showOpenInBrowserTip():this.$getBean("openInAppBusiness").openInApp(this.resourceType,this.resourceId):this.downloadApp()},showOpenInBrowserTip:function(){var t=this,e=Date.now();this.tipToken=e,this.popupText="请先在浏览器打开",window.setTimeout(function(){t.tipToken===e&&(t.popupText="")},3e3)},downloadApp:function(){this.$getBean("openInAppBusiness").openAppDownloadPage()}},mounted:function(){var t=this,e=this.$getBean("openInAppBusiness");this.canOpenInApp=e.canOpenInApp(this.$route.path),this.shouldOpenInBrowserFirst=e.shouldOpenInBrowserFirst(),this.removeEventListener=Object(i.e)(document,function(){if(!t.noPromotion){var e=document.documentElement.offsetHeight,n=window.screen.height,i=window.pageYOffset,s=e-n-i<=50;t.popupText=s?t.promotion:""}})},beforeDestroy:function(){this.removeEventListener()}}},865:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mobile-bottom-bar",attrs:{"st:block":"mobileBottomBar"}},[n("div",{staticClass:"bar-container"},[t._m(0),n("a",{staticClass:"button",attrs:{"st:name":"openInAppBtn"},on:{click:t.onClick}},[t._v(t._s(t.canOpenInApp?"打开应用":"立即下载")),n("div",{directives:[{name:"show",rawName:"v-show",value:t.popupText,expression:"popupText"}],staticClass:"pop-up"},[n("a",{staticClass:"pop-up-content"},[t._v(t._s(t.popupText))])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"left",attrs:{href:"https://juejin.im/about"}},[n("img",{attrs:{src:"https://gold-cdn.xitu.io/images/logo-bold.svg"}}),n("span",[t._v("一个帮助开发者成长的社区")])])}]}},866:function(t,e,n){function i(t){n(867)}var s=n(24)(n(868),n(873),i,"data-v-efcd2e56",null);t.exports=s.exports},867:function(t,e){},868:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),s=n.n(i),o=n(8),r=n(860),a=n.n(r),c=n(208),l=n.n(c),u=n(869),d=n.n(u);e.default={components:{Avatar:l.a,ImageUploader:d.a},props:["user","entry","vote","placeholder","type"],data:function(){return{content:"",isActionBoxVisible:!1,submitting:!1,metaKey:!1,ctrlKey:!1,enterKey:!1}},computed:{submitAction:function(){switch(this.type){case"book":return o.SUBMIT_BOOK_COMMENT;case"repo":return o.SUBMIT_REPO_COMMENT;default:return o.SUBMIT_COMMENT}}},watch:{content:function(t){t&&!this.user&&this.$requestRegister()}},methods:{focus:function(){this.$refs.input.focus()},blur:function(){this.content||(this.isActionBoxVisible=!1)},submit:function(){var t=this,e=this.entry,n=this.content.trim();return this.user?n?(this.submitting=!0,void this.uploadImage().then(function(i){return t.$store.dispatch(t.submitAction,{entry:e,content:n,imageUrl:i})}).then(function(){t.$barrage(t.content),t.$refs.imageUploader.cleanFile(),t.content="",t.submitting=!1,t.$nextTick(function(){a.a.update(t.$refs.input)}),t.$emit("submited")}).catch(function(e){t.submitting=!1,t.$error(e)})):void this.$alert("评论不能为空"):void this.$requestRegister()},uploadImage:function(){return this.$refs.imageUploader.file?this.$refs.imageUploader.upload():s.a.resolve()},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},quickSubmit:function(t){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.submit()}},mounted:function(){a()(this.$refs.input)}}},869:function(t,e,n){function i(t){n(870)}var s=n(24)(n(871),n(872),i,"data-v-54e3f196",null);t.exports=s.exports},870:function(t,e){},871:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(213),s=["jpg","png"];e.default={data:function(){return{file:null,url:null}},methods:{showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.file=t,window.URL.revokeObjectURL(this.url),this.url=t?window.URL.createObjectURL(t):null},cleanFile:function(){this.changeFile(null)},onActionBoxClick:function(){this.url?this.cleanFile():this.showFileDialog()},onFileSelected:function(t){var e=this;if(this.$refs.input.value=null,t)return this.isWithVaildSize(t)?void Object(i.a)(t,s).then(function(n){n?e.changeFile(t):e.$alert("不支持此格式的图片上传")}):void this.$alert("文件过大")},isWithVaildSize:function(t){return t.size<=1048576},upload:function(){return this.$getBean("uploadBusiness").uploadFile(this.file)}}}},872:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-uploader"},[n("input",{ref:"input",staticClass:"input",attrs:{type:"file"},on:{change:function(e){t.onFileSelected(e.target.files[0])}}}),t.url?n("div",{staticClass:"preview-box"},[n("img",{staticClass:"preview",attrs:{src:t.url}}),n("button",{staticClass:"clean-btn",attrs:{title:"移除图片"},on:{click:t.cleanFile}},[n("i",{staticClass:"ion-close-circled"})])]):n("button",{staticClass:"upload-btn",on:{click:t.showFileDialog}},[n("i",{staticClass:"icon ion-image"}),n("span",[t._v("上传图片")])])])},staticRenderFns:[]}},873:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-form",on:{click:function(t){t.stopPropagation()},keyup:function(e){e.stopPropagation(),t.listenerKeyup(e)},keydown:t.listenerKeykown}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"content-input",attrs:{placeholder:t.placeholder||"说说你的看法"},domProps:{value:t.content},on:{focus:function(e){t.isActionBoxVisible=!0},keyup:t.quickSubmit,input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||t.vote,expression:"isActionBoxVisible || vote"}],staticClass:"action-box"},[n("image-uploader",{directives:[{name:"show",rawName:"v-show",value:t.vote,expression:"vote"}],ref:"imageUploader",staticClass:"image-uploader"}),n("div",{staticClass:"submit-box"},[n("span",{staticClass:"submit-text"},[t._v("Ctrl or ⌘ + Enter")]),n("button",{staticClass:"submit-btn",on:{click:t.submit}},[t._v("评论")])])],1),t.submitting?n("div",{staticClass:"submitting-mask"},[t._v("提交中...")]):t._e()],1)},staticRenderFns:[]}},874:function(t,e,n){function i(t){n(875)}var s=n(24)(n(876),n(893),i,"data-v-51163f89",null);t.exports=s.exports},875:function(t,e){},876:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(56),s=n(877),o=n.n(s);e.default={components:{Comment:o.a},props:["list","entry","type"],methods:{fetchMoreIfConditionIsSatisfied:function(){Object(i.a)(this.$refs.list)>-200&&this.$emit("should-fetch-more")}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_SCROLL,function(){t.fetchMoreIfConditionIsSatisfied()}),Object(i.d)(this.$refs.list,function(){t.fetchMoreIfConditionIsSatisfied()})}}},877:function(t,e,n){function i(t){n(878)}var s=n(24)(n(879),n(892),i,"data-v-7f6a837b",null);t.exports=s.exports},878:function(t,e){},879:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),s=n(21),o=n(150),r=n(807),a=n(208),c=n.n(a),l=n(809),u=n.n(l),d=n(861),p=n.n(d);e.default={components:{Avatar:c.a,UserPopover:u.a,SubCommentBox:p.a},props:["comment","entry","type"],data:function(){return{isShowAll:!1,isSubCommentBoxActive:!1,likeLock:Object(r.a)()}},computed:{date:function(){return Object(s.c)(this.comment.createdAt)},displayedLikeCount:function(){return Object(o.a)(this.comment.likesCount)},replyPlaceholder:function(){return"对 "+this.comment.user.username+" 的回复"},toggleSubCommentBtnTitle:function(){var t=this.comment.subCount;return this.isSubCommentBoxActive?"收起评论":t?this.comment.subCount+"条评论":"评论"},limitedContent:function(){return this.$getBean("commentBusiness").limitCommentContent(this.comment.content)},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll},toggleLikeAction:function(){switch(this.type){case"book":return i.TOGGLE_LIKE_BOOK_COMMENT;case"repo":return i.TOGGLE_LIKE_REPO_COMMENT;default:return i.TOGGLE_LIKE_COMMENT}}},methods:{toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(t.toggleLikeAction,{comment:t.comment,entry:t.entry}).catch(function(e){t.$error(e)})}).catch(function(){})})}},mounted:function(){this.comment.createdAt=this.comment.createdAt}}},880:function(t,e){},881:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),s=n.n(i),o=n(5),r=n.n(o),a=n(8),c=n(807),l=n(56),u=n(36),d=n(882),p=n.n(d),f=n(886),m=n.n(f),h=(n(29),function(){return{page:1,total:0,list:[],fetchLock:Object(c.a)(),replyLock:Object(c.a)(),replyForm:{content:"",comment:null},metaKey:!1,ctrlKey:!1,enterKey:!1}});e.default={components:{SubComment:p.a,Pagination:m.a},props:["parent","entry","type"],data:h,computed:{isMobile:function(){return Object(u.d)()},pageSize:function(){return this.isMobile?20:5},replyPlaceholder:function(){var t=((this.replyForm.comment||{}).user||{}).username;return t?"回复 "+t+" ：":"输入评论"},shouldCancelReply:function(){return this.replyForm.comment&&!this.replyForm.content},canReply:function(){return!!this.replyForm.content.trim()},replyBtnTitle:function(){return this.shouldCancelReply?"取消":"评论"},totalPage:function(){return Math.max(Math.ceil(this.total/5),1)},startTime:function(){return this.list.length?this.list[this.list.length-1].createdAt:null},fetching:function(){return this.fetchLock.busy},empty:function(){return!this.list.length&&!this.fetching},commentBusiness:function(){switch(this.type){case"book":return this.$getBean("xiaoceCommentBusiness");case"repo":return this.$getBean("repoCommentBusiness");default:return this.$getBean("commentBusiness")}},replyAction:function(){switch(this.type){case"book":return a.REPLY_BOOK_COMMENT;case"repo":return a.REPLY_REPO_COMMENT;default:return a.REPLY_COMMENT}}},methods:{close:function(){this.$emit("close")},getTarUser:function(t){return t.replyCommentId!==this.parent.id?t.replyUser:null},prepareReply:function(t){this.$refs.replyInput.focus(),this.replyForm.content="",this.replyForm.comment=t},cancelReply:function(){this.replyForm.content="",this.replyForm.comment=null},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},reply:function(){var t=this,e={entry:this.entry,parent:this.parent,tar:this.replyForm.comment||this.parent,content:this.replyForm.content.trim()};this.replyLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(t.replyAction,e).then(function(){t.$barrage(t.replyForm.content),t.refresh()}).catch(function(e){t.$error(e)})}).catch(function(){})})},onReplyBtnClick:function(){this.shouldCancelReply?this.cancelReply():this.canReply&&this.reply()},quickSubmit:function(){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.reply()},refresh:function(){this.reset(),this.fetch()},fetch:function(){var t=this,e={commentId:this.parent.id,entryId:this.entry.id,page:this.page,pageSize:this.pageSize};return this.fetchLock.do(function(){return t.commentBusiness.getSubCommentList(e).then(function(e){t.list=e.list,t.total=e.total})}).catch(function(e){t.$error(e)})},gotoPage:function(t){var e=this;this.page=t,this.fetch().then(function(){Object(l.i)(e.$refs.subCommentBox,-110)})},fetchMore:function(){var t=this;this.fetchLock.do(function(){return t.commentBusiness.getSubCommentList({commentId:t.parent.id,entryId:t.entry.id,page:t.page+1,pageSize:t.pageSize}).then(function(e){t.page=t.page+1,t.list=t.list.concat(e.list),t.total=e.total}).then(function(){return new r.a(function(t){return window.setTimeout(t,500)})})}).catch(function(e){t.$error(e)})},reset:function(){s()(this,h())}},mounted:function(){var t=this;if(Object(l.f)(this.$refs.subCommentBoxInner,function(e){e<50&&t.fetchMore()}),this.$refs.replyInput.focus(),this.isMobile){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)}this.refresh()},beforeDestroy:function(){if(this.isMobile){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}}}},882:function(t,e,n){function i(t){n(883)}var s=n(24)(n(884),n(885),i,"data-v-6fdfc18a",null);t.exports=s.exports},883:function(t,e){},884:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),s=n(208),o=n.n(s),r=n(809),a=n.n(r);e.default={components:{Avatar:o.a,UserPopover:a.a},props:["comment","tarUser"],data:function(){return{isShowAll:!1}},computed:{date:function(){return Object(i.c)(this.comment.createdAt)},limitedContent:function(){return this.$getBean("commentBusiness").limitCommentContent(this.comment.content)},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll}},methods:{reply:function(){this.$emit("reply")}}}},885:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment"},[n("user-popover",{staticClass:"user-popover--avatar",attrs:{userId:t.comment.user.id}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user}})],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("user-popover",{staticClass:"user-popover--info",attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.tarUser?n("span",{staticClass:"text-reply"},[t._v("回复"),n("app-link",{attrs:{to:t.$userRoute(t.tarUser),blank:!0}},[n("span",{staticClass:"username"},[t._v(t._s(t.tarUser.username))])]),t._v("：")],1):t._e(),t.collapsed?n("span",{staticClass:"content-html collapsed"},[t._v(t._s(t.limitedContent))]):n("span",{directives:[{name:"parse-url",rawName:"v-parse-url",value:t.comment.content,expression:"comment.content"}],staticClass:"content-html"}),t.collapsed?n("span",{staticClass:"show-all",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开全部")]):t._e()]),n("div",{staticClass:"footer"},[n("span",{staticClass:"date"},[t._v(t._s(t.date))]),n("a",{staticClass:"reply-btn",on:{click:t.reply}},[t._v("回复")])])])],1)},staticRenderFns:[]}},886:function(t,e,n){function i(t){n(887)}var s=n(24)(n(888),n(889),i,"data-v-2c38f2aa",null);t.exports=s.exports},887:function(t,e){},888:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(151),s=n.n(i),o=n(87);e.default={props:["current","total"],computed:{canPrev:function(){return this.current>1},canNext:function(){return this.current<this.total},list:function(){var t=this.current,e=this.total;return e<=6?Object(o.a)(1,e):t<=4?[].concat(s()(Object(o.a)(1,4)),[!1,e]):t>=e-4?[1,!1].concat(s()(Object(o.a)(e-4,e))):[1,!1,t,t+1,!1,e]}},methods:{prev:function(){this.update(this.current-1)},next:function(){this.update(this.current+1)},update:function(t){this.$emit("update",t)},onItemClick:function(t){t&&this.update(t)}}}},889:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pagination"},[t.canPrev?n("li",{staticClass:"item",on:{click:t.prev}},[t._v("上一页")]):t._e(),t._l(t.list,function(e){return n("li",{staticClass:"item",class:{ellipsis:!e,current:e==t.current},on:{click:function(n){t.onItemClick(e)}}},[t._v(t._s(e||"..."))])}),t.canNext?n("li",{staticClass:"item",on:{click:t.next}},[t._v("下一页")]):t._e()],2)},staticRenderFns:[]}},890:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"subCommentBox",staticClass:"sub-comment-box",class:{"sub-comment-box__m":t.isMobile}},[n("div",{staticClass:"sub-comment-box__top"},[n("div",{staticClass:"icon-close",on:{click:t.close}}),n("h3",[t._v("评论")])]),n("div",{ref:"subCommentBoxInner",staticClass:"sub-comment-box__inner"},[t.empty?n("div",{staticClass:"empty-comment"},[t._m(0)]):n("div",[n("ul",{staticClass:"sub-comment-list"},t._l(t.list,function(e){return n("li",{key:e.id,staticClass:"item"},[n("sub-comment",{staticClass:"sub-comment",class:{"sub-comment__m":t.isMobile},attrs:{comment:e,tarUser:t.getTarUser(e)},on:{reply:function(n){t.prepareReply(e)}}})],1)})),t.totalPage>1?n("pagination",{staticClass:"pagination",attrs:{total:t.totalPage,current:t.page},on:{update:t.gotoPage}}):t._e()],1),n("form",{staticClass:"reply-form",on:{submit:function(t){t.preventDefault()},keyup:function(e){e.stopPropagation(),t.listenerKeyup(e)},keydown:t.listenerKeykown}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyForm.content,expression:"replyForm.content"}],ref:"replyInput",attrs:{maxlength:"1024",placeholder:t.replyPlaceholder},domProps:{value:t.replyForm.content},on:{keyup:t.quickSubmit,input:function(e){e.target.composing||t.$set(t.replyForm,"content",e.target.value)}}}),n("button",{staticClass:"reply-btn",on:{click:t.onReplyBtnClick}},[t._v(t._s(t.replyBtnTitle))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",[i("dt",[i("img",{attrs:{src:n(891)}})]),i("dd",[t._v("暂无评论")])])}]}},891:function(t,e,n){t.exports=n.p+"static/img/empty-comment.40bc8a6.svg"},892:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user}})],1)],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.comment.reply?n("span",[t._v("回复"),n("router-link",{attrs:{to:t.$userRoute(t.comment.reply.user)}},[n("span",{staticClass:"username"},[t._v(t._s(t.comment.reply.user.username))])]),t._v("：")],1):t._e(),t.collapsed?n("span",{staticClass:"content-html collapsed"},[t._v(t._s(t.limitedContent))]):n("span",{directives:[{name:"parse-url",rawName:"v-parse-url",value:t.comment.content,expression:"comment.content"}],staticClass:"content-html"}),t.collapsed?n("span",{staticClass:"show-all",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开全部")]):t._e()]),n("div",{staticClass:"footer"},[n("button",{staticClass:"like-btn",class:{liked:t.comment.liked},on:{click:t.toggleLike}},[n("i",{staticClass:"collection-arrow-ion ion-arrow-up-b"}),n("span",[t._v(t._s(t.displayedLikeCount))])]),n("span",{staticClass:"sub-comment-btn text-pointer",on:{click:function(e){t.isSubCommentBoxActive=!t.isSubCommentBoxActive}}},[n("span",{staticClass:"title"},[t._v(t._s(t.toggleSubCommentBtnTitle))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSubCommentBoxActive,expression:"isSubCommentBoxActive"}],staticClass:"sub-comment--arrow"})]),n("span",{staticClass:"date"},[t._v(t._s(t.date))])]),t.isSubCommentBoxActive?n("sub-comment-box",{staticClass:"sub-comment-box",attrs:{parent:t.comment,entry:t.entry,type:t.type},on:{close:function(e){t.isSubCommentBoxActive=!1}}}):t._e()],1)],1)},staticRenderFns:[]}},893:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"list",staticClass:"comment-list",attrs:{"st:block":"commentList"}},t._l(t.list,function(e,i){return n("li",{key:i,staticClass:"item"},[n("comment",{attrs:{comment:e,entry:t.entry,type:t.type}})],1)}))},staticRenderFns:[]}},901:function(t,e,n){"use strict";function i(t,e){t=t||{},e=e||t.parsedContent;var n=t.title||"",i=s(e)||t.content;return{title:n,keywords:o((t.tags||[]).map(function(t){return t.title})),description:r(i)}}function s(t){return(t||"").replace(/<.*?>/g,"")}function o(t){return t=t||[],t.join(",").replace(/[\r\n\s]+/g," ")}function r(t){return t=(t||"").trim().slice(0,130),t.replace(/[\r\n\s]+/g," ")}e.a=i,e.c=o,e.b=r;n(214)},904:function(t,e,n){function i(t){n(918)}var s=n(24)(n(919),n(932),i,"data-v-c0933c26",null);t.exports=s.exports},917:function(t,e,n){/**
 * juejin-lazyload v0.1.4
 * (c) 2017 WEBuster <webuster@xitu.io>
 * @license MIT
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,i),function(){t.removeEventListener(e,n,i)}}!function(){function t(t){this.value=t}function e(e){function n(s,o){try{var r=e[s](o),a=r.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):i(r.done?"return":"normal",r.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":s.resolve({value:e,done:!0});break;case"throw":s.reject(e);break;default:s.resolve({value:e,done:!1})}(s=s.next)?n(s.key,s.arg):o=null}var s,o;this._invoke=function(t,e){return new Promise(function(i,r){var a={key:t,arg:e,resolve:i,reject:r,next:null};o?o=o.next=a:(s=o=a,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s={threshold:0,interval:200,debounce:!1,reactive:!0,infoGetter:null,visibleAreaGetter:null,onStateChange:null};return function(){function o(t,n){e(this,o),this.setOptions(n),this.addOrUpdateElement(t),this.initEventListener()}return n(o,[{key:"setOptions",value:function(t){this.options=i({},s,t)}},{key:"initEventListener",value:function(){var e=this;if(this.options.reactive){var n=this.options.debounce?function(t,e){var n=0;return function(){for(var i=this,s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];clearTimeout(n),n=setTimeout(function(){return t.apply(i,o)},e)}}(function(){return e.updateState()},this.options.interval):function(t,e){var n=0;return e/=2,function(){for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];Date.now()-n>=e&&(n=Date.now(),setTimeout(function(){t.apply(null,s)},e))}}(function(){return e.updateState()},this.options.interval);this.removeScrollEventListener=t(window,"scroll",n),this.removeResizeEventListener=t(window,"resize",n)}}},{key:"removeEventListener",value:function(){this.removeScrollEventListener&&this.removeScrollEventListener(),this.removeResizeEventListener&&this.removeResizeEventListener()}},{key:"addOrUpdateElement",value:function(t){var e=this.getElementList(t),n=e.filter(function(t){return!t.__JUEJIN_LAZYLOAD});this.elementList=(this.elementList||[]).concat(n),e.forEach(this.initElement.bind(this)),this.updateState()}},{key:"removeElement",value:function(t){var e=this.getElementList(t);this.elementList=this.elementList.filter(function(t){return-1===e.indexOf(t)}),e.forEach(this.removeInfo.bind(this))}},{key:"clean",value:function(){this.elementList.forEach(this.removeInfo.bind(this)),this.elementList=[]}},{key:"getElementList",value:function(t){return t?"string"==typeof t?[].slice.call(document.querySelectorAll(t)):"number"==typeof t.length?[].slice.call(t):[t]:[]}},{key:"initElement",value:function(t){var e=this.options.infoGetter&&this.options.infoGetter(t),n=i({},e,{isImg:"IMG"===t.nodeName,loading:!1});n.hasPlaceholder=n.isImg&&n.width&&n.height,n.hasPlaceholder&&(t.src=function(t,e){return["data:image/svg+xml;utf8,",'<?xml version="1.0"?>','<svg xmlns="http://www.w3.org/2000/svg" version="1.1" ','width="'+t+'" height="'+e+'"',"></svg>"].join("")}(n.width,n.height)),t.__JUEJIN_LAZYLOAD=n,this.updateElementClassByState("inited",t),this.invokeStateHook("inited",n.url,t)}},{key:"removeInfo",value:function(t){t.__JUEJIN_LAZYLOAD&&(t.__JUEJIN_LAZYLOAD=null)}},{key:"updateState",value:function(){var t=this;if(this.elementList.length){var e=this.getActiveArea();this.elementList.forEach(function(n){var i=n.__JUEJIN_LAZYLOAD.loading,s=n.getBoundingClientRect(),o=function(t,e){return!(e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}(e,s);!i&&o&&t.loadIamge(n)})}}},{key:"getActiveArea",value:function(){var t=this.getVisibleArea(),e=this.options.threshold||0;return{top:t.top-e,left:t.left-e,right:t.right+e,bottom:t.bottom+e}}},{key:"getVisibleArea",value:function(){if(this.options.visibleAreaGetter)return this.options.visibleAreaGetter();var t=function(){var t=document.documentElement;return{width:Math.max(t.clientWidth,window.innerWidth||0),height:Math.max(t.clientHeight,window.innerHeight||0)}}();return{top:0,left:0,right:t.width,bottom:t.height}}},{key:"loadIamge",value:function(t){var e=this,n=t.__JUEJIN_LAZYLOAD,i=n.url,s=n.isImg;n.loading=!0,this.updateElementClassByState("loading",t),this.invokeStateHook("loading",i,t),function(t,e,n){if(t){var i=new Image;i.onload=function(){e&&e()},i.onerror=function(){n&&n()},i.src=t}}(i,function(){s?t.src=i:t.style.backgroundImage="url("+i+")",e.removeElement(t),e.updateElementClassByState("loaded",t),e.invokeStateHook("loaded",i,t)},function(){e.removeElement(t),e.updateElementClassByState("error",t),e.invokeStateHook("error",i,t)})}},{key:"updateElementClassByState",value:function(t,e){switch(t){case"inited":e.classList.add("inited"),e.classList.remove("loading"),e.classList.remove("loaded"),e.classList.remove("error");break;case"loading":e.classList.add("loading");break;case"loaded":e.classList.remove("loading"),e.classList.add("loaded");break;case"error":e.classList.remove("loading"),e.classList.add("error")}}},{key:"invokeStateHook",value:function(t,e,n){this.options.onStateChange&&this.options.onStateChange(t,e,n,this)}},{key:"destroy",value:function(){this.removeEventListener(),this.clean(),this.setOptions({})}}]),o}()})},918:function(t,e){},919:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={default:n(920),frontend:n(921),backend:n(922),android:n(923),ios:n(924),ai:n(925)},s={default:n(926),frontend:n(927),backend:n(928),android:n(929),ios:n(930),ai:n(931)};e.default={components:{},props:["entry","place"],data:function(){return{}},computed:{isMobileBanner:function(){return"footer"===this.place},tags:function(){return this.entry&&this.entry.tags||[]},category:function(){return this.entry&&this.entry.category&&this.entry.category.name||"default"},qrUrl:function(){return this.fromCategory()}},methods:{fromCategory:function(){this.category;return this.isMobileBanner?s[this.category]||s.default:i[this.category]||i.default}}}},920:function(t,e,n){t.exports=n.p+"static/img/default.e83ab57.png"},921:function(t,e,n){t.exports=n.p+"static/img/frontend.2ee7fa7.png"},922:function(t,e,n){t.exports=n.p+"static/img/backend.53f0af7.png"},923:function(t,e,n){t.exports=n.p+"static/img/android.fef4da1.png"},924:function(t,e,n){t.exports=n.p+"static/img/ios.c0a0c8c.png"},925:function(t,e,n){t.exports=n.p+"static/img/ai.de44155.png"},926:function(t,e,n){t.exports=n.p+"static/img/default.b4e3138.png"},927:function(t,e,n){t.exports=n.p+"static/img/frontend.ec382a9.png"},928:function(t,e,n){t.exports=n.p+"static/img/backend.ca17578.png"},929:function(t,e,n){t.exports=n.p+"static/img/android.adc945b.png"},930:function(t,e,n){t.exports=n.p+"static/img/ios.f827b0c.png"},931:function(t,e,n){t.exports=n.p+"static/img/ai.381c719.png"},932:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner-wx",class:{"banner-wx--mobile":t.isMobileBanner}},[n("img",{staticClass:"qr-img",attrs:{src:t.qrUrl}})])},staticRenderFns:[]}},986:function(t,e,n){function i(t){n(987)}var s=n(24)(n(988),n(989),i,"data-v-9db545a6",null);t.exports=s.exports},987:function(t,e){},988:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(808),s=n.n(i);e.default={components:{Thumb:s.a},props:["entry"]}},989:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry"},[n("app-link",{staticClass:"entry-link",attrs:{to:t.$entryDetailRoute(t.entry),blank:!0}},[n("thumb",{staticClass:"thumb",attrs:{url:this.entry.screenshot}}),n("div",{staticClass:"info"},[n("div",{staticClass:"row title-row"},[n("span",{staticClass:"title"},[t._v(t._s(t.entry.title))])]),n("div",{staticClass:"row meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"meta user"},[n("div",{staticClass:"username"},[t._v(t._s(t.entry.user.username))])]),t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon icon-likes iconfont icon-xlcollection"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon icon-comments iconfont icon-xlchatbox"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])])])],1)],1)},staticRenderFns:[]}},990:function(t,e,n){function i(t){n(991)}var s=n(24)(n(992),n(993),i,"data-v-2b5b4e9e",null);t.exports=s.exports},991:function(t,e){},992:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(808),s=n.n(i);e.default={components:{Thumb:s.a},props:["entry"]}},993:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry-aside"},[n("app-link",{staticClass:"title",attrs:{to:t.$entryDetailRoute(t.entry),blank:!0}},[t._v(t._s(t.entry.title))]),n("ul",{staticClass:"meta-list"},[t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon ion-heart"}),n("span",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon ion-chatbox"}),n("span",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])],1)},staticRenderFns:[]}},994:function(t,e,n){function i(t){n(995)}var s=n(24)(n(996),n(997),i,"data-v-1b78470d",null);t.exports=s.exports},995:function(t,e){},996:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={components:{},props:["show","isLike","likeCount","weixinShareQr"],data:function(){return{canLike:!0}},methods:{toggleLike:function(){var t=this;this.canLike&&(this.canLike=!1,this.$emit("toggleLike"),setTimeout(function(){t.canLike=!0},500))},shareToWeibo:function(){this.$emit("shareToWeibo")}},mounted:function(){}}},997:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"article-suspending-panel",class:{show:t.show},attrs:{"st:block":"articleSuspendingPanel"}},[n("li",{attrs:{"st:name":"likeItem"}},[n("div",{staticClass:"action shadow action-like",class:{"action-like-active":t.isLike},on:{click:t.toggleLike}}),n("div",{staticClass:"like-count align-center"},[t._v(t._s(t.likeCount))])]),t._m(0),n("li",{attrs:{"st:name":"shareItem","st:state":"weibo"}},[n("a",{staticClass:"action shadow action-weibo",on:{click:function(e){e.preventDefault(),t.shareToWeibo(e)}}})]),n("li",{attrs:{"st:name":"shareItem","st:state":"wechat"}},[n("div",{staticClass:"action shadow action-weixin"}),n("div",{staticClass:"wx-qr-img"},[n("img",{attrs:{src:t.weixinShareQr}})])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{attrs:{"st:name":"commentItem"}},[n("a",{staticClass:"action shadow action-comment",attrs:{href:"#comment"}})])}]}}});