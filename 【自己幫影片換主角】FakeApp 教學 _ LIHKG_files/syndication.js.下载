!function(){function t(t){return function(t){for(var e="",a=0;a<4*t.length;a+=3)for(var i=(t[a>>2]>>8*(3-a%4)&255)<<16|(t[a+1>>2]>>8*(3-(a+1)%4)&255)<<8|t[a+2>>2]>>8*(3-(a+2)%4)&255,o=0;o<4;o++)8*a+6*o>32*t.length?e+=_:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6*(3-o)&63);return e}(function(t,i){t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(var o=Array(80),n=1732584193,s=-271733879,r=-1732584194,l=271733878,d=-1009589776,c=0;c<t.length;c+=16){for(var h=n,p=s,u=r,f=l,m=d,g=0;g<80;g++){o[g]=g<16?t[c+g]:a(o[g-3]^o[g-8]^o[g-14]^o[g-16],1);var y=e(e(a(n,5),function(t,e,a,i){return t<20?e&a|~e&i:t<40?e^a^i:t<60?e&a|e&i|a&i:e^a^i}(g,s,r,l)),e(e(d,o[g]),function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}(g)));d=l,l=r,r=a(s,30),s=n,n=y}n=e(n,h),s=e(s,p),r=e(r,u),l=e(l,f),d=e(d,m)}return Array(n,s,r,l,d)}(function(t){for(var e=Array(),a=(1<<T)-1,i=0;i<t.length*T;i+=T)e[i>>5]|=(t.charCodeAt(i/T)&a)<<32-T-i%32;return e}(t),t.length*T))}function e(t,e){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}function a(t,e){return t<<e|t>>>32-e}if(void 0===window.ypaAds){var o,n=document,s=n.location,r=s.protocol,l=r.match(/^https?:$/)?r:"https:",d="partnerads.ysm.yahoo.com",c=window,h=c.navigator.userAgent.toLowerCase(),p=function(t){return-1!==h.indexOf(t)},u=-1,f=n.getElementsByTagName("head")[0]||n.documentElement,m={},g=function(t){for(var e=0;e<t.waiting.length;e++)t.waiting[e].moduleLoaded(t.module);t.waiting=[]},y=function(t,e){var a=m[t];return a?a.loaded?e.moduleLoaded(a.module):a.waiting.push(e):function(t){m[t.name]=t;var e=M.MODULE_URL_ROOT+t.name+".js",a=n.createElement("script"),i=!1;a.src=e,a.onload=a.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,t.loaded=!0,a.onload=a.onreadystatechange=null,setTimeout(function(){f&&a.parentNode&&f.removeChild(a)},M.MODULE_EXECUTION_TIMEOUT))},f.insertBefore(a,f.firstChild),setTimeout(function(){t.loaded||t.module&&!M.GLOBAL_MODULES[t.name]||g(t)},M.MODULE_LOAD_TIMEOUT)}(a={name:t,waiting:[e],loaded:!1}),a},v=function(t,e,a){this.modules=[],this.modulesCount=t.length,this.callback=e,this.callbackContext=a;for(var i=0;i<t.length;i++)y(t[i],this)},A=c.navigator,S=c.screen,_="=",T=8,C=[],O=n.documentElement,E=function(){for(var t=c.pageYOffset||O.scrollTop||n.body.scrollTop,e=c.pageXOffset||O.scrollLeft||n.body.scrollLeft,a=c.innerWidth,i=c.innerHeight,o=0;o<C.length;){var s=1,r=C[o].ele,l=V(r),d=l[0],h=l[1],p=r.offsetWidth,u=r.offsetHeight;r.parentElement?d>=e&&h>=t&&d+p<=e+a&&h+u<=t+i&&(C[o].callback.call(C[o].callbackContext),C[o].multiple||(C.splice(o,1),s=0)):(C.splice(o,1),s=0),o+=s}},b=function(t,e){Y(t),t.exTQ&&(z(t),delete t.exTQ),e.beaconInstance=new K(t,e);for(var a=0;a<e.beacons.length;a++)e.beaconInstance.fireBeacon(e.beacons[a][0],e.beacons[a][1]);e.beacons=[]},k=function(t,e,a){a&&(a.spaceid=a.spaceid||M.FALLBACK_SPACE_ID,t.cono&&(a.CoNo=t.cono)),t.fireBeaconBool&&(t.beaconInstance?t.beaconInstance.fireBeacon(e,a):"AdServeEvent"===e?t.adServeData=a:t.beacons.push([e,a]))},B=encodeURIComponent,w={},L=(new Date).getTime(),I={callDetailsObj:null,callDetails:[],validSlots:[],curDetails:0,isYCPI:!1,resetGlobals:function(){I.validSlots=[],I.callDetailsObj=null}},M={HOST_NAME:d,HOST_URL:l+"//"+d,COMPRESS_KEYS:["fontsize","color","underline","bold","onHover.color","onHover.underline"],ENTITIES_KEYS:["Title","Description","URL","LocalAds","MerchantRating","SiteLink","EnhancedSiteLink","SmartAnnotations","OfficialSiteBadge","CallExtension","CalloutExtension","ReviewExtension","FourthLine"],SHORTEN_NAME:{SponsoredSearch:"ss",adultFilter:"af",clickBeaconServer:"cbs",serveBeaconServer:"sbs",Mobile:"mo",SrcTag:"st",DeskTop:"dt",TemplateOptions:"sto",AdOptions:"sao",font:"fo",cssLink:"cl",AdRange:"ar",Title:"ti",URL:"url",Description:"de",Lat:"lat",LocalAds:"la",MerchantRating:"mr",SiteLink:"sl",EnhancedSiteLink:"esl",SmartAnnotations:"smt",OfficialSiteBadge:"osb",CallExtension:"cex",CalloutExtension:"coe",ReviewExtension:"rve",FourthLine:"fla",Favicon:"fa",AdUnitLabel:"aul",ImageInAds:"iia",AdUnit:"au",fontsize:"fs",color:"co",backgroundColor:"bgc",borderColor:"bco",underline:"ul",bold:"bo",onHover:"oh",lineSpacing:"ls",adSpacing:"as",urlAboveDescription:"uad",adLayout:"al",labelId:"la",position:"po",align:"ali",size:"si",appendToImageSrcUrl:"aiu"},IFRAME_LOAD_TIMEOUT:7500,IFRAME_EXECUTION_TIMEOUT:500,AD_BLOCK_CHECK_WAIT:250,MODULE_LOAD_TIMEOUT:5e3,MODULE_EXECUTION_TIMEOUT:500,MODULE_URL_ROOT:l+"//"+("http:"===l?"l":"s")+".yimg.com/uv/dm/scripts/",FIRE_BEACON_PERCENTAGE:5,FALLBACK_SPACE_ID:"1197646563",NO_VALID_SLOTS_ERROR_BIT:0,SLOTS_CALL_FAILED_ERROR_BIT:1,AD_BLOCK_ENABLED_ERROR_BIT:2,LIGHTHOUSE_BEACON_SPACEID:"1197646563",FIRE_LIGHTHOUSE_BEACON_PERCENTAGE:1,YCPI_BUCKET_BIT:0,RAPID_BUCKET_BIT:1,LIGHTHOUSE_BUCKET_BIT:2,MANUAL_BEACON_URL:l+"//geo.yahoo.com/p?"},R=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},D=function(t){return null!==t&&void 0!==t},H=function(t){return D(t)?(-1===u&&(u=p("mobile")&&p("android")||p("iphone")||p("ipod")||(p("blackberry")||p("bb10")||p("rim"))&&p("phone")||p("windows")&&p("phone")||p("(mobile;")&&p("; rv:")||p("meego"),H.deviceKey=u?"Mobile":"DeskTop"),u?delete t.DeskTop:delete t.Mobile,t):null},N=function(t,e){if("object"===R(t)){var a={};for(var i in t)t.hasOwnProperty(i)&&1!==a[i]&&(N(t[i],e),e[i]&&(t[e[i]]=t[i],a[e[i]]=1),delete t[i])}else if("array"===R(t)&&t.length)for(var o=0;o<t.length;o++)N(t[o],e)},P={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,a,i,o,n,s,r,l="",d=0;for(t=P._utf8_encode(t);d<t.length;)o=(e=t.charCodeAt(d++))>>2,n=(3&e)<<4|(a=t.charCodeAt(d++))>>4,s=(15&a)<<2|(i=t.charCodeAt(d++))>>6,r=63&i,isNaN(a)?s=r=64:isNaN(i)&&(r=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(n)+this._keyStr.charAt(s)+this._keyStr.charAt(r);return l},decode:function(t){var e,a,i,o,n,s,r="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)e=this._keyStr.indexOf(t.charAt(l++))<<2|(o=this._keyStr.indexOf(t.charAt(l++)))>>4,a=(15&o)<<4|(n=this._keyStr.indexOf(t.charAt(l++)))>>2,i=(3&n)<<6|(s=this._keyStr.indexOf(t.charAt(l++))),r+=String.fromCharCode(e),64!=n&&(r+=String.fromCharCode(a)),64!=s&&(r+=String.fromCharCode(i));return r=P._utf8_decode(r)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var i=t.charCodeAt(a);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},_utf8_decode:function(t){for(var e="",a=0,i=c1=c2=0;a<t.length;)(i=t.charCodeAt(a))<128?(e+=String.fromCharCode(i),a++):i>191&&i<224?(c2=t.charCodeAt(a+1),e+=String.fromCharCode((31&i)<<6|63&c2),a+=2):(c2=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),a+=3);return e}},U=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+t()+t()}}(),x={_deepSearch:function(t,e,a){var i=e.split(/\./),o=0;for(o=0;o<i.length-1;o++)if(t[i[o]])t=t[i[o]];else{if(!a)return null;t[i[o]]={},t=t[i[o]]}return[t,i[o],t[i[o]]]},exists:function(t,e){var a=x._deepSearch(t,e);return D(a)&&D(a[2])},assignValue:function(t,e,a){var i=x._deepSearch(t,e,1);i&&(i[0][i[1]]=a)},getValue:function(t,e){var a=x._deepSearch(t,e);return a&&a[2]},deleteKey:function(t,e){var a=x._deepSearch(t,e);a&&delete a[0][a[1]]}},W=function(t,e,a){t.addEventListener?t.addEventListener(e,a,!1):t.attachEvent?t.attachEvent("on"+e,a):t["on"+e]=a},F={loadModules:function(t,e,a){new v(t,e,a)},registerModule:function(t,e){var a=m[t];a?(a.module=e,g(a)):m[t]={name:t,loaded:!0,module:e}}},Q=function(t,e){n.createElement("img").src=M.MANUAL_BEACON_URL+"s="+M.FALLBACK_SPACE_ID+"&_E="+t+"&CoNo="+e+"&t="+Math.random()+"&e_s=m"},K=function(t,e){this.data=t,this.rapid=null,this.waiting=[],this.call=e,this.init()},Y=function(t){var e=A.plugins;t.TQpn=e?e.length:e,e=A.mimeTypes,t.TQmn=e?e.length:e,t.TQtab=c.name,e=c.history,t.TQth=e?e.length:e,t.TQlc=!!c.localStorage,t.TQh=S.height,t.TQw=S.width,t.TQpd=S.colorDepth,t.TQah=S.availHeight,t.TQaw=S.availWidth,t.TQih=c.innerHeight,t.TQoh=c.outerHeight,t.TQiw=c.innerWidth,t.TQow=c.outerWidth,t.TQsys=A.platform,t.TQto=(new Date).getTimezoneOffset(),t.TQjv=A.javaEnabled(),t.TQps=A.productSub,t.TQapp=A.appName,e=A.language,t.TQlg=e||A.browserLanguage},z=function(t){for(var e=A.plugins,a=Math.min(e.length,20),i=[],o=0;o<a;o++){(s={}).desc=e[o].description,s.fn=e[o].filename,s.ln=e[o].length,s.name=e[o].name,i.push(s)}t.TQpn=i,e=A.mimeTypes,a=Math.min(e.length,20);var n=[];for(o=0;o<a;o++){var s;(s={}).desc=e[o].description,s.suf=e[o].suffixes,s.type=e[o].type,s.pln=e[o].enabledPlugin.filename,n.push(s)}t.TQmn=n},t=t,V=function(t){var e=0,a=0;if(t.offsetParent)do{e+=t.offsetLeft,a+=t.offsetTop}while(t=t.offsetParent);return[e,a]},G=function(t){var e="";if("array"===R(t)){e="[";for(var a=0;a<t.length;a++)e+=G(t[a])+(a<i.length-1?",":"");e+="]"}else if("object"===R(t)){var i=[];e="{";for(var o in t)t.hasOwnProperty(o)&&i.push(o);i=i.sort();for(a=0;a<i.length;a++)e+=i[a]+":"+G(t[i[a]])+(a<i.length-1?",":"");e+="}"}else e+=t;return e},j={adSlotCallbackWrapper:function(t){if(t.bd&&(this.bd=t.bd,t.bd.adServeData&&this.call.serveBeacon(t.bd.adServeData),this.call.slotBeacon(t.bd.adSlotData),t.bd.viewAdsData&&function(t,e,a,i){C.push({ele:t,callback:e,callbackContext:a,multiple:i}),E()}(this.adframe,function(){this.bd.viewAdsData.viewTS=(new Date).getTime(),this.call.viewAdsBeacon(this.bd.viewAdsData)},this)),t.cbd){t.cbd.clkTS=(new Date).getTime();var e=V(this.adframe);t.cbd.clkX+=e[0],t.cbd.clkY+=e[1],this.call.clickBeacon(t.cbd)}this.iframeHasReturned||(this.iframeHasReturned=!0,this.call.adSlotCallback(this))},adSlotCallback:function(t){this.slotCallbackWaitMap[t.slotId]&&(delete this.slotCallbackWaitMap[t.slotId],this.slotCallbackWaitCount--,0===this.slotCallbackWaitCount&&this.allSlotsReturned())},allSlotsReturned:function(){this.lh&&(this.lh.mark("mark_call_returned"),this.lh.measure("ad_request_delay",{startMark:"mark_script_beg",endMark:"mark_ad_requested"}),this.lh.measure("ad_call_delay",{startMark:"mark_ad_requested",endMark:"mark_call_made"}),this.lh.measure("ad_response_delay",{startMark:"mark_call_made",endMark:"mark_call_returned"})),this.fireBeaconBool&&(Q("AdsReturned",this.cono),!this.adServeData||this.failedSlots.length>0?(this.adServeData=this.adServeData||{aC:this.c,st:0,spaceid:M.FALLBACK_SPACE_ID,CoNo:this.cono},this.handleCallFailure(this.adServeData,function(t){b(t,this)})):(this.adServeData.st=0,b(this.adServeData,this)))},serveBeacon:function(t){k(this,"AdServeEvent",t)},slotBeacon:function(t){k(this,"AdSlotServeEvent",t)},clickBeacon:function(e){var a={};window.JSON&&(Y(a),e.TQfp=t(G(a))),k(this,"AdClickEvent",e)},viewAdsBeacon:function(t){k(this,"ViewAdsEvent",t)},handleCallFailure:function(t,e){var a=this,i=this.validSlots.length>0?this.validSlots[0].ad_div:null,o=this.failedSlots.map?this.failedSlots.map(function(t){return t.slotId}):[];if(t.st|=(0===this.validSlots.length)<<M.NO_VALID_SLOTS_ERROR_BIT,o.length>0&&(t.fs=o.join(":"),t.st|=1<<M.SLOTS_CALL_FAILED_ERROR_BIT),i)try{var s=n.createElement("div");s.className="text-ad textAd text_ad text_ads text-ads text-ad-links",s.style="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",s.innerHTML="test",i.appendChild(s),setTimeout(function(){try{var i=null!==n.body.getAttribute("abp")||null===s.offsetParent||0==s.offsetHeight||0==s.offsetLeft||0==s.offsetTop||0==s.offsetWidth||0==s.clientHeight||0==s.clientWidth;if(void 0!==c.getComputedStyle){var o=c.getComputedStyle(s,null);i=i||"none"==o.getPropertyValue("display")||"hidden"==o.getPropertyValue("visibility")}t.st|=i<<M.AD_BLOCK_ENABLED_ERROR_BIT,e.call(a,t),s.remove&&s.remove()}catch(i){e.call(a,t)}},M.AD_BLOCK_CHECK_WAIT)}catch(i){e.call(a,t)}else e.call(this,t)}},J=function(t,e){this.call=t,this.options=e,this.url="",this.psti="",this.psb="",this.iframeHasLoaded=!1,this.iframeHasReturned=!1},q=function(){var t=c.performance||c.webkitPerformance||c.msPerformance||c.mozPerformance||c.Performance||{};return t.now=t.now||t.webkitNow||t.msNow||t.mozNow||function(){return(new Date).getTime()-L},t},X=function(t){this.waiting=[],this.m={},this.call=t,window.LH?this.lighthouseLoaded(window.LH):F.loadModules(["lh"],this.lighthouseLoaded,this)},$=function(t){I.callDetails.push(this),this.options=t,this.cono=U();try{this.optionsCopy=JSON.parse(JSON.stringify(t))}catch(t){}this.ts=0,this.c=t.ypaAdConfig||"",this.h="1",this.wd="1",this.tv=t.ypaAdTrafficType||"",this.pg=t.ypaPageCount||"",this.tt=t.ypaPubParams&&t.ypaPubParams.query||"",this.lo=t.ypaPubParams&&t.ypaPubParams.location||"",this.ty=t.ypaAdTypeTag||"",this.ie=t.ypaPubParams&&t.ypaPubParams.inputCharEnc||"",this.oe=t.ypaPubParams&&t.ypaPubParams.outputCharEnc||"",this.tg=t.ypaClickTarget||"",this.ao="",this.si="",this.validSlots=[],this.failedSlots=[],this.beacons=[],this.fireBeaconBool=100*Math.random()<M.FIRE_BEACON_PERCENTAGE,this.fireLHBeacon=this.fireBeaconBool&&Math.random()<M.FIRE_LIGHTHOUSE_BEACON_PERCENTAGE/M.FIRE_BEACON_PERCENTAGE,this.dT=this.fireBeaconBool<<M.RAPID_BUCKET_BIT|I.isYCPI<<M.YCPI_BUCKET_BIT|this.fireLHBeacon<<M.LIGHTHOUSE_BUCKET_BIT,this.slotCallbackWaitMap={},this.slotCallbackWaitCount=0,this.isWaitingForSlots=!1,this.fireLHBeacon&&(this.lh=new X(this),this.lh.mark("mark_ad_requested")),this.fireBeaconBool&&Q("AdRequested",this.cono)};I.isYCPI=!0,v.prototype.moduleLoaded=function(t){this.modules.push(t),this.modules.length===this.modulesCount&&this.callback.apply(this.callbackContext,this.modules)},void 0===window.YAHOO&&(window.YAHOO={}),window.YAHOO.AsyncModuleLoader=F,K.prototype.init=function(){window.YAHOO&&window.YAHOO.i13n&&window.YAHOO.i13n.Rapid?this.fire(window.YAHOO.i13n.Rapid):F.loadModules(["rapid"],this.fire,this)},K.prototype.fire=function(t){var e=this.call;if(t){Q("InstantiateRapid",e.cono);var a=this.data.spaceid;this.data.e_s="r",delete this.data.spaceid,this.rapid=new t({spaceid:a,keys:this.data,apv:!1}),this.rapid.clearRapidAttribute(["keys"]);for(var i=0;i<this.waiting.length;i++)this.fireBeacon.apply(this,this.waiting[i]);e.lh&&e.lh.beacon(this),this.waiting=[]}else Q("RapidJSLoadFailure",e.cono)},K.prototype.fireBeacon=function(t,e){if(e&&(e.e_s="r"),this.rapid)switch(t){case"AdClickEvent":this.rapid.beaconClick(e.sec,e.slk,e._p,e);break;case"AdPerfEvent":this.rapid.beaconPerformanceData(e);break;default:e&&(e.bts=(new Date).getTime()),this.rapid.beaconEvent(t,e)}else this.waiting.push([t,e])},W(window,"scroll",E),W(window,"resize",E),J.prototype.validate=function(){var t=this.options;return t.ypaAdSlotId="string"===R(t.ypaAdSlotId)&&t.ypaAdSlotId.match(/^[\w-]+$/)?t.ypaAdSlotId:"",""!==t.ypaAdSlotId&&(t.ypaAdDivId="string"===R(t.ypaAdDivId)&&t.ypaAdDivId.match(/^[\w-]+$/)?t.ypaAdDivId:"",""!==t.ypaAdDivId&&null!=n.getElementById(t.ypaAdDivId)?(t.ypaAdWidth="string"===R(t.ypaAdWidth)&&t.ypaAdWidth.match(/^\d+(?:%|px)?$/)?t.ypaAdWidth:"0","0"!==t.ypaAdWidth&&(t.ypaAdHeight="string"===R(t.ypaAdHeight)&&t.ypaAdHeight.match(/^\d+$/)?t.ypaAdHeight:"0","0"!==t.ypaAdHeight&&(t.ypaAdResize=("boolean"!==R(t.ypaAdResize)||0!=t.ypaAdResize)&&void 0,t.ypaOnAd="function"===R(t.ypaOnAd)?t.ypaOnAd:"null",t.ypaOnNoAd="function"===R(t.ypaOnNoAd)?t.ypaOnNoAd:"null",t.clickBeacon="string"===R(t.clickBeacon)&&t.clickBeacon.match(/[^?\/]$/)?t.clickBeacon:"",t.serveBeacon="string"===R(t.serveBeacon)&&t.serveBeacon.match(/[^?\/]$/)?t.serveBeacon:"",this.slotId=t.ypaAdSlotId,!0))):void 0)},J.prototype.buildSi=function(){var t=this.options,e=this.call,a=t.ypaAdSlotId+":"+t.ypaAdWidth+"x"+t.ypaAdHeight,i="",o="",n="";try{t.ypaSlotOptions&&(t.ypaSlotOptions.TemplateOptions=H(t.ypaSlotOptions.TemplateOptions),t.ypaSlotOptions.AdOptions=H(t.ypaSlotOptions.AdOptions),t.ypaSlotOptions.TemplateOptions&&function(t,e,a){if(!t||!e||!a)return t;for(var i={},o=0;o<e.length;o++){var n=e[o];if(t[n])for(var s=0;s<a.length;s++){var r=a[s];if(i[r]=i[r]||{max:1,valueMap:{},emptyEntities:[]},x.exists(t[n],r)){var l=x.getValue(t[n],r);l.trim&&(l=l.trim()),i[r].valueMap[l]=i[r].valueMap[l]||{entities:[],count:0,effectiveness:-1-i[r].emptyEntities},i[r].valueMap[l].count++,i[r].valueMap[l].effectiveness++,i[r].valueMap[l].entities.push(n),i[r].valueMap[l].count>i[r].max&&(i[r].max=i[r].valueMap[l].count,i[r].maxVal=l)}else{for(var d in i[r].valueMap)i[r].valueMap.hasOwnProperty(d)&&i[r].valueMap[d].effectiveness--;i[r].emptyEntities.push(n)}}}for(var d in i)if(i.hasOwnProperty(d)&&D(i[d].maxVal)){var c=i[d].valueMap[i[d].maxVal];if(c.effectiveness>0){for(o=0;o<c.entities.length;o++)x.deleteKey(t[c.entities[o]],d);for(o=0;o<i[d].emptyEntities.length;o++)x.assignValue(t[i[d].emptyEntities[o]],d,"__");x.assignValue(t,d,i[d].maxVal)}}}(t.ypaSlotOptions.TemplateOptions[H.deviceKey],M.ENTITIES_KEYS,M.COMPRESS_KEYS),N(t.ypaSlotOptions,M.SHORTEN_NAME),t.ypaSlotOptions.sto&&(this.psti=JSON.stringify(t.ypaSlotOptions.sto)),t.ypaSlotOptions.sao&&(i=JSON.stringify(t.ypaSlotOptions.sao))),""!==i&&(a=a+"&psai="+P.encode(i)),t.serveBeacon?o=P.encode(t.serveBeacon):e.options.ypaAdTagOptions.serveBeacon&&(o=P.encode(e.options.ypaAdTagOptions.serveBeacon)),t.clickBeacon?n=P.encode(t.clickBeacon):e.options.ypaAdTagOptions.clickBeacon&&(n=P.encode(e.options.ypaAdTagOptions.clickBeacon)),o&&""!==o&&(this.psb="pssb="+o),n&&""!==n&&(""!==this.psb?this.psb=this.psb+"&pscb="+n:this.psb="pscb="+n)}catch(t){}return a},J.prototype.makeCall=function(t){var e=this.options,a=e.ypaAdDivId+"-iframe",i=n.getElementById(a),o=this.call.si,s=n.getElementById(e.ypaAdDivId),r=n.createElement("iframe"),l="",d=e.ypaAdWidth,c=/^(\d+)$/.exec(d),h=this;o.split(/,/).forEach(function(t){var e=new RegExp("^"+h.options.ypaAdSlotId);l=t.match(e)?""==l?h.psb?t+"&"+h.psb:t:h.psb?l+","+t+"&"+h.psb:l+","+t:""==l?t:l+","+t});var p=l.replace(e.ypaAdSlotId,"p-"+e.ypaAdSlotId);w[a]=this,i&&i.remove&&i.remove(),c&&(d=c[1]+"px"),t+="&si="+B(p),""!==this.psti&&(t+="&psti="+P.encode(this.psti)),this.url=t,this.ad_div=s,this.adframe=r,r.id=a,r.name=a,r.src=t,r.frameBorder="0",r.marginWidth="0",r.marginHeight="0",r.scrolling="no",r.width=d,r.height=e.ypaAdHeight,r.allowTransparency="true",setTimeout(function(){h.iframeLoaded()},M.IFRAME_LOAD_TIMEOUT),W(r,"load",function(t){h.iframeLoaded()}),s.appendChild(r)},J.prototype.iframeLoaded=function(){if(!this.iframeHasLoaded){this.iframeHasLoaded=!0;var t=this;setTimeout(function(){t.iframeHasReturned||(t.iframeHasReturned=!0,t.call.failedSlots.push(t),t.call.adSlotCallback(t))},M.IFRAME_EXECUTION_TIMEOUT)}},J.prototype.adSlotCallback=function(t){var e=this.options,a=t.aC;t.cb&&(a||"function"===R(e.ypaOnNoAd)&&e.ypaOnNoAd(t.cb.errObj,this.options)),!t.rs||void 0!=e.ypaAdResize&&0==e.ypaAdResize||(this.adframe.height=a?t.rs.eH:0),this.adSlotCallbackWrapper(t)},J.iframeIdToSlotMap=w,J.prototype.adSlotCallbackWrapper=j.adSlotCallbackWrapper,o={name:"mark_script_beg",type:"mark",duration:0,startTime:q().now()},X.prototype.lighthouseLoaded=function(t){if(t){this.LH=t,t.init({spaceid:M.LIGHTHOUSE_BEACON_SPACEID,pvid:this.call.cono,rapidOnly:!0,tags:{conf_id:this.call.c,b:"test"}}),t.record("mark_script_beg",o),this.m.mark_script_beg=o;for(var e=0;e<this.waiting.length;e++)t[this.waiting[e].method].apply(this.LH,this.waiting[e].args);this.waiting=[]}},X.prototype.mark=function(t){if(this.LH)this.m[t]=this.LH.mark(t);else{var e={name:t,type:"mark",duration:0,startTime:q().now()};this.m[t]=e,this.waiting.push({method:"record",args:[t,e]})}},X.prototype.measure=function(t,e){var a=this.m;e.startMark&&a[e.startMark]&&(e.startMark=a[e.startMark]),e.endMark&&a[e.endMark]&&(e.endMark=a[e.endMark]),this.LH?this.LH.measure(t,e):this.waiting.push({method:"measure",args:[t,e]})},X.prototype.beacon=function(t){var e=this.LH;this.LH&&(t&&t.rapid&&t.fireBeacon("AdPerfEvent",{perf_usertime:e.rapidUserMetrics()}),e.clearMarks(),e.clearMeasures(),e.clearCustomEntries(),e.clearTags())},$.prototype.validate=function(){if("array"!==R(this.options.ypaAdSlotInfo))return!1;for(i=0;i<this.options.ypaAdSlotInfo.length;i++){var t=new J(this,this.options.ypaAdSlotInfo[i]);t.validate()&&(this.validSlots.push(t),""!==this.si&&(this.si+=","),this.si+=t.buildSi())}return this.validSlots.length>0},$.prototype.makeCall=function(){var t=this.options;if(t.ypaAdTagOptions&&"object"===R(t.ypaAdTagOptions)){for(var e in t.ypaAdTagOptions)t.ypaAdTagOptions.hasOwnProperty(e)&&(t.ypaAdTagOptions[e]=H(t.ypaAdTagOptions[e]));t.ypaAdTagOptions.serveBeaconServer&&t.ypaAdTagOptions.clickBeaconServer&&t.ypaAdTagOptions.serveBeaconServer===t.ypaAdTagOptions.clickBeaconServer&&(t.ypaAdTagOptions.clickBeaconServer="1"),N(t.ypaAdTagOptions,M.SHORTEN_NAME)}try{t.ypaAdTagOptions&&(this.ao=JSON.stringify(t.ypaAdTagOptions))}catch(t){}this.ts=(new Date).getTime(),this.u=s.href.substring(0,800);for(var a=M.HOST_URL+"/ypa/?ct=2&c="+B(this.c)+"&u="+B(this.u)+"&r="+B(n.referrer.substring(0,800))+"&w="+B(this.wd)+"&tv="+B(this.tv)+"&tt="+B(this.tt)+"&lo="+B(this.lo)+"&ty="+B(this.ty)+"&ts="+this.ts+"&ao="+P.encode(this.ao)+"&h="+B(this.h)+"&CoNo="+B(this.cono)+"&dT="+this.dT+(""===this.pg?"":"&pg="+this.pg)+(""===this.ie?"":"&ie="+this.ie)+(""===this.tg?"":"&tg="+this.tg)+(""===this.oe?"":"&oe="+this.oe)+(s!=c.top.location?"&if=1":"")+"&er="+(this.fireBeaconBool?1:0),i=0;i<this.validSlots.length;i++)this.validSlots[i].makeCall(a),this.slotCallbackWaitMap[this.validSlots[i].options.ypaAdSlotId]=1,this.slotCallbackWaitCount++;this.lh&&this.lh.mark("mark_call_made"),this.fireBeaconBool&&Q("AdCallMade",this.cono),0===this.slotCallbackWaitCount&&this.allSlotsReturned()},$.prototype.adSlotCallback=j.adSlotCallback,$.prototype.allSlotsReturned=j.allSlotsReturned,$.prototype.serveBeacon=j.serveBeacon,$.prototype.slotBeacon=j.slotBeacon,$.prototype.clickBeacon=j.clickBeacon,$.prototype.rightClickBeacon=j.rightClickBeacon,$.prototype.viewAdsBeacon=j.viewAdsBeacon,$.prototype.handleCallFailure=j.handleCallFailure,W(c,"message",function(t){if(c.postMessage){try{if(!t.data||!t.data.match(/^ypa/))return;var e=t.data.replace(/^ypa/,""),a=JSON.parse(e)}catch(t){return}if(t.origin!==M.HOST_URL||"ypapostmessage"!==a.evId)return;var i=J.iframeIdToSlotMap[a.eNm];void 0!==i&&null!==i&&i.adSlotCallback(a)}}),window.ypaAds={insertMultiAd:function(t){var e=new $(t);null===c.JSON||void 0===c.JSON?F.loadModules(["json"],function(t){e.validate()&&e.makeCall()}):e.validate()&&e.makeCall()}}}}();